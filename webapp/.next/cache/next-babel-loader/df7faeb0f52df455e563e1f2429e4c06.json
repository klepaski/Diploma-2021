{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport moment from 'moment';\nimport { modifySrc } from '../../utils/modifySrc';\nimport { WrapperInboxItem, Avatar, WrapperContext, WrapperNameDate, NameOffer, DateOffer, LastMessage, Status, WrapLastMessage, UnreadCount } from './styledComponent';\nimport Link from \"next/link\";\nimport { modifyStatus } from '../../utils/modifyForUser';\nexport default function InboxItem(_ref) {\n  let {\n    chat,\n    me\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"chat\", \"me\"]);\n\n  let lastMessage = chat.lastMessage && chat.lastMessage.id ? chat.lastMessage : {\n    createDate: null\n  };\n  let iCreator = me.id === chat.offerCreatorId.id;\n  let chatAvatar = modifySrc(null, 'profile'),\n      companionId = '';\n\n  if (iCreator) {\n    chatAvatar = modifySrc(chat.clientId && chat.clientId.profilePhotoURL ? chat.clientId.profilePhotoURL : '', 'profile');\n    companionId = chat.clientId.id;\n  } else {\n    chatAvatar = modifySrc(chat.offerCreatorId && chat.offerCreatorId.profilePhotoURL ? chat.offerCreatorId.profilePhotoURL : '', 'profile');\n    companionId = chat.offerCreatorId.id;\n  }\n\n  let typeChat = chat.status ? \"booking\" : \"offer\";\n  return __jsx(WrapperInboxItem, props, __jsx(Link, {\n    href: `/users/[id]`,\n    as: `/users/${companionId}`\n  }, __jsx(Avatar, {\n    src: chatAvatar\n  })), __jsx(Link, {\n    href: `/inbox/[id]/${typeChat}`,\n    as: `/inbox/${chat.id}/${typeChat}`\n  }, __jsx(WrapperContext, null, __jsx(WrapperNameDate, null, __jsx(NameOffer, null, chat.offerId ? chat.offerId.name : ''), __jsx(DateOffer, null, moment(lastMessage.createDate).format('D MMM'))), __jsx(WrapLastMessage, null, __jsx(LastMessage, null, lastMessage.text), !!chat.unreadMessages && __jsx(UnreadCount, null)), __jsx(Status, null, modifyStatus(chat.status)))));\n}","map":{"version":3,"sources":["D:/4/диплом/webapp — копия/components/Inbox/InboxItem.js"],"names":["React","moment","modifySrc","WrapperInboxItem","Avatar","WrapperContext","WrapperNameDate","NameOffer","DateOffer","LastMessage","Status","WrapLastMessage","UnreadCount","Link","modifyStatus","InboxItem","chat","me","props","lastMessage","id","createDate","iCreator","offerCreatorId","chatAvatar","companionId","clientId","profilePhotoURL","typeChat","status","offerId","name","format","text","unreadMessages"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,SAAQC,SAAR,QAAwB,uBAAxB;AACA,SAAQC,gBAAR,EAA0BC,MAA1B,EAAkCC,cAAlC,EAAkDC,eAAlD,EAAmEC,SAAnE,EAA8EC,SAA9E,EAAyFC,WAAzF,EAAsGC,MAAtG,EAA8GC,eAA9G,EAA+HC,WAA/H,QAAiJ,mBAAjJ;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAAQC,YAAR,QAA2B,2BAA3B;AAEA,eAAe,SAASC,SAAT,OAA0C;AAAA,MAAtB;AAACC,IAAAA,IAAD;AAAOC,IAAAA;AAAP,GAAsB;AAAA,MAARC,KAAQ;;AACrD,MAAIC,WAAW,GAAIH,IAAI,CAACG,WAAL,IAAoBH,IAAI,CAACG,WAAL,CAAiBC,EAAtC,GAA4CJ,IAAI,CAACG,WAAjD,GAA+D;AAACE,IAAAA,UAAU,EAAE;AAAb,GAAjF;AAEA,MAAIC,QAAQ,GAAIL,EAAE,CAACG,EAAH,KAAUJ,IAAI,CAACO,cAAL,CAAoBH,EAA9C;AACA,MAAII,UAAU,GAAGtB,SAAS,CAAC,IAAD,EAAO,SAAP,CAA1B;AAAA,MACIuB,WAAW,GAAG,EADlB;;AAIA,MAAGH,QAAH,EAAa;AACTE,IAAAA,UAAU,GAAGtB,SAAS,CAAEc,IAAI,CAACU,QAAL,IAAiBV,IAAI,CAACU,QAAL,CAAcC,eAAhC,GAAmDX,IAAI,CAACU,QAAL,CAAcC,eAAjE,GAAmF,EAApF,EAAwF,SAAxF,CAAtB;AACAF,IAAAA,WAAW,GAAGT,IAAI,CAACU,QAAL,CAAcN,EAA5B;AACH,GAHD,MAGO;AACHI,IAAAA,UAAU,GAAGtB,SAAS,CAAEc,IAAI,CAACO,cAAL,IAAuBP,IAAI,CAACO,cAAL,CAAoBI,eAA5C,GAA+DX,IAAI,CAACO,cAAL,CAAoBI,eAAnF,GAAqG,EAAtG,EAA2G,SAA3G,CAAtB;AACAF,IAAAA,WAAW,GAAGT,IAAI,CAACO,cAAL,CAAoBH,EAAlC;AACH;;AAED,MAAIQ,QAAQ,GAAGZ,IAAI,CAACa,MAAL,GAAa,SAAb,GAAyB,OAAxC;AAEA,SAEI,MAAC,gBAAD,EAAsBX,KAAtB,EACI,MAAC,IAAD;AAAM,IAAA,IAAI,EAAG,aAAb;AAA2B,IAAA,EAAE,EAAG,UAASO,WAAY;AAArD,KACI,MAAC,MAAD;AAAQ,IAAA,GAAG,EAAED;AAAb,IADJ,CADJ,EAII,MAAC,IAAD;AAAM,IAAA,IAAI,EAAG,eAAcI,QAAS,EAApC;AAAuC,IAAA,EAAE,EAAG,UAASZ,IAAI,CAACI,EAAG,IAAGQ,QAAS;AAAzE,KACI,MAAC,cAAD,QACI,MAAC,eAAD,QACI,MAAC,SAAD,QAAYZ,IAAI,CAACc,OAAL,GAAed,IAAI,CAACc,OAAL,CAAaC,IAA5B,GAAmC,EAA/C,CADJ,EAEI,MAAC,SAAD,QAAY9B,MAAM,CAACkB,WAAW,CAACE,UAAb,CAAN,CAA+BW,MAA/B,CAAsC,OAAtC,CAAZ,CAFJ,CADJ,EAKI,MAAC,eAAD,QACI,MAAC,WAAD,QACKb,WAAW,CAACc,IADjB,CADJ,EAIK,CAAC,CAACjB,IAAI,CAACkB,cAAP,IAA0B,MAAC,WAAD,OAJ/B,CALJ,EAYI,MAAC,MAAD,QAASpB,YAAY,CAACE,IAAI,CAACa,MAAN,CAArB,CAZJ,CADJ,CAJJ,CAFJ;AAwBH","sourcesContent":["import React from \"react\";\r\nimport moment from 'moment'\r\n\r\nimport {modifySrc} from '../../utils/modifySrc'\r\nimport {WrapperInboxItem, Avatar, WrapperContext, WrapperNameDate, NameOffer, DateOffer, LastMessage, Status, WrapLastMessage, UnreadCount} from './styledComponent'\r\nimport Link from \"next/link\";\r\nimport {modifyStatus} from '../../utils/modifyForUser'\r\n\r\nexport default function InboxItem ({chat, me, ...props}) {\r\n    let lastMessage = (chat.lastMessage && chat.lastMessage.id) ? chat.lastMessage : {createDate: null}\r\n\r\n    let iCreator  = me.id === chat.offerCreatorId.id;\r\n    let chatAvatar = modifySrc(null, 'profile'),\r\n        companionId = '';\r\n\r\n\r\n    if(iCreator) {\r\n        chatAvatar = modifySrc((chat.clientId && chat.clientId.profilePhotoURL) ? chat.clientId.profilePhotoURL : '', 'profile')\r\n        companionId = chat.clientId.id\r\n    } else {\r\n        chatAvatar = modifySrc((chat.offerCreatorId && chat.offerCreatorId.profilePhotoURL) ? chat.offerCreatorId.profilePhotoURL : '' , 'profile')\r\n        companionId = chat.offerCreatorId.id\r\n    }\r\n\r\n    let typeChat = chat.status? \"booking\" : \"offer\"\r\n\r\n    return (\r\n\r\n        <WrapperInboxItem {...props}>\r\n            <Link href={`/users/[id]`} as={`/users/${companionId}`}>\r\n                <Avatar src={chatAvatar} />\r\n            </Link>\r\n            <Link href={`/inbox/[id]/${typeChat}`} as={`/inbox/${chat.id}/${typeChat}`}>\r\n                <WrapperContext>\r\n                    <WrapperNameDate>\r\n                        <NameOffer>{chat.offerId ? chat.offerId.name : ''}</NameOffer>\r\n                        <DateOffer>{moment(lastMessage.createDate).format('D MMM')}</DateOffer>\r\n                    </WrapperNameDate>\r\n                    <WrapLastMessage>\r\n                        <LastMessage>\r\n                            {lastMessage.text}\r\n                        </LastMessage>\r\n                        {!!chat.unreadMessages &&  <UnreadCount />}\r\n                    </WrapLastMessage>\r\n\r\n                    <Status>{modifyStatus(chat.status)}</Status>\r\n                </WrapperContext>\r\n            </Link>\r\n        </WrapperInboxItem>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}