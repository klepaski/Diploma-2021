{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _objectDestructuringEmpty from \"@babel/runtime-corejs2/helpers/esm/objectDestructuringEmpty\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { useAction, useAtom } from \"@reatom/react\";\nimport OfferCardItem from \"../../Offer/cards/OfferCardItem\";\nimport { apiGetListOffers } from \"../../../actions/api\";\nimport { withReatom } from \"../../../lib/withReatom\";\nimport { offersAtom } from \"../../../features/offers/atoms\";\nimport { setListOffersAction } from \"../../../features/offers/actions\";\n\nvar ListPopularOffers = function ListPopularOffers(_ref) {\n  _objectDestructuringEmpty(_ref);\n\n  // const [offers, setOffers] = useState([])\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var offers = useAtom(offersAtom);\n  var setOffers = useAction(function (data) {\n    return setListOffersAction(data);\n  });\n  useEffect(function () {\n    var getList = function getList() {\n      var res;\n      return _regeneratorRuntime.async(function getList$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(apiGetListOffers());\n\n            case 3:\n              res = _context.sent;\n              setOffers(res.data);\n              setLoading(false);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    if (!offers.length) {\n      getList();\n    }\n  }, []);\n  return __jsx(\"div\", {\n    className: \"row\"\n  }, loading ? __jsx(React.Fragment, null, \"Loading...\") : __jsx(React.Fragment, null, offers.map(function (item, key) {\n    return __jsx(\"div\", {\n      key: key,\n      className: \"col-xs-6\"\n    }, __jsx(OfferCardItem, {\n      offer: item\n    }));\n  })));\n};\n\nexport default withReatom(ListPopularOffers);","map":{"version":3,"sources":["D:/git/webapp3/webapp/components/Offer/list/ListPopularOffers.js"],"names":["React","useState","useEffect","useAction","useAtom","OfferCardItem","apiGetListOffers","withReatom","offersAtom","setListOffersAction","ListPopularOffers","loading","setLoading","offers","setOffers","data","getList","res","length","map","item","key"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAAQC,SAAR,EAAmBC,OAAnB,QAAiC,eAAjC;AAEA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,SAAQC,gBAAR,QAA+B,sBAA/B;AACA,SAAQC,UAAR,QAAyB,yBAAzB;AACA,SAAQC,UAAR,QAAyB,gCAAzB;AACA,SAAQC,mBAAR,QAAkC,kCAAlC;;AAGA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,OAAQ;AAAA;;AAC9B;AAD8B,kBAEAT,QAAQ,CAAC,KAAD,CAFR;AAAA,MAEvBU,OAFuB;AAAA,MAEdC,UAFc;;AAG9B,MAAIC,MAAM,GAAGT,OAAO,CAACI,UAAD,CAApB;AACA,MAAMM,SAAS,GAAGX,SAAS,CAAE,UAACY,IAAD;AAAA,WAAUN,mBAAmB,CAACM,IAAD,CAA7B;AAAA,GAAF,CAA3B;AAEAb,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIc,OAAO,GAAG,SAAVA,OAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AACVJ,cAAAA,UAAU,CAAC,IAAD,CAAV;AADU;AAAA,+CAEMN,gBAAgB,EAFtB;;AAAA;AAENW,cAAAA,GAFM;AAGVH,cAAAA,SAAS,CAACG,GAAG,CAACF,IAAL,CAAT;AACAH,cAAAA,UAAU,CAAC,KAAD,CAAV;;AAJU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAd;;AAMA,QAAG,CAACC,MAAM,CAACK,MAAX,EAAmB;AACfF,MAAAA,OAAO;AACV;AACJ,GAVQ,EAUN,EAVM,CAAT;AAaA,SACI;AAAK,IAAA,SAAS,EAAC;AAAf,KACKL,OAAO,GACJ,yCADI,GAGJ,4BACKE,MAAM,CAACM,GAAP,CAAW,UAACC,IAAD,EAAOC,GAAP,EAAe;AACvB,WACI;AAAK,MAAA,GAAG,EAAEA,GAAV;AAAe,MAAA,SAAS,EAAC;AAAzB,OACI,MAAC,aAAD;AAAe,MAAA,KAAK,EAAED;AAAtB,MADJ,CADJ;AAKH,GANA,CADL,CAJR,CADJ;AAiBH,CApCD;;AAsCA,eAAeb,UAAU,CAACG,iBAAD,CAAzB","sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport {useAction, useAtom} from \"@reatom/react\";\r\n\r\nimport OfferCardItem from \"../../Offer/cards/OfferCardItem\";\r\nimport {apiGetListOffers} from \"../../../actions/api\"\r\nimport {withReatom} from \"../../../lib/withReatom\";\r\nimport {offersAtom} from \"../../../features/offers/atoms\";\r\nimport {setListOffersAction} from \"../../../features/offers/actions\";\r\n\r\n\r\nconst ListPopularOffers = ({}) => {\r\n    // const [offers, setOffers] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n    let offers = useAtom(offersAtom)\r\n    const setOffers = useAction( (data) => setListOffersAction(data) )\r\n\r\n    useEffect(() => {\r\n        let getList = async () => {\r\n            setLoading(true)\r\n            let res = await apiGetListOffers()\r\n            setOffers(res.data)\r\n            setLoading(false)\r\n        }\r\n        if(!offers.length) {\r\n            getList()\r\n        }\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            {loading?\r\n                <>Loading...</>\r\n                :\r\n                <>\r\n                    {offers.map((item, key) => {\r\n                        return (\r\n                            <div key={key} className=\"col-xs-6\">\r\n                                <OfferCardItem offer={item} />\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default withReatom(ListPopularOffers)"]},"metadata":{},"sourceType":"module"}