{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _objectDestructuringEmpty from \"@babel/runtime-corejs2/helpers/esm/objectDestructuringEmpty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport { MainContext } from '../../../components/contextProviders/MainContext';\nimport styled, { css } from 'styled-components';\nimport { device } from '../../../lib/mediaDevice';\nimport { Wrapper, WrapperHeight } from '../../../components/StyledComponents/Wrapper';\nimport GreatProgress from '../../../components/Offer/params/GreatProggress';\nimport { Button } from '../../../components/controls/Button/Button';\nimport { Footer } from '../../../components/Layouts/styledLayouts';\nimport { Divider } from '../../../components/StyledComponents/Divider';\nimport { apiCreateOfferParams, apiGetParamsCategory, apiEditOffer } from '../../../actions/api';\nimport { showNotification } from '../../../utils/notification';\nimport Header from '../../../components/Header/Header';\nimport useOffer from '../../../hooks/useOffer';\nimport { ContainerDesktop, FooterDesktop } from '../../../components/StyledComponents/Grid';\n\nvar Params = function Params(_ref) {\n  _objectDestructuringEmpty(_ref);\n\n  var router = useRouter();\n  var id = router.query.id;\n  var offer = useOffer(id);\n\n  var _useContext = useContext(MainContext),\n      setOffer = _useContext.setOffer;\n\n  var _useState = useState(1),\n      step = _useState[0],\n      setStep = _useState[1];\n\n  var _useState2 = useState([]),\n      params = _useState2[0],\n      setParams = _useState2[1];\n\n  var _useState3 = useState(true),\n      isLoading = _useState3[0],\n      setIsLoading = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  console.log('offer', offer);\n  useEffect(function () {\n    window.scrollTo(0, 0);\n  }, [step]);\n  useEffect(function () {\n    if (offer.id) {\n      var catId = (offer.subCategory ? offer.subCategory.id : null) || offer.category.id;\n      apiGetParamsCategory(catId).then(function (res) {\n        var params = res.data.templates,\n            parentParams = [];\n\n        if (res.data.parentCategory && res.data.parentCategory.templates) {\n          parentParams = res.data.parentCategory.templates;\n        }\n\n        var paramsConcat = parentParams.concat(params);\n        var paramsArr = paramsConcat.map(function (item, key) {\n          return item.templateId;\n        });\n\n        function removeDuplicates(myArr, prop) {\n          return myArr.filter(function (obj, pos, arr) {\n            return arr.map(function (mapObj) {\n              return mapObj[prop];\n            }).indexOf(obj[prop]) === pos;\n          });\n        }\n\n        var unique = removeDuplicates(paramsArr, 'id');\n        unique.map(function (item, key) {\n          item.value = getCategoryValue(item.id) || item.defaultValue;\n          if (!item.value && item.type === 'int') item.value = 1;\n        });\n        setParams(unique);\n        setIsLoading(false);\n      })[\"catch\"](function (err) {\n        setLoading(false);\n        setIsLoading(false);\n        showNotification('error', err);\n      });\n    }\n  }, [offer.id]);\n\n  var getCategoryValue = function getCategoryValue(id) {\n    var categoryOptions = offer.categoryOptions || [];\n    var index = categoryOptions.findIndex(function (item) {\n      var templateId = item.templateId ? item.templateId.id : null;\n      return templateId === id;\n    });\n\n    if (index !== -1) {\n      return categoryOptions[index].value;\n    }\n\n    return null;\n  };\n\n  var handleChangeStep = function handleChangeStep(i) {\n    if (step === 1 && i === 1) {\n      createParams();\n    } else {\n      setStep(step + i);\n    }\n  };\n\n  var onChange = function onChange(obj) {\n    var clone = _toConsumableArray(params);\n\n    var index = clone.findIndex(function (item) {\n      return item.id === obj.id;\n    });\n\n    if (index !== -1) {\n      clone[index] = obj;\n      setParams(clone);\n    }\n  };\n\n  var createParams = function createParams() {\n    var clone = _toConsumableArray(params);\n\n    var arr = [];\n    clone.map(function (item, key) {\n      arr.push({\n        templateId: item.id,\n        value: item.value\n      });\n    });\n    setLoading(true);\n    apiEditOffer(id, {\n      step: 1\n    });\n    apiCreateOfferParams(id, arr).then(function (res) {\n      setLoading(false);\n      setOffer(_objectSpread({}, offer, {\n        categoryOptions: res.data.categoryOptions\n      }));\n      Router.push('/offers/[id]/photos', \"/offers/\".concat(id, \"/photos\"), {\n        shallow: true\n      });\n    })[\"catch\"](function (err) {\n      setLoading(false);\n      showNotification('error', err);\n    });\n  };\n\n  var disabled = loading;\n  return __jsx(React.Fragment, null, __jsx(Header, {\n    isReg: true\n  }), __jsx(ContainerDesktop, {\n    isOffer: true\n  }, __jsx(Wrapper, {\n    p: 17,\n    pt: 35\n  }, !isLoading ? __jsx(React.Fragment, null, __jsx(WrapperHeight, null, step === 1 && __jsx(GreatProgress, {\n    offer: offer,\n    handleChangeStep: handleChangeStep,\n    loading: loading\n  })), step !== 1 && __jsx(FooterDesktop, null, __jsx(Footer, {\n    mt: 30,\n    flexEnd: step === 1\n  }, step !== 1 && __jsx(Button, {\n    onClick: function onClick() {\n      return handleChangeStep(-1);\n    }\n  }, \"Back\"), __jsx(Button, {\n    blue: true,\n    onClick: function onClick() {\n      return handleChangeStep(1);\n    },\n    disabled: disabled\n  }, \"Next\")))) : __jsx(React.Fragment, null, \"Loading...\"))));\n};\n\nexport default Params;","map":{"version":3,"sources":["D:/4/диплом/webapp — копия/pages/offers/[id]/params.js"],"names":["React","useState","useContext","useEffect","Router","useRouter","MainContext","styled","css","device","Wrapper","WrapperHeight","GreatProgress","Button","Footer","Divider","apiCreateOfferParams","apiGetParamsCategory","apiEditOffer","showNotification","Header","useOffer","ContainerDesktop","FooterDesktop","Params","router","id","query","offer","setOffer","step","setStep","params","setParams","isLoading","setIsLoading","loading","setLoading","console","log","window","scrollTo","catId","subCategory","category","then","res","data","templates","parentParams","parentCategory","paramsConcat","concat","paramsArr","map","item","key","templateId","removeDuplicates","myArr","prop","filter","obj","pos","arr","mapObj","indexOf","unique","value","getCategoryValue","defaultValue","type","err","categoryOptions","index","findIndex","handleChangeStep","i","createParams","onChange","clone","push","shallow","disabled"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\r\nimport Router, { useRouter } from 'next/router'\r\nimport { MainContext } from '../../../components/contextProviders/MainContext'\r\nimport styled, { css } from 'styled-components'\r\nimport { device } from '../../../lib/mediaDevice'\r\nimport { Wrapper, WrapperHeight } from '../../../components/StyledComponents/Wrapper'\r\nimport GreatProgress from '../../../components/Offer/params/GreatProggress'\r\nimport { Button } from '../../../components/controls/Button/Button'\r\nimport { Footer } from '../../../components/Layouts/styledLayouts'\r\nimport { Divider } from '../../../components/StyledComponents/Divider'\r\nimport { apiCreateOfferParams, apiGetParamsCategory, apiEditOffer } from '../../../actions/api'\r\nimport { showNotification } from '../../../utils/notification'\r\nimport Header from '../../../components/Header/Header'\r\nimport useOffer from '../../../hooks/useOffer'\r\nimport { ContainerDesktop, FooterDesktop } from '../../../components/StyledComponents/Grid'\r\n\r\nconst Params = ({}) => {\r\n  const router = useRouter()\r\n  const { id } = router.query\r\n  const offer = useOffer(id)\r\n  const { setOffer } = useContext(MainContext)\r\n  const [step, setStep] = useState(1)\r\n  const [params, setParams] = useState([])\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  console.log('offer', offer)\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [step])\r\n\r\n  useEffect(() => {\r\n    if (offer.id) {\r\n      let catId = (offer.subCategory ? offer.subCategory.id : null) || offer.category.id\r\n      apiGetParamsCategory(catId)\r\n          .then((res) => {\r\n            let params = res.data.templates,\r\n                parentParams = []\r\n            if (res.data.parentCategory && res.data.parentCategory.templates) {\r\n              parentParams = res.data.parentCategory.templates\r\n            }\r\n\r\n            let paramsConcat = parentParams.concat(params)\r\n            let paramsArr = paramsConcat.map((item, key) => {\r\n              return item.templateId\r\n            })\r\n\r\n            function removeDuplicates(myArr, prop) {\r\n              return myArr.filter((obj, pos, arr) => {\r\n                return arr.map((mapObj) => mapObj[prop]).indexOf(obj[prop]) === pos\r\n              })\r\n            }\r\n            const unique = removeDuplicates(paramsArr, 'id')\r\n\r\n            unique.map((item, key) => {\r\n              item.value = getCategoryValue(item.id) || item.defaultValue\r\n              if (!item.value && item.type === 'int') item.value = 1\r\n            })\r\n            setParams(unique)\r\n            setIsLoading(false)\r\n          })\r\n          .catch((err) => {\r\n            setLoading(false)\r\n            setIsLoading(false)\r\n            showNotification('error', err)\r\n          })\r\n    }\r\n  }, [offer.id])\r\n\r\n  const getCategoryValue = (id) => {\r\n    let categoryOptions = offer.categoryOptions || []\r\n    let index = categoryOptions.findIndex((item) => {\r\n      let templateId = item.templateId ? item.templateId.id : null\r\n      return templateId === id\r\n    })\r\n    if (index !== -1) {\r\n      return categoryOptions[index].value\r\n    }\r\n    return null\r\n  }\r\n\r\n  const handleChangeStep = (i) => {\r\n    if (step === 1 && i === 1) {\r\n      createParams()\r\n    } else {\r\n      setStep(step + i)\r\n    }\r\n  }\r\n\r\n  const onChange = (obj) => {\r\n    let clone = [...params]\r\n    let index = clone.findIndex((item) => item.id === obj.id)\r\n    if (index !== -1) {\r\n      clone[index] = obj\r\n      setParams(clone)\r\n    }\r\n  }\r\n\r\n  const createParams = () => {\r\n    const clone = [...params]\r\n    let arr = []\r\n    clone.map((item, key) => {\r\n      arr.push({\r\n        templateId: item.id,\r\n        value: item.value,\r\n      })\r\n    })\r\n    setLoading(true)\r\n    apiEditOffer(id, { step: 1 })\r\n    apiCreateOfferParams(id, arr)\r\n        .then((res) => {\r\n          setLoading(false)\r\n          setOffer({ ...offer, categoryOptions: res.data.categoryOptions })\r\n          Router.push('/offers/[id]/photos', `/offers/${id}/photos`, { shallow: true })\r\n        })\r\n        .catch((err) => {\r\n          setLoading(false)\r\n          showNotification('error', err)\r\n        })\r\n  }\r\n\r\n  const disabled = loading\r\n\r\n  return (\r\n      <>\r\n        <Header isReg />\r\n        <ContainerDesktop isOffer>\r\n          <Wrapper p={17} pt={35}>\r\n            {!isLoading ? (\r\n                <>\r\n                  <WrapperHeight>\r\n                    {step === 1 && (\r\n                        <GreatProgress\r\n                            offer={offer}\r\n                            handleChangeStep={handleChangeStep}\r\n                            loading={loading}\r\n                        />\r\n                    )}\r\n                  </WrapperHeight>\r\n\r\n                  {step !== 1 && (\r\n                      <FooterDesktop>\r\n                        <Footer mt={30} flexEnd={step === 1}>\r\n                          {step !== 1 && <Button onClick={() => handleChangeStep(-1)}>Back</Button>}\r\n                          <Button blue onClick={() => handleChangeStep(1)} disabled={disabled}>\r\n                            Next\r\n                          </Button>\r\n                        </Footer>\r\n                      </FooterDesktop>\r\n                  )}\r\n                </>\r\n            ) : (\r\n                <>Loading...</>\r\n            )}\r\n          </Wrapper>\r\n        </ContainerDesktop>\r\n      </>\r\n  )\r\n}\r\n\r\nexport default Params\r\n\r\n"]},"metadata":{},"sourceType":"module"}