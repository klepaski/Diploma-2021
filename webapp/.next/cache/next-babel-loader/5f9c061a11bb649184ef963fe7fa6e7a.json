{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nvar __jsx = React.createElement;\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  height: 70vh;\\n  width: 100%;\\n  background: url(\", \");\\n  background-size: cover;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 15px;\\n  right: 15px;\\n\\n  @media \", \" {\\n    right: 150px;\\n    bottom: 15px;\\n    top: auto;\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n\\n  @media \", \" {\\n    .image-gallery-slide img {\\n      height: 50vh;\\n      min-height: 50vh;\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from 'react';\nimport ImageGallery from 'react-image-gallery';\nimport Slider from 'react-slick';\nimport styled from 'styled-components';\nimport galleryBg from '../../static/img/gallery-bg.jpg';\nimport { modifySrc } from '../../utils/modifySrc';\nimport { ButtonIcon } from '../controls/Button/ButtonWithIcon';\nimport { device } from '../../lib/mediaDevice';\nimport 'react-image-gallery/styles/css/image-gallery.css';\nimport { useDetectDevice } from '../../lib/useDetectDevice';\nimport { OnlyMobile, OnlyDesktop } from '../StyledComponents/Grid';\nimport './styles.css';\nimport ArrowIcon from '../../static/img/white-arrow.png';\nimport OfferCover from '../../static/img/offer_cover_big.jpg';\n\nvar GalleryOffer = function GalleryOffer(_ref) {\n  var offer = _ref.offer,\n      handleToggleLike = _ref.handleToggleLike;\n  var avatarUrl = offer.avatarUrl,\n      offerPhoto = offer.offerPhoto,\n      status = offer.status;\n\n  var _useState = useState(0),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useState2 = useState([]),\n      arrayPhotos = _useState2[0],\n      setArrayPhotos = _useState2[1];\n\n  var currentDevice = useDetectDevice();\n  useEffect(function () {\n    var filteredPhoto = offerPhoto.filter(function (item) {\n      return item.photoUrl !== avatarUrl;\n    });\n    var photos = avatarUrl ? [{\n      photoUrl: avatarUrl\n    }].concat(_toConsumableArray(filteredPhoto)) : filteredPhoto;\n    var images = photos.map(function (item) {\n      return {\n        original: modifySrc(item.photoUrl, 'offer')\n      }; // return { original: item.photoUrl }\n    });\n    setArrayPhotos(images);\n  }, [offer.id]);\n\n  function SampleNextArrow(props) {\n    var className = props.className,\n        style = props.style,\n        onClick = props.onClick;\n    return __jsx(\"img\", {\n      className: className,\n      src: ArrowIcon,\n      onClick: onClick\n    });\n  }\n\n  function SamplePrevArrow(props) {\n    var className = props.className,\n        style = props.style,\n        onClick = props.onClick;\n    return __jsx(\"img\", {\n      className: className,\n      src: ArrowIcon,\n      onClick: onClick\n    });\n  }\n\n  var settings = {\n    className: 'slider variable-width',\n    dots: false,\n    infinite: true,\n    centerMode: false,\n    slidesToShow: 1,\n    slidesToScroll: 1,\n    variableWidth: true,\n    nextArrow: __jsx(SampleNextArrow, null),\n    prevArrow: __jsx(SamplePrevArrow, null)\n  };\n  return __jsx(GalleryWrapper, null, __jsx(OnlyMobile, null, !!arrayPhotos.length && __jsx(ImageGallery, {\n    items: arrayPhotos,\n    showThumbnails: false,\n    showPlayButton: false,\n    showFullscreenButton: currentDevice.isLaptopDesktop ? false : true\n  })), offer.id && __jsx(OnlyDesktop, null, arrayPhotos.length > 2 ? __jsx(Slider, settings, arrayPhotos.map(function (item) {\n    return __jsx(\"img\", {\n      src: item.original,\n      alt: \"img\"\n    });\n  })) : __jsx(Cover, {\n    src: arrayPhotos[0] ? arrayPhotos[0].original : null\n  })), __jsx(BtnShareLike, null, __jsx(ButtonIcon, {\n    offer: true,\n    like: true,\n    active: offer.myLike,\n    onClick: handleToggleLike\n  }), __jsx(ButtonIcon, {\n    offer: true,\n    share: true\n  })));\n};\n\nvar GalleryWrapper = styled.div(_templateObject(), device.laptopDesktop);\nvar BtnShareLike = styled.div(_templateObject2(), device.laptopDesktop);\nvar Cover = styled.div(_templateObject3(), function (p) {\n  return p.src ? p.src : OfferCover;\n});\nexport { GalleryOffer };","map":{"version":3,"sources":["D:/4/диплом/webapp/components/Gallery/GalleryOffer.js"],"names":["React","useState","useEffect","ImageGallery","Slider","styled","galleryBg","modifySrc","ButtonIcon","device","useDetectDevice","OnlyMobile","OnlyDesktop","ArrowIcon","OfferCover","GalleryOffer","offer","handleToggleLike","avatarUrl","offerPhoto","status","active","setActive","arrayPhotos","setArrayPhotos","currentDevice","filteredPhoto","filter","item","photoUrl","photos","images","map","original","id","SampleNextArrow","props","className","style","onClick","SamplePrevArrow","settings","dots","infinite","centerMode","slidesToShow","slidesToScroll","variableWidth","nextArrow","prevArrow","length","isLaptopDesktop","myLike","GalleryWrapper","div","laptopDesktop","BtnShareLike","Cover","p","src"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,YAAP,MAAyB,qBAAzB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,SAAP,MAAsB,iCAAtB;AACA,SAASC,SAAT,QAA0B,uBAA1B;AACA,SAASC,UAAT,QAA2B,mCAA3B;AACA,SAASC,MAAT,QAAuB,uBAAvB;AACA,OAAO,kDAAP;AACA,SAASC,eAAT,QAAgC,2BAAhC;AACA,SAASC,UAAT,EAAqBC,WAArB,QAAwC,0BAAxC;AACA,OAAO,cAAP;AACA,OAAOC,SAAP,MAAsB,kCAAtB;AACA,OAAOC,UAAP,MAAuB,sCAAvB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAAiC;AAAA,MAA9BC,KAA8B,QAA9BA,KAA8B;AAAA,MAAvBC,gBAAuB,QAAvBA,gBAAuB;AAAA,MAC5CC,SAD4C,GACVF,KADU,CAC5CE,SAD4C;AAAA,MACjCC,UADiC,GACVH,KADU,CACjCG,UADiC;AAAA,MACrBC,MADqB,GACVJ,KADU,CACrBI,MADqB;;AAAA,kBAExBnB,QAAQ,CAAC,CAAD,CAFgB;AAAA,MAE7CoB,MAF6C;AAAA,MAErCC,SAFqC;;AAAA,mBAGdrB,QAAQ,CAAC,EAAD,CAHM;AAAA,MAG7CsB,WAH6C;AAAA,MAGhCC,cAHgC;;AAIpD,MAAMC,aAAa,GAAGf,eAAe,EAArC;AAEAR,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIwB,aAAa,GAAGP,UAAU,CAACQ,MAAX,CAAkB,UAACC,IAAD;AAAA,aAAUA,IAAI,CAACC,QAAL,KAAkBX,SAA5B;AAAA,KAAlB,CAApB;AACA,QAAIY,MAAM,GAAGZ,SAAS,IAAI;AAAEW,MAAAA,QAAQ,EAAEX;AAAZ,KAAJ,4BAAgCQ,aAAhC,KAAiDA,aAAvE;AACA,QAAIK,MAAM,GAAGD,MAAM,CAACE,GAAP,CAAW,UAACJ,IAAD,EAAU;AAChC,aAAO;AAAEK,QAAAA,QAAQ,EAAE1B,SAAS,CAACqB,IAAI,CAACC,QAAN,EAAgB,OAAhB;AAArB,OAAP,CADgC,CAEhC;AACD,KAHY,CAAb;AAIAL,IAAAA,cAAc,CAACO,MAAD,CAAd;AACD,GARQ,EAQN,CAACf,KAAK,CAACkB,EAAP,CARM,CAAT;;AAUA,WAASC,eAAT,CAAyBC,KAAzB,EAAgC;AAAA,QACtBC,SADsB,GACQD,KADR,CACtBC,SADsB;AAAA,QACXC,KADW,GACQF,KADR,CACXE,KADW;AAAA,QACJC,OADI,GACQH,KADR,CACJG,OADI;AAE9B,WAAO;AAAK,MAAA,SAAS,EAAEF,SAAhB;AAA2B,MAAA,GAAG,EAAExB,SAAhC;AAA2C,MAAA,OAAO,EAAE0B;AAApD,MAAP;AACD;;AAED,WAASC,eAAT,CAAyBJ,KAAzB,EAAgC;AAAA,QACtBC,SADsB,GACQD,KADR,CACtBC,SADsB;AAAA,QACXC,KADW,GACQF,KADR,CACXE,KADW;AAAA,QACJC,OADI,GACQH,KADR,CACJG,OADI;AAE9B,WAAO;AAAK,MAAA,SAAS,EAAEF,SAAhB;AAA2B,MAAA,GAAG,EAAExB,SAAhC;AAA2C,MAAA,OAAO,EAAE0B;AAApD,MAAP;AACD;;AAED,MAAME,QAAQ,GAAG;AACfJ,IAAAA,SAAS,EAAE,uBADI;AAEfK,IAAAA,IAAI,EAAE,KAFS;AAGfC,IAAAA,QAAQ,EAAE,IAHK;AAIfC,IAAAA,UAAU,EAAE,KAJG;AAKfC,IAAAA,YAAY,EAAE,CALC;AAMfC,IAAAA,cAAc,EAAE,CAND;AAOfC,IAAAA,aAAa,EAAE,IAPA;AAQfC,IAAAA,SAAS,EAAE,MAAC,eAAD,OARI;AASfC,IAAAA,SAAS,EAAE,MAAC,eAAD;AATI,GAAjB;AAaA,SACE,MAAC,cAAD,QACE,MAAC,UAAD,QACG,CAAC,CAAC1B,WAAW,CAAC2B,MAAd,IACD,MAAC,YAAD;AACI,IAAA,KAAK,EAAE3B,WADX;AAEI,IAAA,cAAc,EAAE,KAFpB;AAGI,IAAA,cAAc,EAAE,KAHpB;AAII,IAAA,oBAAoB,EAAEE,aAAa,CAAC0B,eAAd,GAAgC,KAAhC,GAAwC;AAJlE,IAFF,CADF,EAYGnC,KAAK,CAACkB,EAAN,IACC,MAAC,WAAD,QACGX,WAAW,CAAC2B,MAAZ,GAAqB,CAArB,GACC,MAAC,MAAD,EAAYT,QAAZ,EACGlB,WAAW,CAACS,GAAZ,CAAgB,UAACJ,IAAD;AAAA,WACf;AAAK,MAAA,GAAG,EAAEA,IAAI,CAACK,QAAf;AAAyB,MAAA,GAAG,EAAC;AAA7B,MADe;AAAA,GAAhB,CADH,CADD,GAOC,MAAC,KAAD;AAAO,IAAA,GAAG,EAAEV,WAAW,CAAC,CAAD,CAAX,GAAiBA,WAAW,CAAC,CAAD,CAAX,CAAeU,QAAhC,GAA2C;AAAvD,IARJ,CAbJ,EA0BE,MAAC,YAAD,QACE,MAAC,UAAD;AAAY,IAAA,KAAK,MAAjB;AAAkB,IAAA,IAAI,MAAtB;AAAuB,IAAA,MAAM,EAAEjB,KAAK,CAACoC,MAArC;AAA6C,IAAA,OAAO,EAAEnC;AAAtD,IADF,EAEE,MAAC,UAAD;AAAY,IAAA,KAAK,MAAjB;AAAkB,IAAA,KAAK;AAAvB,IAFF,CA1BF,CADF;AAiCD,CAxED;;AA0EA,IAAMoC,cAAc,GAAGhD,MAAM,CAACiD,GAAV,oBAGT7C,MAAM,CAAC8C,aAHE,CAApB;AAUA,IAAMC,YAAY,GAAGnD,MAAM,CAACiD,GAAV,qBAKP7C,MAAM,CAAC8C,aALA,CAAlB;AAYA,IAAME,KAAK,GAAGpD,MAAM,CAACiD,GAAV,qBAGS,UAACI,CAAD;AAAA,SAAQA,CAAC,CAACC,GAAF,GAAQD,CAAC,CAACC,GAAV,GAAgB7C,UAAxB;AAAA,CAHT,CAAX;AAOA,SAASC,YAAT","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport ImageGallery from 'react-image-gallery'\r\nimport Slider from 'react-slick'\r\nimport styled from 'styled-components'\r\nimport galleryBg from '../../static/img/gallery-bg.jpg'\r\nimport { modifySrc } from '../../utils/modifySrc'\r\nimport { ButtonIcon } from '../controls/Button/ButtonWithIcon'\r\nimport { device } from '../../lib/mediaDevice'\r\nimport 'react-image-gallery/styles/css/image-gallery.css'\r\nimport { useDetectDevice } from '../../lib/useDetectDevice'\r\nimport { OnlyMobile, OnlyDesktop } from '../StyledComponents/Grid'\r\nimport './styles.css'\r\nimport ArrowIcon from '../../static/img/white-arrow.png'\r\nimport OfferCover from '../../static/img/offer_cover_big.jpg'\r\n\r\nconst GalleryOffer = ({ offer, handleToggleLike }) => {\r\n  const { avatarUrl, offerPhoto, status } = offer\r\n  const [active, setActive] = useState(0)\r\n  const [arrayPhotos, setArrayPhotos] = useState([])\r\n  const currentDevice = useDetectDevice()\r\n\r\n  useEffect(() => {\r\n    let filteredPhoto = offerPhoto.filter((item) => item.photoUrl !== avatarUrl)\r\n    let photos = avatarUrl ? [{ photoUrl: avatarUrl }, ...filteredPhoto] : filteredPhoto\r\n    let images = photos.map((item) => {\r\n      return { original: modifySrc(item.photoUrl, 'offer') }\r\n      // return { original: item.photoUrl }\r\n    })\r\n    setArrayPhotos(images)\r\n  }, [offer.id])\r\n\r\n  function SampleNextArrow(props) {\r\n    const { className, style, onClick } = props\r\n    return <img className={className} src={ArrowIcon} onClick={onClick} />\r\n  }\r\n\r\n  function SamplePrevArrow(props) {\r\n    const { className, style, onClick } = props\r\n    return <img className={className} src={ArrowIcon} onClick={onClick} />\r\n  }\r\n\r\n  const settings = {\r\n    className: 'slider variable-width',\r\n    dots: false,\r\n    infinite: true,\r\n    centerMode: false,\r\n    slidesToShow: 1,\r\n    slidesToScroll: 1,\r\n    variableWidth: true,\r\n    nextArrow: <SampleNextArrow />,\r\n    prevArrow: <SamplePrevArrow />,\r\n  }\r\n\r\n\r\n  return (\r\n    <GalleryWrapper>\r\n      <OnlyMobile>\r\n        {!!arrayPhotos.length &&\r\n        <ImageGallery\r\n            items={arrayPhotos}\r\n            showThumbnails={false}\r\n            showPlayButton={false}\r\n            showFullscreenButton={currentDevice.isLaptopDesktop ? false : true}\r\n        />\r\n        }\r\n      </OnlyMobile>\r\n\r\n      {offer.id && (\r\n        <OnlyDesktop>\r\n          {arrayPhotos.length > 2 ? (\r\n            <Slider {...settings}>\r\n              {arrayPhotos.map((item) => (\r\n                <img src={item.original} alt=\"img\" />\r\n              ))}\r\n            </Slider>\r\n          ) : (\r\n            <Cover src={arrayPhotos[0] ? arrayPhotos[0].original : null} />\r\n          )}\r\n        </OnlyDesktop>\r\n      )}\r\n\r\n      <BtnShareLike>\r\n        <ButtonIcon offer like active={offer.myLike} onClick={handleToggleLike}></ButtonIcon>\r\n        <ButtonIcon offer share></ButtonIcon>\r\n      </BtnShareLike>\r\n    </GalleryWrapper>\r\n  )\r\n}\r\n\r\nconst GalleryWrapper = styled.div`\r\n  position: relative;\r\n\r\n  @media ${device.laptopDesktop} {\r\n    .image-gallery-slide img {\r\n      height: 50vh;\r\n      min-height: 50vh;\r\n    }\r\n  }\r\n`\r\nconst BtnShareLike = styled.div`\r\n  position: absolute;\r\n  top: 15px;\r\n  right: 15px;\r\n\r\n  @media ${device.laptopDesktop} {\r\n    right: 150px;\r\n    bottom: 15px;\r\n    top: auto;\r\n  }\r\n`\r\n\r\nconst Cover = styled.div`\r\n  height: 70vh;\r\n  width: 100%;\r\n  background: url(${(p) => (p.src ? p.src : OfferCover)});\r\n  background-size: cover;\r\n`\r\n\r\nexport { GalleryOffer }\r\n"]},"metadata":{},"sourceType":"module"}