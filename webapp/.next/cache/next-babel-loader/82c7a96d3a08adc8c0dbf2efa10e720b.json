{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport { apiGetOfferById } from '../actions/api';\nimport { showNotification } from \"./notification\";\n\nconst withOfferInfo = OfferComponent => {\n  return class OfferWrapper extends Component {\n    static async getInitialProps({\n      req,\n      res,\n      query\n    }) {\n      try {\n        return {\n          id: query.id\n        };\n      } catch (err) {\n        console.log('ошибка', err);\n      }\n    }\n\n    constructor(props) {\n      super(props);\n      this.state = {\n        offer: {},\n        offerPhotos: [],\n        loading: false\n      };\n    }\n\n    componentDidMount() {\n      if (this.props.id) {\n        apiGetOfferById(this.props.id).then(res => {\n          if (res.data.userId === localStorage.getItem('userId')) {\n            this.setState({\n              offer: res.data\n            }, () => {\n              this.setState({\n                loading: false\n              });\n            });\n          } else {\n            showNotification('error', 'Not allowed');\n            Router.push('/');\n          }\n        }).catch(e => {\n          this.setState({\n            loading: false\n          });\n        });\n      } else {}\n    }\n\n    render() {\n      return __jsx(\"div\", null, this.state.loading ? __jsx(\"div\", null, \"LOADING....\") : __jsx(OfferComponent, _extends({}, this.props, {\n        offer: this.state.offer\n      })));\n    }\n\n  };\n};\n\nexport default withOfferInfo;","map":{"version":3,"sources":["D:/4/диплом/webapp/utils/offer.js"],"names":["React","Component","Router","apiGetOfferById","showNotification","withOfferInfo","OfferComponent","OfferWrapper","getInitialProps","req","res","query","id","err","console","log","constructor","props","state","offer","offerPhotos","loading","componentDidMount","then","data","userId","localStorage","getItem","setState","push","catch","e","render"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAAQC,eAAR,QAA8B,gBAA9B;AACA,SAAQC,gBAAR,QAA+B,gBAA/B;;AAGA,MAAMC,aAAa,GAAIC,cAAD,IAAoB;AACtC,SAAO,MAAMC,YAAN,SAA2BN,SAA3B,CAAqC;AACxC,iBAAaO,eAAb,CAA8B;AAACC,MAAAA,GAAD;AAAMC,MAAAA,GAAN;AAAWC,MAAAA;AAAX,KAA9B,EAAiD;AAC7C,UAAI;AACA,eAAO;AAACC,UAAAA,EAAE,EAAED,KAAK,CAACC;AAAX,SAAP;AACH,OAFD,CAGA,OAAOC,GAAP,EAAY;AACRC,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,GAAtB;AACH;AACJ;;AACDG,IAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,YAAMA,KAAN;AACA,WAAKC,KAAL,GAAa;AACTC,QAAAA,KAAK,EAAE,EADE;AAETC,QAAAA,WAAW,EAAE,EAFJ;AAGTC,QAAAA,OAAO,EAAE;AAHA,OAAb;AAKH;;AAEDC,IAAAA,iBAAiB,GAAI;AACjB,UAAI,KAAKL,KAAL,CAAWL,EAAf,EAAmB;AACfT,QAAAA,eAAe,CAAC,KAAKc,KAAL,CAAWL,EAAZ,CAAf,CACKW,IADL,CACUb,GAAG,IAAI;AACT,cAAGA,GAAG,CAACc,IAAJ,CAASC,MAAT,KAAoBC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAvB,EAAsD;AAClD,iBAAKC,QAAL,CAAc;AAACT,cAAAA,KAAK,EAAET,GAAG,CAACc;AAAZ,aAAd,EAAiC,MAAM;AACnC,mBAAKI,QAAL,CAAc;AAACP,gBAAAA,OAAO,EAAE;AAAV,eAAd;AACH,aAFD;AAGH,WAJD,MAIO;AACHjB,YAAAA,gBAAgB,CAAC,OAAD,EAAU,aAAV,CAAhB;AACAF,YAAAA,MAAM,CAAC2B,IAAP,CAAY,GAAZ;AACH;AACJ,SAVL,EAWKC,KAXL,CAWWC,CAAC,IAAI;AACR,eAAKH,QAAL,CAAc;AAACP,YAAAA,OAAO,EAAE;AAAV,WAAd;AACH,SAbL;AAcH,OAfD,MAeO,CAEN;AACJ;;AAEDW,IAAAA,MAAM,GAAG;AACL,aACI,mBACK,KAAKd,KAAL,CAAWG,OAAX,GACG,iCADH,GAGG,MAAC,cAAD,eAAoB,KAAKJ,KAAzB;AAAiC,QAAA,KAAK,EAAE,KAAKC,KAAL,CAAWC;AAAnD,SAJR,CADJ;AASH;;AAjDuC,GAA5C;AAmDH,CApDD;;AAsDA,eAAed,aAAf","sourcesContent":["import React, {Component} from 'react'\r\nimport Router from 'next/router'\r\nimport {apiGetOfferById} from '../actions/api'\r\nimport {showNotification} from \"./notification\";\r\n\r\n\r\nconst withOfferInfo = (OfferComponent) => {\r\n    return class OfferWrapper extends Component {\r\n        static async getInitialProps ({req, res, query}) {\r\n            try {\r\n                return {id: query.id}\r\n            }\r\n            catch (err) {\r\n                console.log('ошибка', err)\r\n            }\r\n        };\r\n        constructor(props) {\r\n            super(props)\r\n            this.state = {\r\n                offer: {},\r\n                offerPhotos: [],\r\n                loading: false\r\n            };\r\n        }\r\n\r\n        componentDidMount () {\r\n            if (this.props.id) {\r\n                apiGetOfferById(this.props.id)\r\n                    .then(res => {\r\n                        if(res.data.userId === localStorage.getItem('userId')){\r\n                            this.setState({offer: res.data}, () => {\r\n                                this.setState({loading: false})\r\n                            })\r\n                        } else {\r\n                            showNotification('error', 'Not allowed')\r\n                            Router.push('/')\r\n                        }\r\n                    })\r\n                    .catch(e => {\r\n                        this.setState({loading: false})\r\n                    })\r\n            } else {\r\n\r\n            }\r\n        }\r\n\r\n        render() {\r\n            return (\r\n                <div>\r\n                    {this.state.loading ? (\r\n                        <div>LOADING....</div>\r\n                    ) : (\r\n                        <OfferComponent {...this.props}  offer={this.state.offer}/>\r\n                    )}\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default withOfferInfo;"]},"metadata":{},"sourceType":"module"}