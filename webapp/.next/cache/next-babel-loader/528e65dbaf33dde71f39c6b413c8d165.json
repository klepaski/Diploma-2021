{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useContext, useEffect } from 'react';\nimport Router from 'next/router';\nimport { Footer, Label2, Title } from \"../../components/Layouts/styledLayouts\";\nimport { Wrapper, WrapperHeight } from \"../../components/StyledComponents/Wrapper\";\nimport { Button, ButtonMin } from \"../../components/controls/Button/Button\";\nimport Header from \"../../components/Header/Header\";\nimport { Text } from \"../../components/StyledComponents/Text\";\nimport { FlexBlock } from \"../../components/StyledComponents/FlexBlock\";\nimport { apiEditOffer, apiGetListUserOffers, apiGetListUserOffersLiked } from '../../actions/api';\nimport { MainContext } from \"../../components/contextProviders/MainContext\";\nimport OfferCardItemBig from \"../../components/Offer/cards/OfferCardItemBig\";\nimport { showNotification } from \"../../utils/notification\";\nimport { PlusPurple, Preferences } from \"../../components/StyledComponents/Icon\";\nimport OfferCardItem from \"../../components/Offer/cards/OfferCardItem\";\nimport arrowLeft from \"../../static/img/arrow-left.svg\";\nimport \"../../static/css/styles.css\";\n\nvar ProfileOffers = function ProfileOffers() {\n  var _useContext = useContext(MainContext),\n      me = _useContext.me,\n      listOffers = _useContext.listOffers;\n\n  var _useState = useState(listOffers),\n      list = _useState[0],\n      setList = _useState[1];\n\n  var _useState2 = useState([]),\n      listCategories = _useState2[0],\n      setListCategories = _useState2[1];\n\n  var _useState3 = useState({}),\n      filterCategory = _useState3[0],\n      setFilterCategory = _useState3[1];\n\n  var _useState4 = useState(true),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      isPublishing = _useState5[0],\n      setIsPublishing = _useState5[1];\n\n  useEffect(function () {\n    if (me.id) getListOffers();\n  }, [me.id]);\n\n  var getListOffers = function getListOffers() {\n    setLoading(true);\n    apiGetListUserOffersLiked(me.id).then(function (res) {\n      setList(res.data);\n      var arr = [];\n      res.data.map(function (item) {\n        var found = arr.find(function (item2) {\n          console.log(item.offerId.category.id);\n          console.log(item2.id);\n          return item2.id === item.offerId.category.id;\n        });\n        if (!found) arr.push(item.offerId.category);\n      });\n      setListCategories(arr);\n      setLoading(false);\n    })[\"catch\"](function (e) {\n      setLoading(false);\n    });\n  };\n\n  var getCountCategories = function getCountCategories(id) {\n    var count = 0;\n\n    for (var i = 0; i < list.length; ++i) {\n      if (list[i].offerId.category.id == id) count++;\n    }\n\n    return count;\n  };\n\n  var offers = list.filter(function (item) {\n    return item.offerId.category.id === filterCategory.id;\n  });\n  return __jsx(React.Fragment, null, __jsx(Header, {\n    isProfile: true\n  }), __jsx(Wrapper, {\n    p: 15\n  }, __jsx(Text, {\n    fz: 28,\n    mb: 25\n  }, \"Wishlist\"), loading && __jsx(\"div\", null, \"Loading... \"), filterCategory && filterCategory.id ? __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: 'wish-item-category',\n    onClick: function onClick() {\n      return setFilterCategory({});\n    }\n  }, __jsx(\"img\", {\n    className: 'back-wish-list',\n    src: arrowLeft\n  }), filterCategory.category), __jsx(\"div\", {\n    className: \"row\"\n  }, offers.map(function (item, key) {\n    return __jsx(\"div\", {\n      key: key,\n      className: \"col-xs-6\"\n    }, __jsx(OfferCardItem, {\n      offer: item.offerId\n    }));\n  }))) : __jsx(React.Fragment, null, listCategories.map(function (item) {\n    return __jsx(Text, {\n      fz: 18,\n      mb: 10,\n      onClick: function onClick() {\n        return setFilterCategory(item);\n      }\n    }, item.category, __jsx(\"span\", {\n      className: 'wish-category-count'\n    }, getCountCategories(item.id)));\n  }))));\n};\n\nexport default ProfileOffers;","map":{"version":3,"sources":["D:/4/диплом/webapp/pages/profile/wish-list.js"],"names":["React","useState","useContext","useEffect","Router","Footer","Label2","Title","Wrapper","WrapperHeight","Button","ButtonMin","Header","Text","FlexBlock","apiEditOffer","apiGetListUserOffers","apiGetListUserOffersLiked","MainContext","OfferCardItemBig","showNotification","PlusPurple","Preferences","OfferCardItem","arrowLeft","ProfileOffers","me","listOffers","list","setList","listCategories","setListCategories","filterCategory","setFilterCategory","loading","setLoading","isPublishing","setIsPublishing","id","getListOffers","then","res","data","arr","map","item","found","find","item2","console","log","offerId","category","push","e","getCountCategories","count","i","length","offers","filter","key"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SACIC,MADJ,EACYC,MADZ,EACoBC,KADpB,QAEO,wCAFP;AAGA,SAAQC,OAAR,EAAiBC,aAAjB,QAAqC,2CAArC;AACA,SAAQC,MAAR,EAAgBC,SAAhB,QAAgC,yCAAhC;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,SAAQC,IAAR,QAAmB,wCAAnB;AACA,SAAQC,SAAR,QAAwB,6CAAxB;AACA,SAAQC,YAAR,EAAsBC,oBAAtB,EAA4CC,yBAA5C,QAA4E,mBAA5E;AACA,SAAQC,WAAR,QAA0B,+CAA1B;AACA,OAAOC,gBAAP,MAA6B,+CAA7B;AACA,SAAQC,gBAAR,QAA+B,0BAA/B;AACA,SAAQC,UAAR,EAAoBC,WAApB,QAAsC,wCAAtC;AACA,OAAOC,aAAP,MAA0B,4CAA1B;AACA,OAAOC,SAAP,MAAsB,iCAAtB;AAEA,OAAO,6BAAP;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAAA,oBACCvB,UAAU,CAACgB,WAAD,CADX;AAAA,MACjBQ,EADiB,eACjBA,EADiB;AAAA,MACbC,UADa,eACbA,UADa;;AAAA,kBAEA1B,QAAQ,CAAC0B,UAAD,CAFR;AAAA,MAEjBC,IAFiB;AAAA,MAEXC,OAFW;;AAAA,mBAGoB5B,QAAQ,CAAC,EAAD,CAH5B;AAAA,MAGjB6B,cAHiB;AAAA,MAGDC,iBAHC;;AAAA,mBAIoB9B,QAAQ,CAAC,EAAD,CAJ5B;AAAA,MAIjB+B,cAJiB;AAAA,MAIDC,iBAJC;;AAAA,mBAKMhC,QAAQ,CAAC,IAAD,CALd;AAAA,MAKjBiC,OALiB;AAAA,MAKRC,UALQ;;AAAA,mBAMgBlC,QAAQ,CAAC,KAAD,CANxB;AAAA,MAMjBmC,YANiB;AAAA,MAMHC,eANG;;AAQxBlC,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAGuB,EAAE,CAACY,EAAN,EAAUC,aAAa;AAC1B,GAFQ,EAEN,CAACb,EAAE,CAACY,EAAJ,CAFM,CAAT;;AAIA,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACxBJ,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAlB,IAAAA,yBAAyB,CAACS,EAAE,CAACY,EAAJ,CAAzB,CACKE,IADL,CACU,UAAAC,GAAG,EAAI;AACTZ,MAAAA,OAAO,CAACY,GAAG,CAACC,IAAL,CAAP;AACA,UAAIC,GAAG,GAAG,EAAV;AACAF,MAAAA,GAAG,CAACC,IAAJ,CAASE,GAAT,CAAa,UAAAC,IAAI,EAAI;AACjB,YAAIC,KAAK,GAAGH,GAAG,CAACI,IAAJ,CAAS,UAAAC,KAAK,EAAK;AAC3BC,UAAAA,OAAO,CAACC,GAAR,CAAYL,IAAI,CAACM,OAAL,CAAaC,QAAb,CAAsBd,EAAlC;AACAW,UAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACV,EAAlB;AACA,iBAAOU,KAAK,CAACV,EAAN,KAAaO,IAAI,CAACM,OAAL,CAAaC,QAAb,CAAsBd,EAA1C;AACH,SAJW,CAAZ;AAKA,YAAG,CAACQ,KAAJ,EAAWH,GAAG,CAACU,IAAJ,CAASR,IAAI,CAACM,OAAL,CAAaC,QAAtB;AACd,OAPD;AAQArB,MAAAA,iBAAiB,CAACY,GAAD,CAAjB;AACAR,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KAdL,WAeW,UAAAmB,CAAC,EAAI;AACRnB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KAjBL;AAkBH,GApBD;;AAsBA,MAAMoB,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAjB,EAAE,EAAI;AAC7B,QAAIkB,KAAK,GAAG,CAAZ;;AACA,SAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG7B,IAAI,CAAC8B,MAAxB,EAAgC,EAAED,CAAlC,EAAoC;AAChC,UAAG7B,IAAI,CAAC6B,CAAD,CAAJ,CAAQN,OAAR,CAAgBC,QAAhB,CAAyBd,EAAzB,IAA+BA,EAAlC,EACIkB,KAAK;AACZ;;AACD,WAAOA,KAAP;AACH,GAPD;;AAUA,MAAMG,MAAM,GAAG/B,IAAI,CAACgC,MAAL,CAAY,UAAAf,IAAI;AAAA,WAAIA,IAAI,CAACM,OAAL,CAAaC,QAAb,CAAsBd,EAAtB,KAA8BN,cAAc,CAACM,EAAjD;AAAA,GAAhB,CAAf;AAIA,SACI,4BACI,MAAC,MAAD;AAAQ,IAAA,SAAS;AAAjB,IADJ,EAEI,MAAC,OAAD;AAAS,IAAA,CAAC,EAAE;AAAZ,KACI,MAAC,IAAD;AAAM,IAAA,EAAE,EAAE,EAAV;AAAc,IAAA,EAAE,EAAE;AAAlB,gBADJ,EAIKJ,OAAO,IAAI,iCAJhB,EAMKF,cAAc,IAAIA,cAAc,CAACM,EAAjC,GACG,4BACI;AAAK,IAAA,SAAS,EAAE,oBAAhB;AAAsC,IAAA,OAAO,EAAE;AAAA,aAAML,iBAAiB,CAAC,EAAD,CAAvB;AAAA;AAA/C,KACI;AAAK,IAAA,SAAS,EAAE,gBAAhB;AAAkC,IAAA,GAAG,EAAET;AAAvC,IADJ,EAEKQ,cAAc,CAACoB,QAFpB,CADJ,EAKI;AAAK,IAAA,SAAS,EAAC;AAAf,KACKO,MAAM,CAACf,GAAP,CAAW,UAACC,IAAD,EAAOgB,GAAP,EAAe;AACvB,WACI;AAAK,MAAA,GAAG,EAAEA,GAAV;AAAe,MAAA,SAAS,EAAC;AAAzB,OACI,MAAC,aAAD;AAAe,MAAA,KAAK,EAAEhB,IAAI,CAACM;AAA3B,MADJ,CADJ;AAKH,GANA,CADL,CALJ,CADH,GAiBG,4BACKrB,cAAc,CAACc,GAAf,CAAmB,UAAAC,IAAI;AAAA,WACpB,MAAC,IAAD;AAAM,MAAA,EAAE,EAAE,EAAV;AAAc,MAAA,EAAE,EAAE,EAAlB;AAAsB,MAAA,OAAO,EAAE;AAAA,eAAMZ,iBAAiB,CAACY,IAAD,CAAvB;AAAA;AAA/B,OACKA,IAAI,CAACO,QADV,EAEI;AAAM,MAAA,SAAS,EAAE;AAAjB,OAAyCG,kBAAkB,CAACV,IAAI,CAACP,EAAN,CAA3D,CAFJ,CADoB;AAAA,GAAvB,CADL,CAvBR,CAFJ,CADJ;AA0CH,CA1FD;;AA4FA,eAAeb,aAAf","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport Router from 'next/router'\r\nimport {\r\n    Footer, Label2, Title,\r\n} from \"../../components/Layouts/styledLayouts\";\r\nimport {Wrapper, WrapperHeight} from \"../../components/StyledComponents/Wrapper\";\r\nimport {Button, ButtonMin} from \"../../components/controls/Button/Button\";\r\nimport Header from \"../../components/Header/Header\"\r\nimport {Text} from \"../../components/StyledComponents/Text\";\r\nimport {FlexBlock} from \"../../components/StyledComponents/FlexBlock\";\r\nimport {apiEditOffer, apiGetListUserOffers, apiGetListUserOffersLiked} from '../../actions/api'\r\nimport {MainContext} from \"../../components/contextProviders/MainContext\";\r\nimport OfferCardItemBig from \"../../components/Offer/cards/OfferCardItemBig\"\r\nimport {showNotification} from \"../../utils/notification\";\r\nimport {PlusPurple, Preferences} from \"../../components/StyledComponents/Icon\";\r\nimport OfferCardItem from \"../../components/Offer/cards/OfferCardItem\";\r\nimport arrowLeft from \"../../static/img/arrow-left.svg\"\r\n\r\nimport \"../../static/css/styles.css\"\r\n\r\nconst ProfileOffers = () => {\r\n    const {me, listOffers} = useContext(MainContext)\r\n    const [list, setList] = useState(listOffers)\r\n    const [listCategories, setListCategories] = useState([])\r\n    const [filterCategory, setFilterCategory] = useState({})\r\n    const [loading, setLoading] = useState(true)\r\n    const [isPublishing, setIsPublishing] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if(me.id) getListOffers()\r\n    }, [me.id])\r\n\r\n    const getListOffers = () => {\r\n        setLoading(true)\r\n        apiGetListUserOffersLiked(me.id)\r\n            .then(res => {\r\n                setList(res.data)\r\n                let arr = []\r\n                res.data.map(item => {\r\n                    let found = arr.find(item2 =>  {\r\n                        console.log(item.offerId.category.id)\r\n                        console.log(item2.id)\r\n                        return item2.id === item.offerId.category.id\r\n                    })\r\n                    if(!found) arr.push(item.offerId.category)\r\n                })\r\n                setListCategories(arr)\r\n                setLoading(false)\r\n            })\r\n            .catch(e => {\r\n                setLoading(false)\r\n            })\r\n    }\r\n\r\n    const getCountCategories = id => {\r\n        let count = 0;\r\n        for(let i = 0; i < list.length; ++i){\r\n            if(list[i].offerId.category.id == id)\r\n                count++;\r\n        }\r\n        return count;\r\n    }\r\n\r\n\r\n    const offers = list.filter(item => item.offerId.category.id === (filterCategory.id))\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <Header isProfile />\r\n            <Wrapper p={15} >\r\n                <Text fz={28} mb={25}>Wishlist</Text>\r\n\r\n\r\n                {loading && <div>Loading... </div>}\r\n\r\n                {filterCategory && filterCategory.id ?\r\n                    <>\r\n                        <div className={'wish-item-category'} onClick={() => setFilterCategory({})}>\r\n                            <img className={'back-wish-list'} src={arrowLeft}></img>\r\n                            {filterCategory.category}\r\n                        </div>\r\n                        <div className=\"row\">\r\n                            {offers.map((item, key) => {\r\n                                return (\r\n                                    <div key={key} className=\"col-xs-6\">\r\n                                        <OfferCardItem offer={item.offerId} />\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    </>\r\n                    :\r\n                    <>\r\n                        {listCategories.map(item =>\r\n                            <Text fz={18} mb={10} onClick={() => setFilterCategory(item)}>\r\n                                {item.category}\r\n                                <span className={'wish-category-count'}>{getCountCategories(item.id)}</span>\r\n                            </Text>\r\n                        )}\r\n                    </>\r\n\r\n                }\r\n\r\n\r\n            </Wrapper>\r\n\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ProfileOffers\r\n\r\n"]},"metadata":{},"sourceType":"module"}