{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nimport _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar __jsx = React.createElement;\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  margin-top: 20px;\\n  @media \", \" {\\n    display: none;\\n  }\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  @media \", \" {\\n    display: flex;\\n    justify-content: space-between;\\n    margin-top: 10px;\\n\\n    \", \" {\\n      width: 60%;\\n      order: 1;\\n\\n      \", \" {\\n        display: none;\\n      }\\n    }\\n\\n    \", \" {\\n      width: 35%;\\n      order: 2;\\n\\n      img {\\n        height: auto;\\n        max-height: 50vh;\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport styled, { css } from 'styled-components';\nimport { device } from '../../../lib/mediaDevice';\nimport { Text } from '../../../components/StyledComponents/Text';\nimport { Wrapper } from '../../../components/StyledComponents/Wrapper';\nimport Header from '../../../components/Header/Header';\nimport { EditRow } from '../../../components/ListingOffers/UnlistedOffers';\nimport { WrapperHeader, ImgEditMain, NameOffer, StatusOffer, WrapFooterBtns } from '../../../components/Offer/edit/styledEditOffer';\nimport { ArrowLeft } from '../../../components/StyledComponents/Icon';\nimport Main from '../../../components/Offer/edit/Main';\nimport Photos from '../../../components/Offer/edit/Photos';\nimport Videos from '../../../components/Offer/edit/Videos';\nimport Performance from '../../../components/Offer/edit/Performance';\nimport Calendar from '../../../components/Offer/edit/Calendar';\nimport Price from '../../../components/Offer/edit/Price';\nimport { apiEditOffer, apiGetEventTypes, apiGetOfferById, apiGetProgrammerCategories, apiOfferPhotos, apiSetOfferCoverPhoto, apiAddPerformanceDetails, apiOfferUpdateDisabled, apiOfferCreatePrice, apiCreateOfferParams, apiDeleteOffer } from '../../../actions/api';\nimport { showNotification } from '../../../utils/notification';\nimport { modifySrc } from '../../../utils/modifySrc';\nimport { Divider } from '../../../components/StyledComponents/Divider';\nimport { Button, ButtonMinHeight } from '../../../components/controls/Button/Button';\nimport { ContainerDesktop } from '../../../components/StyledComponents/Grid';\n\nvar Edit = function Edit() {\n  var router = useRouter();\n  var id = router.query.id;\n\n  var _useState = useState(0),\n      step = _useState[0],\n      setStep = _useState[1];\n\n  var _useState2 = useState({}),\n      offer = _useState2[0],\n      setOffer = _useState2[1];\n\n  var _useState3 = useState({}),\n      activePhoto = _useState3[0],\n      setActivePhoto = _useState3[1];\n\n  var _useState4 = useState([]),\n      listEventTypes = _useState4[0],\n      setListEventTypes = _useState4[1];\n\n  var _useState5 = useState([]),\n      listCategories = _useState5[0],\n      setListCategories = _useState5[1];\n\n  var _useState6 = useState([]),\n      photos = _useState6[0],\n      setPhotos = _useState6[1];\n\n  var _useState7 = useState([]),\n      videos = _useState7[0],\n      setVideos = _useState7[1];\n\n  var _useState8 = useState(true),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var _useState9 = useState(false),\n      isLoading = _useState9[0],\n      setIsLoading = _useState9[1];\n\n  var _useState10 = useState(false),\n      isCloning = _useState10[0],\n      setIsCloning = _useState10[1];\n\n  var _useState11 = useState(false),\n      isPublishing = _useState11[0],\n      setIsPublishing = _useState11[1];\n\n  var _useState12 = useState(false),\n      loadingDelete = _useState12[0],\n      setLoadingDelete = _useState12[1];\n\n  useEffect(function () {\n    window.scrollTo(0, 0);\n  }, [step]);\n  useEffect(function () {\n    if (id) {\n      apiGetOfferById(id).then(function (res) {\n        res.data.country = res.data.country.split(', ');\n        var arr = [];\n        var country = res.data.country.map(function (item) {\n          return {\n            label: item,\n            value: item\n          };\n        });\n        res.data.country = country;\n        setOffer(res.data);\n        setLoading(false);\n      })[\"catch\"](function (e) {\n        setLoading(false);\n        showNotification('error', 'Error while loading offer');\n      });\n    }\n  }, [id]);\n  useEffect(function () {\n    var getListEventTypes = function getListEventTypes() {\n      var res;\n      return _regeneratorRuntime.async(function getListEventTypes$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(apiGetEventTypes());\n\n            case 2:\n              res = _context.sent;\n              setListEventTypes(res.data);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    var getCategories = function getCategories() {\n      var res;\n      return _regeneratorRuntime.async(function getCategories$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(apiGetProgrammerCategories());\n\n            case 2:\n              res = _context2.sent;\n              setListCategories(res.data);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      });\n    };\n\n    getCategories();\n    getListEventTypes();\n  }, []);\n\n  var onChange = function onChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value,\n        required = _e$target.required;\n\n    if (name == 'summary' || name == 'description' || name == 'descriptionWillDone' || name == 'descriptionWillProvide' || name == 'descriptionRequirements' || name == 'descriptionNote') {\n      value = value.slice(0, 500);\n    }\n\n    setOffer(function (offer) {\n      return _objectSpread({}, offer, _defineProperty({}, name, value));\n    });\n  };\n\n  var onChangeParams = function onChangeParams(obj) {\n    console.log(obj); // let {name, value, required} = obj\n    // setEvent(event => ({...event, [name]: value}))\n  };\n\n  var onChangeVideos = function onChangeVideos(key, value) {\n    var clone = _toConsumableArray(offer.videoUrl);\n\n    clone[key] = value;\n    setOffer(_objectSpread({}, offer, {\n      videoUrl: clone\n    }));\n  };\n\n  var handleAddInput = function handleAddInput(obj) {\n    var clone = _toConsumableArray(offer.videoUrl);\n\n    if (clone[clone.length - 1] || !clone.length) {\n      clone.push('');\n    }\n\n    setOffer(_objectSpread({}, offer, {\n      videoUrl: clone\n    }));\n  };\n\n  var onSaveMain = function onSaveMain(e) {\n    var clone, obj, res;\n    return _regeneratorRuntime.async(function onSaveMain$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            clone = _Object$assign({}, offer);\n            obj = {\n              name: clone.name,\n              summary: clone.summary,\n              description: clone.description,\n              descriptionWillDone: clone.descriptionWillDone,\n              descriptionWillProvide: clone.descriptionWillProvide,\n              descriptionRequirements: clone.descriptionRequirements,\n              descriptionNote: clone.descriptionNote,\n              category: clone.category.id,\n              subCategory: clone.subCategory && clone.subCategory.id ? clone.subCategory.id : '',\n              country: clone.country && _Array$isArray(clone.country) ? clone.country.map(function (item) {\n                return item.value;\n              }).join(', ') : clone.country,\n              type: clone.type\n            };\n            setIsLoading(true);\n            _context3.next = 5;\n            return _regeneratorRuntime.awrap(apiEditOffer(id, obj));\n\n          case 5:\n            res = _context3.sent;\n            console.log(res);\n\n            if (!res.err) {\n              showNotification('info', 'Offer was edited successfully');\n              setStep(0);\n            } else {\n              setIsLoading(false);\n              debugger;\n              showNotification('error', res.err);\n            }\n\n            setIsLoading(false);\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  };\n\n  var onSaveParams = function onSaveParams(params) {\n    var clone, arr;\n    return _regeneratorRuntime.async(function onSaveParams$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            clone = _toConsumableArray(params);\n            arr = [];\n            clone.map(function (item, key) {\n              arr.push({\n                templateId: item.id,\n                value: item.value\n              });\n            });\n            setIsLoading(true);\n            apiCreateOfferParams(id, arr).then(function (res) {\n              setIsLoading(false);\n              showNotification('info', 'Offer was edited successfully');\n              setOffer(_objectSpread({}, offer, {\n                categoryOptions: res.data.categoryOptions\n              }));\n              setStep(0);\n            })[\"catch\"](function (err) {\n              setIsLoading(false);\n              showNotification('error', err);\n            });\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    });\n  };\n\n  var onSavePhotos = function onSavePhotos(e) {\n    return _regeneratorRuntime.async(function onSavePhotos$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            showNotification('info', 'Photos was updated successfully');\n            setStep(0);\n\n          case 2:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    });\n  };\n\n  var onSaveVideos = function onSaveVideos(e) {\n    var filterV, res;\n    return _regeneratorRuntime.async(function onSaveVideos$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            filterV = offer.videoUrl.filter(function (item) {\n              return !!item;\n            });\n            setIsLoading(true);\n            _context6.next = 4;\n            return _regeneratorRuntime.awrap(apiEditOffer(id, {\n              videoUrl: filterV\n            }));\n\n          case 4:\n            res = _context6.sent;\n            setIsLoading(true);\n            showNotification('info', 'Videos was updated successfully');\n            setStep(0);\n\n          case 8:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    });\n  };\n\n  var sendPhotos = function sendPhotos() {\n    var data, res;\n    return _regeneratorRuntime.async(function sendPhotos$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            if (!photos.length) {\n              _context7.next = 11;\n              break;\n            }\n\n            data = new FormData();\n            data.append('offerId', offer.id);\n            photos.forEach(function (file) {\n              return data.append('file', file, file.name);\n            });\n            setIsLoading(true);\n            _context7.next = 7;\n            return _regeneratorRuntime.awrap(apiOfferPhotos(data));\n\n          case 7:\n            res = _context7.sent;\n            return _context7.abrupt(\"return\", res.data);\n\n          case 11:\n            return _context7.abrupt(\"return\", null);\n\n          case 12:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    });\n  };\n\n  var sendCover = function sendCover() {\n    var res;\n    return _regeneratorRuntime.async(function sendCover$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            if (!activePhoto.id) {\n              _context8.next = 7;\n              break;\n            }\n\n            _context8.next = 3;\n            return _regeneratorRuntime.awrap(apiSetOfferCoverPhoto(id, {\n              offerPhotoId: activePhoto.id\n            }));\n\n          case 3:\n            res = _context8.sent;\n            return _context8.abrupt(\"return\", res.data);\n\n          case 7:\n            return _context8.abrupt(\"return\", null);\n\n          case 8:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    });\n  };\n\n  var onSavePerfomance = function onSavePerfomance() {\n    var clone, obj, res;\n    return _regeneratorRuntime.async(function onSavePerfomance$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            clone = _Object$assign({}, offer);\n            obj = {\n              offerId: offer.id,\n              maxNumberOfActs: clone.maxNumberOfActs,\n              minNumberOfActs: clone.minNumberOfActs,\n              daysBeforeBooking: clone.daysBeforeBooking,\n              timeOpenCalendar: clone.timeOpenCalendar,\n              endDate: getEndDay(clone.startDate)\n            };\n            setIsLoading(true);\n            _context9.next = 5;\n            return _regeneratorRuntime.awrap(apiAddPerformanceDetails(obj));\n\n          case 5:\n            res = _context9.sent;\n\n            if (!res.err) {\n              showNotification('info', 'Offer was edited successfully');\n              setStep(0);\n              console.log(offer);\n              debugger;\n              setOffer(_objectSpread({}, offer, {\n                maxNumberOfActs: res.data.maxNumberOfActs,\n                minNumberOfActs: res.data.minNumberOfActs,\n                daysBeforeBooking: res.data.daysBeforeBooking,\n                timeOpenCalendar: res.data.timeOpenCalendar,\n                endDate: res.data.endDate\n              }));\n            } else {\n              showNotification('error', res.err);\n            }\n\n            setIsLoading(false);\n\n          case 8:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    });\n  };\n\n  var onSaveCalendar = function onSaveCalendar(selectedDays) {\n    var obj, res;\n    return _regeneratorRuntime.async(function onSaveCalendar$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            setIsLoading(true);\n            obj = {\n              offerId: offer.id,\n              disabledTimes: selectedDays\n            };\n            setIsLoading(true);\n            _context10.next = 5;\n            return _regeneratorRuntime.awrap(apiOfferUpdateDisabled(obj));\n\n          case 5:\n            res = _context10.sent;\n\n            if (!res.err) {\n              setOffer(_objectSpread({}, offer, {\n                calendar: res.data\n              }));\n              showNotification('info', 'Offer was edited successfully');\n              setStep(0);\n            } else {\n              showNotification('error', res.err);\n            }\n\n            setIsLoading(false);\n\n          case 8:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    });\n  };\n\n  var onSavePrice = function onSavePrice(event) {\n    var clone, obj, res;\n    return _regeneratorRuntime.async(function onSavePrice$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            setIsLoading(true);\n            clone = _objectSpread({}, offer);\n            obj = {\n              offerId: clone.id,\n              typePrice: clone.typePrice,\n              pricePerAct: clone.pricePerAct,\n              currency: clone.currency,\n              kickstart: clone.kickstart\n            };\n            _context11.next = 5;\n            return _regeneratorRuntime.awrap(apiOfferCreatePrice(obj));\n\n          case 5:\n            res = _context11.sent;\n\n            if (!res.err) {\n              showNotification('info', 'Offer was edited successfully');\n              setOffer(_objectSpread({}, offer, {\n                typePrice: res.data.typePrice,\n                pricePerAct: res.data.pricePerAct,\n                currency: res.data.currency,\n                kickstart: res.data.kickstart\n              }));\n              setIsLoading(false);\n              setStep(0);\n            } else {\n              showNotification('error', res.err);\n            }\n\n            setIsLoading(false);\n\n          case 8:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    });\n  };\n\n  var getEndDay = function getEndDay(startDate) {\n    var timeOpenCalendar = offer.timeOpenCalendar;\n    debugger;\n    var copiedDate = new Date(startDate);\n    var lastDate;\n\n    switch (timeOpenCalendar) {\n      case '1 month':\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 1));\n        break;\n\n      case '2 month':\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 2));\n        break;\n\n      case '6 month':\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 6));\n        break;\n\n      case '1 year':\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 12));\n        break;\n    }\n\n    return lastDate;\n  };\n\n  var handleChangeStep = function handleChangeStep() {\n    step ? setStep(0) : Router.push('/offers/[id]', \"/offers/\".concat(id), {\n      shallow: true\n    });\n  };\n\n  var handlePublishOffer = function handlePublishOffer() {\n    var data = {\n      status: 'open'\n    };\n    setIsPublishing(true);\n    apiEditOffer(id, data).then(function (res) {\n      setOffer(_objectSpread({}, offer, {\n        status: res.data.status\n      }));\n      showNotification('info', 'Offer was published successfully');\n      window.scrollTo(0, 0);\n      setIsPublishing(false);\n    })[\"catch\"](function (e) {\n      showNotification('error', e);\n      setIsPublishing(false);\n    });\n  };\n\n  var handleDeleteOffer = function handleDeleteOffer() {\n    if (window.confirm('Are you sure you want to delete this offer?')) {\n      setLoadingDelete(true);\n      apiDeleteOffer(id).then(function (res) {\n        setLoadingDelete(false);\n        Router.push('/profile/offers', \"/profile/offers\", {\n          shallow: true\n        });\n      })[\"catch\"](function (e) {\n        showNotification('error', e);\n        setLoadingDelete(false);\n      });\n    }\n  };\n\n  return __jsx(React.Fragment, null, !step && __jsx(Header, {\n    isProfile: !step,\n    previewOfferCb: handleChangeStep\n  }), __jsx(ContainerDesktop, null, loading ? __jsx(React.Fragment, null, \"Loading...\") : __jsx(React.Fragment, null, __jsx(Flex, null, step ? __jsx(WrapperHeader, {\n    onClick: function onClick() {\n      return handleChangeStep();\n    }\n  }, __jsx(ArrowLeft, {\n    mr: 15\n  }), __jsx(Text, {\n    fz: 18\n  }, !!step ? offer.name : 'Back to offer')) : __jsx(FlexRight, null, __jsx(ImgEditMain, {\n    src: modifySrc(offer.avatarUrl, 'offer')\n  }), __jsx(NameOffer, null, offer.name), __jsx(StatusOffer, null, offer.status), __jsx(Divider, {\n    mt: 40,\n    grey: true\n  }), __jsx(WrapFooterBtns2, null, offer.status !== 'open' && __jsx(Button, {\n    transparentBlue: true,\n    onClick: handlePublishOffer,\n    loading: isPublishing\n  }, \"Publish offer\"), __jsx(Button, {\n    red: true,\n    mt: 15,\n    onClick: handleDeleteOffer,\n    loading: loadingDelete\n  }, \"Delete offer\"))), step ? __jsx(Wrapper, {\n    pl: 18,\n    pr: 18,\n    mt: 15,\n    pb: 70\n  }, step === 1 && __jsx(Main, {\n    offer: offer,\n    onChange: onChange,\n    listCategories: listCategories,\n    listEventTypes: listEventTypes,\n    isLoading: isLoading,\n    onSave: onSaveMain\n  }), step === 2 && __jsx(Photos, {\n    offer: offer,\n    isLoading: isLoading,\n    setOffer: setOffer,\n    onSave: onSavePhotos\n  }), step === 3 && __jsx(Videos, {\n    videos: offer.videoUrl,\n    onChange: onChangeVideos,\n    isLoading: isLoading,\n    handleAddInput: handleAddInput,\n    onSave: onSaveVideos\n  }), step === 4 && __jsx(Performance, {\n    offer: offer,\n    onChange: onChange,\n    isLoading: isLoading,\n    onSave: onSavePerfomance\n  }), step === 5 && __jsx(Calendar, {\n    offer: offer,\n    onChange: onChange,\n    isLoading: isLoading,\n    onSave: onSaveCalendar\n  }), step === 6 && __jsx(Price, {\n    offer: offer,\n    onChange: onChange,\n    isLoading: isLoading,\n    onSave: onSavePrice\n  })) : __jsx(FlexLeft, null, __jsx(EditRow, {\n    title: \"Main\",\n    onClick: function onClick() {\n      return setStep(1);\n    }\n  }), __jsx(EditRow, {\n    title: \"Photos\",\n    onClick: function onClick() {\n      return setStep(2);\n    }\n  }), __jsx(EditRow, {\n    title: \"Videos\",\n    onClick: function onClick() {\n      return setStep(3);\n    }\n  }), __jsx(EditRow, {\n    title: \"Details\",\n    onClick: function onClick() {\n      return setStep(4);\n    }\n  }), __jsx(EditRow, {\n    title: \"Calendar\",\n    desc: \"Calendar preferences\",\n    onClick: function onClick() {\n      return setStep(5);\n    }\n  }), __jsx(EditRow, {\n    title: \"Price\",\n    onClick: function onClick() {\n      return setStep(6);\n    }\n  }), __jsx(WrapFooterBtns, null, offer.status !== 'open' && __jsx(Button, {\n    transparentBlue: true,\n    onClick: handlePublishOffer,\n    loading: isPublishing\n  }, \"Publish offer\"), __jsx(Button, {\n    red: true,\n    mt: 15,\n    onClick: handleDeleteOffer,\n    loading: loadingDelete\n  }, \"Delete offer\")))))));\n};\n\nvar FlexLeft = styled.div(_templateObject());\nvar FlexRight = styled.div(_templateObject2());\nvar Flex = styled.div(_templateObject3(), device.laptopDesktop, FlexLeft, WrapFooterBtns, FlexRight);\nvar WrapFooterBtns2 = styled.div(_templateObject4(), device.mobile);\nexport default Edit;","map":{"version":3,"sources":["D:/4/диплом/webapp — копия/pages/offers/[id]/edit.js"],"names":["React","useEffect","useMemo","useState","Router","useRouter","styled","css","device","Text","Wrapper","Header","EditRow","WrapperHeader","ImgEditMain","NameOffer","StatusOffer","WrapFooterBtns","ArrowLeft","Main","Photos","Videos","Performance","Calendar","Price","apiEditOffer","apiGetEventTypes","apiGetOfferById","apiGetProgrammerCategories","apiOfferPhotos","apiSetOfferCoverPhoto","apiAddPerformanceDetails","apiOfferUpdateDisabled","apiOfferCreatePrice","apiCreateOfferParams","apiDeleteOffer","showNotification","modifySrc","Divider","Button","ButtonMinHeight","ContainerDesktop","Edit","router","id","query","step","setStep","offer","setOffer","activePhoto","setActivePhoto","listEventTypes","setListEventTypes","listCategories","setListCategories","photos","setPhotos","videos","setVideos","loading","setLoading","isLoading","setIsLoading","isCloning","setIsCloning","isPublishing","setIsPublishing","loadingDelete","setLoadingDelete","window","scrollTo","then","res","data","country","split","arr","map","item","label","value","e","getListEventTypes","getCategories","onChange","target","name","required","slice","onChangeParams","obj","console","log","onChangeVideos","key","clone","videoUrl","handleAddInput","length","push","onSaveMain","summary","description","descriptionWillDone","descriptionWillProvide","descriptionRequirements","descriptionNote","category","subCategory","join","type","err","onSaveParams","params","templateId","categoryOptions","onSavePhotos","onSaveVideos","filterV","filter","sendPhotos","FormData","append","forEach","file","sendCover","offerPhotoId","onSavePerfomance","offerId","maxNumberOfActs","minNumberOfActs","daysBeforeBooking","timeOpenCalendar","endDate","getEndDay","startDate","onSaveCalendar","selectedDays","disabledTimes","calendar","onSavePrice","event","typePrice","pricePerAct","currency","kickstart","copiedDate","Date","lastDate","setMonth","getMonth","handleChangeStep","shallow","handlePublishOffer","status","handleDeleteOffer","confirm","avatarUrl","FlexLeft","div","FlexRight","Flex","laptopDesktop","WrapFooterBtns2","mobile"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useState } from 'react'\r\nimport Router, { useRouter } from 'next/router'\r\nimport styled, { css } from 'styled-components'\r\nimport { device } from '../../../lib/mediaDevice'\r\nimport { Text } from '../../../components/StyledComponents/Text'\r\nimport { Wrapper } from '../../../components/StyledComponents/Wrapper'\r\nimport Header from '../../../components/Header/Header'\r\nimport { EditRow } from '../../../components/ListingOffers/UnlistedOffers'\r\nimport {\r\n  WrapperHeader,\r\n  ImgEditMain,\r\n  NameOffer,\r\n  StatusOffer,\r\n  WrapFooterBtns,\r\n} from '../../../components/Offer/edit/styledEditOffer'\r\nimport { ArrowLeft } from '../../../components/StyledComponents/Icon'\r\nimport Main from '../../../components/Offer/edit/Main'\r\nimport Photos from '../../../components/Offer/edit/Photos'\r\nimport Videos from '../../../components/Offer/edit/Videos'\r\nimport Performance from '../../../components/Offer/edit/Performance'\r\nimport Calendar from '../../../components/Offer/edit/Calendar'\r\nimport Price from '../../../components/Offer/edit/Price'\r\nimport {\r\n  apiEditOffer,\r\n  apiGetEventTypes,\r\n  apiGetOfferById,\r\n  apiGetProgrammerCategories,\r\n  apiOfferPhotos,\r\n  apiSetOfferCoverPhoto,\r\n  apiAddPerformanceDetails,\r\n  apiOfferUpdateDisabled,\r\n  apiOfferCreatePrice,\r\n  apiCreateOfferParams,\r\n  apiDeleteOffer,\r\n} from '../../../actions/api'\r\nimport { showNotification } from '../../../utils/notification'\r\nimport { modifySrc } from '../../../utils/modifySrc'\r\nimport { Divider } from '../../../components/StyledComponents/Divider'\r\nimport { Button, ButtonMinHeight } from '../../../components/controls/Button/Button'\r\nimport { ContainerDesktop } from '../../../components/StyledComponents/Grid'\r\n\r\nconst Edit = () => {\r\n  const router = useRouter()\r\n  const { id } = router.query\r\n  const [step, setStep] = useState(0)\r\n  const [offer, setOffer] = useState({})\r\n  const [activePhoto, setActivePhoto] = useState({})\r\n  const [listEventTypes, setListEventTypes] = useState([])\r\n  const [listCategories, setListCategories] = useState([])\r\n  const [photos, setPhotos] = useState([])\r\n  const [videos, setVideos] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [isCloning, setIsCloning] = useState(false)\r\n  const [isPublishing, setIsPublishing] = useState(false)\r\n  const [loadingDelete, setLoadingDelete] = useState(false)\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [step])\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      apiGetOfferById(id)\r\n        .then((res) => {\r\n          res.data.country = res.data.country.split(', ')\r\n          let arr = []\r\n          let country = res.data.country.map((item) => {\r\n            return { label: item, value: item }\r\n          })\r\n          res.data.country = country\r\n          setOffer(res.data)\r\n          setLoading(false)\r\n        })\r\n        .catch((e) => {\r\n          setLoading(false)\r\n          showNotification('error', 'Error while loading offer')\r\n        })\r\n    }\r\n  }, [id])\r\n  useEffect(() => {\r\n    let getListEventTypes = async () => {\r\n      const res = await apiGetEventTypes()\r\n      setListEventTypes(res.data)\r\n    }\r\n    const getCategories = async () => {\r\n      const res = await apiGetProgrammerCategories()\r\n      setListCategories(res.data)\r\n    }\r\n    getCategories()\r\n    getListEventTypes()\r\n  }, [])\r\n  const onChange = (e) => {\r\n    let { name, value, required } = e.target\r\n    if (\r\n      name == 'summary' ||\r\n      name == 'description' ||\r\n      name == 'descriptionWillDone' ||\r\n      name == 'descriptionWillProvide' ||\r\n      name == 'descriptionRequirements' ||\r\n      name == 'descriptionNote'\r\n    ) {\r\n      value = value.slice(0, 500)\r\n    }\r\n    setOffer((offer) => ({ ...offer, [name]: value }))\r\n  }\r\n  const onChangeParams = (obj) => {\r\n    console.log(obj)\r\n    // let {name, value, required} = obj\r\n    // setEvent(event => ({...event, [name]: value}))\r\n  }\r\n  const onChangeVideos = (key, value) => {\r\n    let clone = [...offer.videoUrl]\r\n    clone[key] = value\r\n    setOffer({ ...offer, videoUrl: clone })\r\n  }\r\n  const handleAddInput = (obj) => {\r\n    let clone = [...offer.videoUrl]\r\n    if (clone[clone.length - 1] || !clone.length) {\r\n      clone.push('')\r\n    }\r\n    setOffer({ ...offer, videoUrl: clone })\r\n  }\r\n\r\n  const onSaveMain = async (e) => {\r\n    let clone = Object.assign({}, offer)\r\n\r\n    let obj = {\r\n      name: clone.name,\r\n      summary: clone.summary,\r\n      description: clone.description,\r\n      descriptionWillDone: clone.descriptionWillDone,\r\n      descriptionWillProvide: clone.descriptionWillProvide,\r\n      descriptionRequirements: clone.descriptionRequirements,\r\n      descriptionNote: clone.descriptionNote,\r\n      category: clone.category.id,\r\n      subCategory: clone.subCategory && clone.subCategory.id ? clone.subCategory.id : '',\r\n      country:\r\n        clone.country && Array.isArray(clone.country)\r\n          ? clone.country.map((item) => item.value).join(', ')\r\n          : clone.country,\r\n      type: clone.type,\r\n    }\r\n    setIsLoading(true)\r\n    const res = await apiEditOffer(id, obj)\r\n    console.log(res)\r\n    if (!res.err) {\r\n      showNotification('info', 'Offer was edited successfully')\r\n      setStep(0)\r\n    } else {\r\n      setIsLoading(false)\r\n      debugger\r\n      showNotification('error', res.err)\r\n    }\r\n    setIsLoading(false)\r\n  }\r\n  const onSaveParams = async (params) => {\r\n    const clone = [...params]\r\n    let arr = []\r\n    clone.map((item, key) => {\r\n      arr.push({\r\n        templateId: item.id,\r\n        value: item.value,\r\n      })\r\n    })\r\n    setIsLoading(true)\r\n    apiCreateOfferParams(id, arr)\r\n      .then((res) => {\r\n        setIsLoading(false)\r\n        showNotification('info', 'Offer was edited successfully')\r\n        setOffer({ ...offer, categoryOptions: res.data.categoryOptions })\r\n        setStep(0)\r\n      })\r\n      .catch((err) => {\r\n        setIsLoading(false)\r\n        showNotification('error', err)\r\n      })\r\n  }\r\n  const onSavePhotos = async (e) => {\r\n    showNotification('info', 'Photos was updated successfully')\r\n    setStep(0)\r\n  }\r\n\r\n  const onSaveVideos = async (e) => {\r\n    let filterV = offer.videoUrl.filter((item) => !!item)\r\n    setIsLoading(true)\r\n    const res = await apiEditOffer(id, { videoUrl: filterV })\r\n    setIsLoading(true)\r\n    showNotification('info', 'Videos was updated successfully')\r\n    setStep(0)\r\n  }\r\n\r\n  const sendPhotos = async () => {\r\n    if (photos.length) {\r\n      let data = new FormData()\r\n      data.append('offerId', offer.id)\r\n      photos.forEach((file) => data.append('file', file, file.name))\r\n      setIsLoading(true)\r\n      let res = await apiOfferPhotos(data)\r\n      return res.data\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n  const sendCover = async () => {\r\n    if (activePhoto.id) {\r\n      let res = await apiSetOfferCoverPhoto(id, { offerPhotoId: activePhoto.id })\r\n      return res.data\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  const onSavePerfomance = async () => {\r\n    let clone = Object.assign({}, offer)\r\n    let obj = {\r\n      offerId: offer.id,\r\n      maxNumberOfActs: clone.maxNumberOfActs,\r\n      minNumberOfActs: clone.minNumberOfActs,\r\n      daysBeforeBooking: clone.daysBeforeBooking,\r\n      timeOpenCalendar: clone.timeOpenCalendar,\r\n      endDate: getEndDay(clone.startDate),\r\n    }\r\n    setIsLoading(true)\r\n    const res = await apiAddPerformanceDetails(obj)\r\n    if (!res.err) {\r\n      showNotification('info', 'Offer was edited successfully')\r\n      setStep(0)\r\n      console.log(offer)\r\n      debugger\r\n      setOffer({\r\n        ...offer,\r\n        maxNumberOfActs: res.data.maxNumberOfActs,\r\n        minNumberOfActs: res.data.minNumberOfActs,\r\n        daysBeforeBooking: res.data.daysBeforeBooking,\r\n        timeOpenCalendar: res.data.timeOpenCalendar,\r\n        endDate: res.data.endDate,\r\n      })\r\n    } else {\r\n      showNotification('error', res.err)\r\n    }\r\n    setIsLoading(false)\r\n  }\r\n  const onSaveCalendar = async (selectedDays) => {\r\n    setIsLoading(true)\r\n    const obj = {\r\n      offerId: offer.id,\r\n      disabledTimes: selectedDays,\r\n    }\r\n\r\n    setIsLoading(true)\r\n    const res = await apiOfferUpdateDisabled(obj)\r\n    if (!res.err) {\r\n      setOffer({ ...offer, calendar: res.data })\r\n      showNotification('info', 'Offer was edited successfully')\r\n      setStep(0)\r\n    } else {\r\n      showNotification('error', res.err)\r\n    }\r\n    setIsLoading(false)\r\n  }\r\n  const onSavePrice = async (event) => {\r\n    setIsLoading(true)\r\n    const clone = { ...offer }\r\n    let obj = {\r\n      offerId: clone.id,\r\n      typePrice: clone.typePrice,\r\n      pricePerAct: clone.pricePerAct,\r\n      currency: clone.currency,\r\n      kickstart: clone.kickstart,\r\n    }\r\n    const res = await apiOfferCreatePrice(obj)\r\n    if (!res.err) {\r\n      showNotification('info', 'Offer was edited successfully')\r\n      setOffer({\r\n        ...offer,\r\n        typePrice: res.data.typePrice,\r\n        pricePerAct: res.data.pricePerAct,\r\n        currency: res.data.currency,\r\n        kickstart: res.data.kickstart,\r\n      })\r\n      setIsLoading(false)\r\n      setStep(0)\r\n    } else {\r\n      showNotification('error', res.err)\r\n    }\r\n    setIsLoading(false)\r\n  }\r\n  const getEndDay = (startDate) => {\r\n    let timeOpenCalendar = offer.timeOpenCalendar\r\n    debugger\r\n    let copiedDate = new Date(startDate)\r\n    let lastDate\r\n    switch (timeOpenCalendar) {\r\n      case '1 month':\r\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 1))\r\n        break\r\n      case '2 month':\r\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 2))\r\n        break\r\n      case '6 month':\r\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 6))\r\n        break\r\n      case '1 year':\r\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 12))\r\n        break\r\n    }\r\n    return lastDate\r\n  }\r\n\r\n  const handleChangeStep = () => {\r\n    step ? setStep(0) : Router.push('/offers/[id]', `/offers/${id}`, { shallow: true })\r\n  }\r\n\r\n  const handlePublishOffer = () => {\r\n    let data = {\r\n      status: 'open',\r\n    }\r\n    setIsPublishing(true)\r\n    apiEditOffer(id, data)\r\n      .then((res) => {\r\n        setOffer({ ...offer, status: res.data.status })\r\n        showNotification('info', 'Offer was published successfully')\r\n        window.scrollTo(0, 0)\r\n        setIsPublishing(false)\r\n      })\r\n      .catch((e) => {\r\n        showNotification('error', e)\r\n        setIsPublishing(false)\r\n      })\r\n  }\r\n\r\n  const handleDeleteOffer = () => {\r\n    if (window.confirm('Are you sure you want to delete this offer?')) {\r\n      setLoadingDelete(true)\r\n      apiDeleteOffer(id)\r\n        .then((res) => {\r\n          setLoadingDelete(false)\r\n          Router.push('/profile/offers', `/profile/offers`, { shallow: true })\r\n        })\r\n        .catch((e) => {\r\n          showNotification('error', e)\r\n          setLoadingDelete(false)\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {!step && <Header isProfile={!step} previewOfferCb={handleChangeStep} />}\r\n\r\n      <ContainerDesktop>\r\n        {loading ? (\r\n          <>Loading...</>\r\n        ) : (\r\n          <>\r\n            <Flex>\r\n              {step ? (\r\n                <WrapperHeader onClick={() => handleChangeStep()}>\r\n                  <ArrowLeft mr={15} />\r\n                  <Text fz={18}>{!!step ? offer.name : 'Back to offer'}</Text>\r\n                </WrapperHeader>\r\n              ) : (\r\n                <FlexRight>\r\n                  <ImgEditMain src={modifySrc(offer.avatarUrl, 'offer')} />\r\n                  <NameOffer>{offer.name}</NameOffer>\r\n                  <StatusOffer>{offer.status}</StatusOffer>\r\n                  <Divider mt={40} grey />\r\n\r\n                  <WrapFooterBtns2>\r\n                    {offer.status !== 'open' && (\r\n                      <Button transparentBlue onClick={handlePublishOffer} loading={isPublishing}>\r\n                        Publish offer\r\n                      </Button>\r\n                    )}\r\n                    <Button red mt={15} onClick={handleDeleteOffer} loading={loadingDelete}>\r\n                      Delete offer\r\n                    </Button>\r\n                  </WrapFooterBtns2>\r\n                </FlexRight>\r\n              )}\r\n\r\n              {step ? (\r\n                <Wrapper pl={18} pr={18} mt={15} pb={70}>\r\n                  {step === 1 && (\r\n                    <Main\r\n                      offer={offer}\r\n                      onChange={onChange}\r\n                      listCategories={listCategories}\r\n                      listEventTypes={listEventTypes}\r\n                      isLoading={isLoading}\r\n                      onSave={onSaveMain}\r\n                    />\r\n                  )}\r\n                  {step === 2 && (\r\n                    <Photos\r\n                      offer={offer}\r\n                      isLoading={isLoading}\r\n                      setOffer={setOffer}\r\n                      onSave={onSavePhotos}\r\n                    />\r\n                  )}\r\n                  {step === 3 && (\r\n                    <Videos\r\n                      videos={offer.videoUrl}\r\n                      onChange={onChangeVideos}\r\n                      isLoading={isLoading}\r\n                      handleAddInput={handleAddInput}\r\n                      onSave={onSaveVideos}\r\n                    />\r\n                  )}\r\n                  {step === 4 && (\r\n                    <Performance\r\n                      offer={offer}\r\n                      onChange={onChange}\r\n                      isLoading={isLoading}\r\n                      onSave={onSavePerfomance}\r\n                    />\r\n                  )}\r\n                  {step === 5 && (\r\n                    <Calendar\r\n                      offer={offer}\r\n                      onChange={onChange}\r\n                      isLoading={isLoading}\r\n                      onSave={onSaveCalendar}\r\n                    />\r\n                  )}\r\n                  {step === 6 && (\r\n                    <Price\r\n                      offer={offer}\r\n                      onChange={onChange}\r\n                      isLoading={isLoading}\r\n                      onSave={onSavePrice}\r\n                    />\r\n                  )}\r\n                </Wrapper>\r\n              ) : (\r\n                <FlexLeft>\r\n                  <EditRow title=\"Main\" onClick={() => setStep(1)} />\r\n                  <EditRow title=\"Photos\" onClick={() => setStep(2)} />\r\n                  <EditRow title=\"Videos\" onClick={() => setStep(3)} />\r\n                  <EditRow title=\"Details\" onClick={() => setStep(4)} />\r\n                  <EditRow\r\n                    title=\"Calendar\"\r\n                    desc=\"Calendar preferences\"\r\n                    onClick={() => setStep(5)}\r\n                  />\r\n                  <EditRow title=\"Price\" onClick={() => setStep(6)} />\r\n\r\n                  <WrapFooterBtns>\r\n                    {offer.status !== 'open' && (\r\n                      <Button transparentBlue onClick={handlePublishOffer} loading={isPublishing}>\r\n                        Publish offer\r\n                      </Button>\r\n                    )}\r\n                    <Button red mt={15} onClick={handleDeleteOffer} loading={loadingDelete}>\r\n                      Delete offer\r\n                    </Button>\r\n                  </WrapFooterBtns>\r\n                </FlexLeft>\r\n              )}\r\n            </Flex>\r\n          </>\r\n        )}\r\n      </ContainerDesktop>\r\n    </>\r\n  )\r\n}\r\n\r\nconst FlexLeft = styled.div``\r\nconst FlexRight = styled.div``\r\n\r\nconst Flex = styled.div`\r\n  @media ${device.laptopDesktop} {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin-top: 10px;\r\n\r\n    ${FlexLeft} {\r\n      width: 60%;\r\n      order: 1;\r\n\r\n      ${WrapFooterBtns} {\r\n        display: none;\r\n      }\r\n    }\r\n\r\n    ${FlexRight} {\r\n      width: 35%;\r\n      order: 2;\r\n\r\n      img {\r\n        height: auto;\r\n        max-height: 50vh;\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nconst WrapFooterBtns2 = styled.div`\r\n  margin-top: 20px;\r\n  @media ${device.mobile} {\r\n    display: none;\r\n  }\r\n`\r\n\r\nexport default Edit\r\n"]},"metadata":{},"sourceType":"module"}