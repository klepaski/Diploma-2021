{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Router } from '../../routes';\nimport { MainContext } from '../../components/contextProviders/MainContext';\nimport { CheckLabel, Footer, Label, Label2, TipWrapper, TipWrapper2, Title, WhoCard } from '../../components/Layouts/styledLayouts';\nimport styled, { css } from 'styled-components';\nimport { device } from '../../lib/mediaDevice';\nimport { Wrapper, WrapperHeight } from '../../components/StyledComponents/Wrapper';\nimport { Button } from '../../components/controls/Button/Button';\nimport Header from '../../components/Header/Header';\nimport { login, withAuthSync } from '../../utils/auth';\nimport Category from '../../components/Offer/creation/Category';\nimport Start from '../../components/Offer/creation/Start';\nimport PerfectFor from '../../components/Offer/creation/PerfectFor';\nimport People from '../../components/Offer/creation/People';\nimport { apiLoginUser, apiCreateOffer, apiGetEventTypes, apiSendInvitatons, apiGetProgrammerCategories } from '../../actions/api';\nimport { showNotification } from '../../utils/notification';\nimport useUserInfo from '../../hooks/useUserInfo';\nimport { ContainerDesktop, FooterDesktop } from '../../components/StyledComponents/Grid';\n\nconst Create = () => {\n  const {\n    0: step,\n    1: setStep\n  } = useState(1);\n  const {\n    0: listEventTypes,\n    1: setListEventTypes\n  } = useState([]);\n  const {\n    0: listCategories,\n    1: setListCategories\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  let defaultOffer = {\n    name: '',\n    summary: '',\n    description: '',\n    descriptionWillDone: '',\n    descriptionWillProvide: '',\n    descriptionRequirements: '',\n    descriptionNote: '',\n    type: [],\n    numberOfPeople: '',\n    country: [],\n    category: {},\n    subCategory: {},\n    listEmails: []\n  };\n  const {\n    0: offer,\n    1: setOffer\n  } = useState(defaultOffer);\n  useEffect(() => {\n    let getListEventTypes = async () => {\n      const res = await apiGetEventTypes();\n      setListEventTypes(res.data);\n    };\n\n    const getCategories = async () => {\n      const res = await apiGetProgrammerCategories();\n      setListCategories(res.data);\n    };\n\n    getCategories();\n    getListEventTypes();\n  }, []);\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [step]);\n\n  const handleBack = () => {\n    setStep(step - 1);\n  };\n\n  const handleNext = () => {\n    if (step === 4) {\n      createOffer();\n    } else {\n      setStep(step + 1);\n    }\n  };\n\n  const onChange = e => {\n    let {\n      name,\n      value,\n      required\n    } = e.target;\n    if (name === 'numberOfPeople') value = Number(value);\n\n    if (name == 'description' || name == 'descriptionWillDone' || name == 'descriptionWillProvide' || name == 'descriptionRequirements' || name == 'descriptionNote') {\n      value = value.slice(0, 500);\n    }\n\n    if (name == 'name') {\n      value = value.slice(0, 200);\n    }\n\n    if (name == 'summary') {\n      value = value.slice(0, 300);\n    }\n\n    setOffer(offer => _objectSpread({}, offer, {\n      [name]: value\n    })); // let error = validate(name, value, required)\n    // setErorrs(errors => ({...errors, [name]: error}))\n  };\n\n  const createOffer = () => {\n    setLoading(true);\n\n    let clone = _Object$assign({}, offer);\n\n    clone.category = offer.category.id;\n    clone.subCategory = offer.subCategory ? offer.subCategory.id : '';\n    clone.country = offer.country ? offer.country.map(item => item.value).join(', ') : '';\n    apiCreateOffer(clone).then(async res => {\n      // let inv = await sendInvitations(res.data.id, offer.listEmails);\n      let obj = {\n        emails: offer.listEmails\n      };\n\n      if (offer.listEmails.length) {\n        apiSendInvitatons(res.data.id, obj).then(() => {\n          Router.push(`/offers/${res.data.id}/params`);\n        }).catch(err => {\n          showNotification('error', err);\n          Router.push(`/offers/${res.data.id}/params`);\n        });\n      } else {\n        Router.push(`/offers/${res.data.id}/params`);\n      }\n    }).catch(err => {\n      setLoading(false);\n      showNotification('error', err);\n    });\n  };\n\n  let disabled = step == 2 && !offer.name;\n  return __jsx(CreateBox, null, __jsx(Header, {\n    isReg: true,\n    hiddeSave: true\n  }), __jsx(Wrapper, {\n    p: 15,\n    pt: 35\n  }, __jsx(ContainerDesktop, {\n    isOffer: true\n  }, __jsx(WrapperHeight, null, step === 1 && __jsx(Category, {\n    offer: offer,\n    listCategories: listCategories,\n    onChange: onChange,\n    handleNext: handleNext\n  }), step === 2 && __jsx(Start, {\n    offer: offer,\n    onChange: onChange\n  }), step === 3 && __jsx(PerfectFor, {\n    listEventTypes: listEventTypes,\n    offer: offer,\n    onChange: onChange\n  }), step === 4 && __jsx(People, {\n    offer: offer,\n    onChange: onChange\n  }))), step != 1 && __jsx(FooterDesktop, null, __jsx(Footer, {\n    mt: 50,\n    flexEnd: step === 1\n  }, step !== 1 && __jsx(Button, {\n    onClick: handleBack,\n    disabled: step === 4 && loading\n  }, \"Back\"), __jsx(Button, {\n    blue: true,\n    onClick: handleNext,\n    disabled: disabled,\n    loading: loading\n  }, \"Next\")))));\n};\n\nexport default withAuthSync(Create);\nconst CreateBox = styled.div`\n  @media ${device.laptopDesktop} {\n    ${Wrapper} {\n      padding-top: 20px;\n    }\n  }\n`;","map":{"version":3,"sources":["D:/4/диплом/webapp — копия/pages/offers/create.js"],"names":["React","useState","useContext","useEffect","PropTypes","Router","MainContext","CheckLabel","Footer","Label","Label2","TipWrapper","TipWrapper2","Title","WhoCard","styled","css","device","Wrapper","WrapperHeight","Button","Header","login","withAuthSync","Category","Start","PerfectFor","People","apiLoginUser","apiCreateOffer","apiGetEventTypes","apiSendInvitatons","apiGetProgrammerCategories","showNotification","useUserInfo","ContainerDesktop","FooterDesktop","Create","step","setStep","listEventTypes","setListEventTypes","listCategories","setListCategories","loading","setLoading","defaultOffer","name","summary","description","descriptionWillDone","descriptionWillProvide","descriptionRequirements","descriptionNote","type","numberOfPeople","country","category","subCategory","listEmails","offer","setOffer","getListEventTypes","res","data","getCategories","window","scrollTo","handleBack","handleNext","createOffer","onChange","e","value","required","target","Number","slice","clone","id","map","item","join","then","obj","emails","length","push","catch","err","disabled","CreateBox","div","laptopDesktop"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Router } from '../../routes'\r\nimport { MainContext } from '../../components/contextProviders/MainContext'\r\nimport {\r\n  CheckLabel,\r\n  Footer,\r\n  Label,\r\n  Label2,\r\n  TipWrapper,\r\n  TipWrapper2,\r\n  Title,\r\n  WhoCard,\r\n} from '../../components/Layouts/styledLayouts'\r\nimport styled, { css } from 'styled-components'\r\nimport { device } from '../../lib/mediaDevice'\r\nimport { Wrapper, WrapperHeight } from '../../components/StyledComponents/Wrapper'\r\nimport { Button } from '../../components/controls/Button/Button'\r\nimport Header from '../../components/Header/Header'\r\nimport { login, withAuthSync } from '../../utils/auth'\r\nimport Category from '../../components/Offer/creation/Category'\r\nimport Start from '../../components/Offer/creation/Start'\r\nimport PerfectFor from '../../components/Offer/creation/PerfectFor'\r\nimport People from '../../components/Offer/creation/People'\r\nimport {\r\n  apiLoginUser,\r\n  apiCreateOffer,\r\n  apiGetEventTypes,\r\n  apiSendInvitatons,\r\n  apiGetProgrammerCategories,\r\n} from '../../actions/api'\r\nimport { showNotification } from '../../utils/notification'\r\nimport useUserInfo from '../../hooks/useUserInfo'\r\nimport { ContainerDesktop, FooterDesktop } from '../../components/StyledComponents/Grid'\r\n\r\nconst Create = () => {\r\n  const [step, setStep] = useState(1)\r\n  const [listEventTypes, setListEventTypes] = useState([])\r\n  const [listCategories, setListCategories] = useState([])\r\n  const [loading, setLoading] = useState(false)\r\n  let defaultOffer = {\r\n    name: '',\r\n    summary: '',\r\n    description: '',\r\n    descriptionWillDone: '',\r\n    descriptionWillProvide: '',\r\n    descriptionRequirements: '',\r\n    descriptionNote: '',\r\n    type: [],\r\n    numberOfPeople: '',\r\n    country: [],\r\n    category: {},\r\n    subCategory: {},\r\n    listEmails: [],\r\n  }\r\n  const [offer, setOffer] = useState(defaultOffer)\r\n\r\n  useEffect(() => {\r\n    let getListEventTypes = async () => {\r\n      const res = await apiGetEventTypes()\r\n      setListEventTypes(res.data)\r\n    }\r\n    const getCategories = async () => {\r\n      const res = await apiGetProgrammerCategories()\r\n      setListCategories(res.data)\r\n    }\r\n    getCategories()\r\n    getListEventTypes()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [step])\r\n\r\n  const handleBack = () => {\r\n    setStep(step - 1)\r\n  }\r\n  const handleNext = () => {\r\n    if (step === 4) {\r\n      createOffer()\r\n    } else {\r\n      setStep(step + 1)\r\n    }\r\n  }\r\n\r\n  const onChange = (e) => {\r\n    let { name, value, required } = e.target\r\n\r\n    if (name === 'numberOfPeople') value = Number(value)\r\n    if (\r\n      name == 'description' ||\r\n      name == 'descriptionWillDone' ||\r\n      name == 'descriptionWillProvide' ||\r\n      name == 'descriptionRequirements' ||\r\n      name == 'descriptionNote'\r\n    ) {\r\n      value = value.slice(0, 500)\r\n    }\r\n\r\n    if (name == 'name') {\r\n      value = value.slice(0, 200)\r\n    }\r\n    if (name == 'summary') {\r\n      value = value.slice(0, 300)\r\n    }\r\n\r\n\r\n    setOffer((offer) => ({ ...offer, [name]: value }))\r\n    // let error = validate(name, value, required)\r\n    // setErorrs(errors => ({...errors, [name]: error}))\r\n  }\r\n\r\n  const createOffer = () => {\r\n    setLoading(true)\r\n    let clone = Object.assign({}, offer)\r\n    clone.category = offer.category.id\r\n    clone.subCategory = offer.subCategory ? offer.subCategory.id : ''\r\n    clone.country = offer.country ? offer.country.map((item) => item.value).join(', ') : ''\r\n\r\n    apiCreateOffer(clone)\r\n      .then(async (res) => {\r\n        // let inv = await sendInvitations(res.data.id, offer.listEmails);\r\n        let obj = { emails: offer.listEmails }\r\n        if (offer.listEmails.length) {\r\n          apiSendInvitatons(res.data.id, obj)\r\n            .then(() => {\r\n              Router.push(`/offers/${res.data.id}/params`)\r\n            })\r\n            .catch((err) => {\r\n              showNotification('error', err)\r\n              Router.push(`/offers/${res.data.id}/params`)\r\n            })\r\n        } else {\r\n          Router.push(`/offers/${res.data.id}/params`)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false)\r\n        showNotification('error', err)\r\n      })\r\n  }\r\n\r\n  let disabled = step == 2 && !offer.name\r\n\r\n  return (\r\n    <CreateBox>\r\n      <Header isReg hiddeSave />\r\n      <Wrapper p={15} pt={35}>\r\n        <ContainerDesktop isOffer>\r\n          <WrapperHeight>\r\n            {step === 1 && (\r\n              <Category\r\n                offer={offer}\r\n                listCategories={listCategories}\r\n                onChange={onChange}\r\n                handleNext={handleNext}\r\n              />\r\n            )}\r\n            {step === 2 && <Start offer={offer} onChange={onChange} />}\r\n            {step === 3 && (\r\n              <PerfectFor listEventTypes={listEventTypes} offer={offer} onChange={onChange} />\r\n            )}\r\n            {step === 4 && <People offer={offer} onChange={onChange} />}\r\n          </WrapperHeight>\r\n        </ContainerDesktop>\r\n\r\n        {step != 1 && (\r\n        <FooterDesktop>\r\n            <Footer mt={50} flexEnd={step === 1}>\r\n              {step !== 1 && (\r\n                <Button onClick={handleBack} disabled={step === 4 && loading}>\r\n                  Back\r\n                </Button>\r\n              )}\r\n              <Button blue onClick={handleNext} disabled={disabled} loading={loading}>\r\n                Next\r\n              </Button>\r\n            </Footer>\r\n        </FooterDesktop>\r\n        )}\r\n      </Wrapper>\r\n    </CreateBox>\r\n  )\r\n}\r\n\r\nexport default withAuthSync(Create)\r\n\r\nconst CreateBox = styled.div`\r\n  @media ${device.laptopDesktop} {\r\n    ${Wrapper} {\r\n      padding-top: 20px;\r\n    }\r\n  }\r\n`\r\n"]},"metadata":{},"sourceType":"module"}