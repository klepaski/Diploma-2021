{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext, useEffect } from 'react';\nimport moment from 'moment';\nimport { Footer, Label2, Title } from '../../components/Layouts/styledLayouts';\nimport { Wrapper, WrapperHeight } from '../../components/StyledComponents/Wrapper';\nimport styled from 'styled-components';\nimport { Button } from '../../components/controls/Button/Button';\nimport Header from '../../components/Header/Header';\nimport Select from '../../components/controls/Select/Select';\nimport { Input } from '../../components/controls/Input/Input';\nimport DatePicker from '../../components/controls/DateTimePickers/Datepicker';\nimport { listCountries } from '../../utils/countriesLanguages';\nimport { apiGetListOffers } from '../../actions/api';\nimport ListOffers from '../../components/Offer/list/ListOffers';\nimport { MainContext } from '../../components/contextProviders/MainContext';\nimport { urlSearchParams } from '../../utils/utils';\nimport SearchBlock from '../../components/Offer/search/SearchBlock';\nimport { WrapSearchParams, SearchParamsWrapItem, SearchParamsLabel, SearchParamsValue } from '../../components/StyledComponents/styledComponents';\nimport { Text } from '../../components/StyledComponents/Text';\nimport { Divider } from '../../components/StyledComponents/Divider';\nimport { ContainerDesktop } from '../../components/StyledComponents/Grid';\n\nconst Search = () => {\n  let {\n    search,\n    from,\n    to,\n    country\n  } = urlSearchParams();\n  const {\n    listOffers\n  } = useContext(MainContext);\n  const {\n    0: list,\n    1: setList\n  } = useState(listOffers);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  useEffect(() => {\n    getListOffers();\n  }, [search, from, to, country]);\n\n  const getListOffers = () => {\n    let params = {\n      search: search,\n      from: from,\n      to: to,\n      country: country\n    };\n    setLoading(true);\n    apiGetListOffers(params).then(res => {\n      setList(res.data);\n      setLoading(false);\n    }).catch(e => {\n      setLoading(false);\n    });\n  };\n\n  let fromParam = from ? moment(new Date(_parseInt(from))).format('DD MMMM YYYY') : null;\n  let toParam = to ? moment(new Date(_parseInt(to))).format('DD MMMM YYYY') : null;\n  console.log('from', from);\n  console.log('to', to);\n  return __jsx(React.Fragment, null, __jsx(Header, {\n    isProfile: true\n  }), __jsx(ContainerDesktop, null, __jsx(Wrapper, {\n    p: 15\n  }, __jsx(Box, null, __jsx(SearchBlock, {\n    blackTitle: true,\n    searchStr: search,\n    countryStr: country,\n    fromP: from ? new Date(Number(from)) : null,\n    toP: to ? new Date(Number(to)) : null\n  })), __jsx(Divider, {\n    grey: true,\n    mt: 30,\n    mb: 30\n  }), loading && __jsx(\"div\", null, \"to do Loading... \"), list.length ? __jsx(ListOffers, {\n    offers: list\n  }) : __jsx(\"div\", null, !loading && __jsx(\"div\", null, \"No results\")))));\n};\n\nconst Box = styled.div`\n  > div {\n    margin-left: 0;\n  }\n  > div > div {\n    color: rgba(0, 0, 0, 0.8) !important;\n    margin-top: 50px !important;\n  }\n  > div > div:last-child {\n    margin-top: 0 !important;\n  }\n`;\nexport default Search;","map":{"version":3,"sources":["D:/4/диплом/webapp — копия/pages/offers/search.js"],"names":["React","useState","useContext","useEffect","moment","Footer","Label2","Title","Wrapper","WrapperHeight","styled","Button","Header","Select","Input","DatePicker","listCountries","apiGetListOffers","ListOffers","MainContext","urlSearchParams","SearchBlock","WrapSearchParams","SearchParamsWrapItem","SearchParamsLabel","SearchParamsValue","Text","Divider","ContainerDesktop","Search","search","from","to","country","listOffers","list","setList","loading","setLoading","getListOffers","params","then","res","data","catch","e","fromParam","Date","format","toParam","console","log","Number","length","Box","div"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\r\nimport moment from 'moment'\r\nimport { Footer, Label2, Title } from '../../components/Layouts/styledLayouts'\r\nimport { Wrapper, WrapperHeight } from '../../components/StyledComponents/Wrapper'\r\nimport styled from 'styled-components'\r\nimport { Button } from '../../components/controls/Button/Button'\r\nimport Header from '../../components/Header/Header'\r\nimport Select from '../../components/controls/Select/Select'\r\nimport { Input } from '../../components/controls/Input/Input'\r\nimport DatePicker from '../../components/controls/DateTimePickers/Datepicker'\r\nimport { listCountries } from '../../utils/countriesLanguages'\r\nimport { apiGetListOffers } from '../../actions/api'\r\nimport ListOffers from '../../components/Offer/list/ListOffers'\r\nimport { MainContext } from '../../components/contextProviders/MainContext'\r\nimport { urlSearchParams } from '../../utils/utils'\r\nimport SearchBlock from '../../components/Offer/search/SearchBlock'\r\nimport {\r\n  WrapSearchParams,\r\n  SearchParamsWrapItem,\r\n  SearchParamsLabel,\r\n  SearchParamsValue,\r\n} from '../../components/StyledComponents/styledComponents'\r\nimport { Text } from '../../components/StyledComponents/Text'\r\nimport { Divider } from '../../components/StyledComponents/Divider'\r\nimport { ContainerDesktop } from '../../components/StyledComponents/Grid'\r\n\r\nconst Search = () => {\r\n  let { search, from, to, country } = urlSearchParams()\r\n  const { listOffers } = useContext(MainContext)\r\n  const [list, setList] = useState(listOffers)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    getListOffers()\r\n  }, [search, from, to, country])\r\n\r\n  const getListOffers = () => {\r\n    let params = {\r\n      search: search,\r\n      from: from,\r\n      to: to,\r\n      country: country,\r\n    }\r\n    setLoading(true)\r\n    apiGetListOffers(params)\r\n      .then((res) => {\r\n        setList(res.data)\r\n        setLoading(false)\r\n      })\r\n      .catch((e) => {\r\n        setLoading(false)\r\n      })\r\n  }\r\n\r\n  let fromParam = from ? moment(new Date(parseInt(from))).format('DD MMMM YYYY') : null\r\n  let toParam = to ? moment(new Date(parseInt(to))).format('DD MMMM YYYY') : null\r\n\r\n  console.log('from', from)\r\n  console.log('to', to)\r\n\r\n  return (\r\n    <>\r\n      <Header isProfile />\r\n      <ContainerDesktop>\r\n        <Wrapper p={15}>\r\n          {/*<WrapSearchParams>*/}\r\n          {/*  <Text fz={15}>Results for:</Text>*/}\r\n          {/*  <SearchParamsWrapItem>*/}\r\n          {/*    <SearchParamsLabel>name:</SearchParamsLabel>*/}\r\n          {/*    <SearchParamsValue>{search || 'any'}</SearchParamsValue>*/}\r\n          {/*  </SearchParamsWrapItem>*/}\r\n          {/*  {(from || to) && (*/}\r\n          {/*    <SearchParamsWrapItem>*/}\r\n          {/*      <SearchParamsLabel>from:</SearchParamsLabel>*/}\r\n          {/*      <SearchParamsValue>{fromParam}</SearchParamsValue> ,*/}\r\n          {/*      <SearchParamsLabel ml={10}>to:</SearchParamsLabel>*/}\r\n          {/*      <SearchParamsValue>{toParam}</SearchParamsValue>*/}\r\n          {/*    </SearchParamsWrapItem>*/}\r\n          {/*  )}*/}\r\n\r\n          {/*  <SearchParamsWrapItem>*/}\r\n          {/*    <SearchParamsLabel>country:</SearchParamsLabel>*/}\r\n          {/*    <SearchParamsValue>{country || 'any'}</SearchParamsValue>*/}\r\n          {/*  </SearchParamsWrapItem>*/}\r\n          {/*</WrapSearchParams>*/}\r\n          <Box>\r\n            <SearchBlock\r\n              blackTitle={true}\r\n              searchStr={search}\r\n              countryStr={country}\r\n              fromP={from ? new Date(Number(from)) : null}\r\n              toP={to ? new Date(Number(to)) : null}\r\n            />\r\n          </Box>\r\n\r\n          <Divider grey mt={30} mb={30} />\r\n\r\n          {loading && <div>to do Loading... </div>}\r\n\r\n          {list.length ? (\r\n            <ListOffers offers={list} />\r\n          ) : (\r\n            <div>{!loading && <div>No results</div>}</div>\r\n          )}\r\n        </Wrapper>\r\n      </ContainerDesktop>\r\n    </>\r\n  )\r\n}\r\n\r\nconst Box = styled.div`\r\n  > div {\r\n    margin-left: 0;\r\n  }\r\n  > div > div {\r\n    color: rgba(0, 0, 0, 0.8) !important;\r\n    margin-top: 50px !important;\r\n  }\r\n  > div > div:last-child {\r\n    margin-top: 0 !important;\r\n  }\r\n`\r\n\r\nexport default Search\r\n"]},"metadata":{},"sourceType":"module"}