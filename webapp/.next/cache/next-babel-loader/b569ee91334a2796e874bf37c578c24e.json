{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 15px;\\n  right: 15px;\\n  \\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  \\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from 'react';\nimport ImageGallery from 'react-image-gallery';\nimport styled from \"styled-components\";\nimport galleryBg from \"../../static/img/gallery-bg.jpg\";\nimport { modifySrc } from \"../../utils/modifySrc\";\nimport { ButtonIcon } from \"../controls/Button/ButtonWithIcon\";\nimport \"react-image-gallery/styles/css/image-gallery.css\";\nvar GalleryWrapper = styled.div(_templateObject());\nvar BtnShareLike = styled.div(_templateObject2());\n\nvar GalleryOffer = function GalleryOffer(_ref) {\n  var offer = _ref.offer,\n      handleToggleLike = _ref.handleToggleLike;\n  var avatarUrl = offer.avatarUrl,\n      offerPhoto = offer.offerPhoto,\n      status = offer.status;\n\n  var _useState = useState(0),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useState2 = useState([]),\n      arrayPhotos = _useState2[0],\n      setArrayPhotos = _useState2[1];\n\n  useEffect(function () {\n    var filteredPhoto = offerPhoto.filter(function (item) {\n      return item.photoUrl !== avatarUrl;\n    });\n    var photos = [{\n      photoUrl: avatarUrl\n    }].concat(_toConsumableArray(filteredPhoto));\n    var images = photos.map(function (item) {\n      return {\n        original: modifySrc(item.photoUrl, 'offer')\n      };\n    });\n    setArrayPhotos(images); // preloadImages(filteredPhoto)\n  }, [offer.id]); // const preloadImages = (images) => {\n  //     images.map((item) => {\n  //         var img = new Image();\n  //         img.src = modifySrc(item.photoUrl);\n  //     })\n  // }\n\n  return __jsx(GalleryWrapper, null, __jsx(ImageGallery, {\n    items: arrayPhotos,\n    showThumbnails: false,\n    showPlayButton: false\n  }), __jsx(BtnShareLike, null, __jsx(ButtonIcon, {\n    offer: true,\n    like: true,\n    active: offer.myLike,\n    onClick: handleToggleLike\n  }), __jsx(ButtonIcon, {\n    offer: true,\n    share: true\n  })));\n};\n\nexport { GalleryOffer };","map":{"version":3,"sources":["D:/git/webapp3/webapp/components/Gallery/GalleryOffer.js"],"names":["React","useState","useEffect","ImageGallery","styled","galleryBg","modifySrc","ButtonIcon","GalleryWrapper","div","BtnShareLike","GalleryOffer","offer","handleToggleLike","avatarUrl","offerPhoto","status","active","setActive","arrayPhotos","setArrayPhotos","filteredPhoto","filter","item","photoUrl","photos","images","map","original","id","myLike"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,YAAP,MAAyB,qBAAzB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,OAAOC,SAAP,MAAsB,iCAAtB;AACA,SAAQC,SAAR,QAAwB,uBAAxB;AACA,SAAQC,UAAR,QAAyB,mCAAzB;AAEA,OAAO,kDAAP;AAEA,IAAMC,cAAc,GAAGJ,MAAM,CAACK,GAAV,mBAApB;AAIA,IAAMC,YAAY,GAAGN,MAAM,CAACK,GAAV,oBAAlB;;AAOA,IAAME,YAAY,GAAG,SAAfA,YAAe,OAA+B;AAAA,MAA7BC,KAA6B,QAA7BA,KAA6B;AAAA,MAAtBC,gBAAsB,QAAtBA,gBAAsB;AAAA,MACzCC,SADyC,GACRF,KADQ,CACzCE,SADyC;AAAA,MAC9BC,UAD8B,GACRH,KADQ,CAC9BG,UAD8B;AAAA,MAClBC,MADkB,GACRJ,KADQ,CAClBI,MADkB;;AAAA,kBAEpBf,QAAQ,CAAC,CAAD,CAFY;AAAA,MAEzCgB,MAFyC;AAAA,MAEjCC,SAFiC;;AAAA,mBAGVjB,QAAQ,CAAC,EAAD,CAHE;AAAA,MAGzCkB,WAHyC;AAAA,MAG5BC,cAH4B;;AAKhDlB,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAImB,aAAa,GAAGN,UAAU,CAACO,MAAX,CAAkB,UAAAC,IAAI;AAAA,aAAIA,IAAI,CAACC,QAAL,KAAkBV,SAAtB;AAAA,KAAtB,CAApB;AACA,QAAIW,MAAM,IAAI;AAACD,MAAAA,QAAQ,EAAEV;AAAX,KAAJ,4BAA8BO,aAA9B,EAAV;AACA,QAAIK,MAAM,GAAGD,MAAM,CAACE,GAAP,CAAW,UAAAJ,IAAI,EAAI;AAC5B,aACI;AAACK,QAAAA,QAAQ,EAAEtB,SAAS,CAACiB,IAAI,CAACC,QAAN,EAAgB,OAAhB;AAApB,OADJ;AAGH,KAJY,CAAb;AAKAJ,IAAAA,cAAc,CAACM,MAAD,CAAd,CARY,CASZ;AACH,GAVQ,EAUP,CAACd,KAAK,CAACiB,EAAP,CAVO,CAAT,CALgD,CAkBhD;AACA;AACA;AACA;AACA;AACA;;AAEA,SACI,MAAC,cAAD,QACI,MAAC,YAAD;AACI,IAAA,KAAK,EAAEV,WADX;AAEI,IAAA,cAAc,EAAE,KAFpB;AAGI,IAAA,cAAc,EAAE;AAHpB,IADJ,EAOI,MAAC,YAAD,QACI,MAAC,UAAD;AAAY,IAAA,KAAK,MAAjB;AAAkB,IAAA,IAAI,MAAtB;AAAuB,IAAA,MAAM,EAAEP,KAAK,CAACkB,MAArC;AAA6C,IAAA,OAAO,EAAEjB;AAAtD,IADJ,EAEI,MAAC,UAAD;AAAY,IAAA,KAAK,MAAjB;AAAkB,IAAA,KAAK;AAAvB,IAFJ,CAPJ,CADJ;AAgBH,CAzCD;;AA4CA,SAAQF,YAAR","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport ImageGallery from 'react-image-gallery';\r\nimport styled from \"styled-components\";\r\n\r\nimport galleryBg from \"../../static/img/gallery-bg.jpg\";\r\nimport {modifySrc} from \"../../utils/modifySrc\";\r\nimport {ButtonIcon} from \"../controls/Button/ButtonWithIcon\"\r\n\r\nimport \"react-image-gallery/styles/css/image-gallery.css\";\r\n\r\nconst GalleryWrapper = styled.div`\r\n  position: relative;\r\n  \r\n`;\r\nconst BtnShareLike = styled.div`\r\n  position: absolute;\r\n  top: 15px;\r\n  right: 15px;\r\n  \r\n`;\r\n\r\nconst GalleryOffer = ({offer, handleToggleLike}) => {\r\n    const {avatarUrl, offerPhoto, status} = offer\r\n    const [active, setActive] = useState(0)\r\n    const [arrayPhotos, setArrayPhotos] = useState([])\r\n\r\n    useEffect(() => {\r\n        let filteredPhoto = offerPhoto.filter(item => item.photoUrl !== avatarUrl)\r\n        let photos = [{photoUrl: avatarUrl}, ...filteredPhoto];\r\n        let images = photos.map(item => {\r\n            return (\r\n                {original: modifySrc(item.photoUrl, 'offer')}\r\n            )\r\n        })\r\n        setArrayPhotos(images)\r\n        // preloadImages(filteredPhoto)\r\n    },[offer.id])\r\n\r\n\r\n    // const preloadImages = (images) => {\r\n    //     images.map((item) => {\r\n    //         var img = new Image();\r\n    //         img.src = modifySrc(item.photoUrl);\r\n    //     })\r\n    // }\r\n\r\n    return (\r\n        <GalleryWrapper>\r\n            <ImageGallery\r\n                items={arrayPhotos}\r\n                showThumbnails={false}\r\n                showPlayButton={false}\r\n            />\r\n\r\n            <BtnShareLike>\r\n                <ButtonIcon offer like active={offer.myLike} onClick={handleToggleLike}></ButtonIcon>\r\n                <ButtonIcon offer share></ButtonIcon>\r\n            </BtnShareLike>\r\n\r\n\r\n        </GalleryWrapper>\r\n    );\r\n};\r\n\r\n\r\nexport {GalleryOffer};"]},"metadata":{},"sourceType":"module"}