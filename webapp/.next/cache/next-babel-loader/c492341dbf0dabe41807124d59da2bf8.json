{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport { MainContext } from '../../../components/contextProviders/MainContext';\nimport PerfomanceDetails from '../../../components/Offer/perfomanceDetails/PerfomanceDetails';\nimport Notices from '../../../components/Offer/perfomanceDetails/Notices';\nimport ChooseHowFar from '../../../components/Offer/perfomanceDetails/ChooseHowFar';\nimport { Wrapper, WrapperHeight } from '../../../components/StyledComponents/Wrapper';\nimport { Button } from '../../../components/controls/Button/Button';\nimport { Footer } from '../../../components/Layouts/styledLayouts';\nimport { apiAddPerformanceDetails, apiEditOffer } from '../../../actions/api';\nimport Header from '../../../components/Header/Header';\nimport LastStep from '../../../components/Offer/regulations/LastStep';\nimport DefineArtistRules from '../../../components/Offer/params/DefineArtistRules';\nimport Review from '../../../components/Offer/regulations/Review';\nimport HowWillBook from '../../../components/Offer/regulations/HowWillBook';\nimport SuccessfulBookings from '../../../components/Offer/regulations/SuccessfulBookings';\nimport withOfferInfo from '../../../utils/offer';\nimport useOffer from '../../../hooks/useOffer';\nimport { showNotification } from '../../../utils/notification';\nimport { ContainerDesktop, FooterDesktop } from '../../../components/StyledComponents/Grid';\nimport styled from 'styled-components';\nimport { device } from '../../../lib/mediaDevice';\n\nvar PD = function PD() {\n  var router = useRouter();\n  var id = router.query.id;\n  var offer = useOffer(id);\n\n  var _useContext = useContext(MainContext),\n      setOffer = _useContext.setOffer;\n\n  var _useState = useState(1),\n      step = _useState[0],\n      setStep = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState({\n    startDate: new Date(),\n    maxNumberOfActs: 1,\n    minNumberOfActs: 1,\n    daysBeforeBooking: null,\n    timeOpenCalendar: 'any time'\n  }),\n      pd = _useState3[0],\n      setPd = _useState3[1];\n\n  useEffect(function () {\n    var pd = {\n      startDate: new Date(),\n      maxNumberOfActs: offer.maxNumberOfActs,\n      minNumberOfActs: offer.minNumberOfActs,\n      daysBeforeBooking: offer.daysBeforeBooking,\n      timeOpenCalendar: offer.timeOpenCalendar\n    };\n    if (offer.id && offer.timeOpenCalendar) setPd(pd);\n  }, [offer.id]);\n\n  var handleChangeStep = function handleChangeStep(i) {\n    if (step === 1 && i === -1) {\n      Router.push('/offers/[id]/regulations', \"/offers/\".concat(id, \"/regulations\"), {\n        shallow: true\n      });\n      return;\n    }\n\n    if (step === 3 && i === 1) {\n      createPD();\n    } else {\n      setStep(step + i);\n    }\n  };\n\n  var onChange = function onChange(obj) {\n    var type = obj.type,\n        value = obj.value; //set min value\n\n    if (type == 'maxNumberOfActs' || type == 'minNumberOfActs') {\n      if (value === 0) value = 1;\n    }\n\n    setPd(function (pd) {\n      return _objectSpread({}, pd, _defineProperty({}, type, value));\n    });\n  };\n\n  var createPD = function createPD() {\n    var clone = _objectSpread({}, pd);\n\n    clone.endDate = getEndDay(pd.startDate);\n    clone.offerId = id;\n    setLoading(true);\n    apiEditOffer(id, {\n      step: 4\n    });\n    apiAddPerformanceDetails(clone).then(function (res) {\n      setOffer(_objectSpread({}, offer, {\n        maxNumberOfActs: res.data.maxNumberOfActs,\n        minNumberOfActs: res.data.minNumberOfActs,\n        daysBeforeBooking: res.data.daysBeforeBooking,\n        timeOpenCalendar: res.data.timeOpenCalendar,\n        endDate: res.data.endDate,\n        calendar: []\n      }));\n      setTimeout(function () {\n        setLoading(false);\n        Router.push('/offers/[id]/calendar', \"/offers/\".concat(id, \"/calendar\"), {\n          shallow: true\n        });\n      }, 300);\n    })[\"catch\"](function (err) {\n      showNotification('error', err);\n      return {\n        err: err,\n        data: null\n      };\n      setLoading(false);\n    });\n  };\n\n  var getEndDay = function getEndDay(startDate) {\n    var timeOpenCalendar = pd.timeOpenCalendar;\n    var copiedDate = new Date(startDate.getTime());\n    var lastDate;\n\n    switch (timeOpenCalendar) {\n      case '1 month':\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 1));\n        break;\n\n      case '2 month':\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 2));\n        break;\n\n      case '6 month':\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 6));\n        break;\n\n      case '1 year':\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 12));\n        break;\n\n      case 'any time':\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 120));\n        break;\n    }\n\n    return lastDate;\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Header, {\n    isReg: true\n  }), __jsx(Wrapper, {\n    p: 17,\n    pt: 35\n  }, offer.id ? __jsx(React.Fragment, null, __jsx(ContainerDesktop, {\n    isOffer: true\n  }, __jsx(WrapperHeight, null, step === 1 && __jsx(PerfomanceDetails, {\n    pd: pd,\n    onChange: onChange\n  }), step === 2 && __jsx(Notices, {\n    pd: pd,\n    onChange: onChange\n  }), step === 3 && __jsx(ChooseHowFar, {\n    pd: pd,\n    onChange: onChange\n  }))), __jsx(FooterDesktop, null, __jsx(Footer, {\n    mt: 30\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return handleChangeStep(-1);\n    }\n  }, \"Back\"), __jsx(Button, {\n    blue: true,\n    onClick: function onClick() {\n      return handleChangeStep(1);\n    },\n    loading: loading\n  }, \"Next\")))) : __jsx(React.Fragment, null, \"Loading...\")));\n};\n\nexport default PD;","map":{"version":3,"sources":["D:/4/диплом/webapp — копия/pages/offers/[id]/performance-details.js"],"names":["React","useState","useContext","useEffect","Router","useRouter","MainContext","PerfomanceDetails","Notices","ChooseHowFar","Wrapper","WrapperHeight","Button","Footer","apiAddPerformanceDetails","apiEditOffer","Header","LastStep","DefineArtistRules","Review","HowWillBook","SuccessfulBookings","withOfferInfo","useOffer","showNotification","ContainerDesktop","FooterDesktop","styled","device","PD","router","id","query","offer","setOffer","step","setStep","loading","setLoading","startDate","Date","maxNumberOfActs","minNumberOfActs","daysBeforeBooking","timeOpenCalendar","pd","setPd","handleChangeStep","i","push","shallow","createPD","onChange","obj","type","value","clone","endDate","getEndDay","offerId","then","res","data","calendar","setTimeout","err","copiedDate","getTime","lastDate","setMonth","getMonth"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\r\nimport Router, { useRouter } from 'next/router'\r\nimport { MainContext } from '../../../components/contextProviders/MainContext'\r\n\r\nimport PerfomanceDetails from '../../../components/Offer/perfomanceDetails/PerfomanceDetails'\r\nimport Notices from '../../../components/Offer/perfomanceDetails/Notices'\r\nimport ChooseHowFar from '../../../components/Offer/perfomanceDetails/ChooseHowFar'\r\nimport { Wrapper, WrapperHeight } from '../../../components/StyledComponents/Wrapper'\r\nimport { Button } from '../../../components/controls/Button/Button'\r\nimport { Footer } from '../../../components/Layouts/styledLayouts'\r\n\r\nimport { apiAddPerformanceDetails, apiEditOffer } from '../../../actions/api'\r\nimport Header from '../../../components/Header/Header'\r\nimport LastStep from '../../../components/Offer/regulations/LastStep'\r\nimport DefineArtistRules from '../../../components/Offer/params/DefineArtistRules'\r\nimport Review from '../../../components/Offer/regulations/Review'\r\nimport HowWillBook from '../../../components/Offer/regulations/HowWillBook'\r\nimport SuccessfulBookings from '../../../components/Offer/regulations/SuccessfulBookings'\r\nimport withOfferInfo from '../../../utils/offer'\r\nimport useOffer from '../../../hooks/useOffer'\r\nimport { showNotification } from '../../../utils/notification'\r\nimport { ContainerDesktop, FooterDesktop } from '../../../components/StyledComponents/Grid'\r\nimport styled from 'styled-components'\r\nimport { device } from '../../../lib/mediaDevice'\r\n\r\nconst PD = () => {\r\n  const router = useRouter()\r\n  const { id } = router.query\r\n  const offer = useOffer(id)\r\n  const { setOffer } = useContext(MainContext)\r\n  const [step, setStep] = useState(1)\r\n  const [loading, setLoading] = useState(false)\r\n  const [pd, setPd] = useState({\r\n    startDate: new Date(),\r\n    maxNumberOfActs: 1,\r\n    minNumberOfActs: 1,\r\n    daysBeforeBooking: null,\r\n    timeOpenCalendar: 'any time',\r\n  })\r\n\r\n  useEffect(() => {\r\n    let pd = {\r\n      startDate: new Date(),\r\n      maxNumberOfActs: offer.maxNumberOfActs,\r\n      minNumberOfActs: offer.minNumberOfActs,\r\n      daysBeforeBooking: offer.daysBeforeBooking,\r\n      timeOpenCalendar: offer.timeOpenCalendar,\r\n    }\r\n    if (offer.id && offer.timeOpenCalendar) setPd(pd)\r\n  }, [offer.id])\r\n\r\n  const handleChangeStep = (i) => {\r\n    if (step === 1 && i === -1) {\r\n      Router.push('/offers/[id]/regulations', `/offers/${id}/regulations`, { shallow: true })\r\n      return\r\n    }\r\n    if (step === 3 && i === 1) {\r\n      createPD()\r\n    } else {\r\n      setStep(step + i)\r\n    }\r\n  }\r\n\r\n  const onChange = (obj) => {\r\n    let { type, value } = obj\r\n\r\n    //set min value\r\n    if (type == 'maxNumberOfActs' || type == 'minNumberOfActs') {\r\n      if (value === 0) value = 1\r\n    }\r\n    setPd((pd) => ({ ...pd, [type]: value }))\r\n  }\r\n\r\n  const createPD = () => {\r\n    const clone = { ...pd }\r\n    clone.endDate = getEndDay(pd.startDate)\r\n    clone.offerId = id\r\n    setLoading(true)\r\n    apiEditOffer(id, { step: 4 })\r\n    apiAddPerformanceDetails(clone)\r\n      .then((res) => {\r\n        setOffer({\r\n          ...offer,\r\n          maxNumberOfActs: res.data.maxNumberOfActs,\r\n          minNumberOfActs: res.data.minNumberOfActs,\r\n          daysBeforeBooking: res.data.daysBeforeBooking,\r\n          timeOpenCalendar: res.data.timeOpenCalendar,\r\n          endDate: res.data.endDate,\r\n          calendar: [],\r\n        })\r\n        setTimeout(() => {\r\n          setLoading(false)\r\n          Router.push('/offers/[id]/calendar', `/offers/${id}/calendar`, { shallow: true })\r\n        }, 300)\r\n      })\r\n      .catch((err) => {\r\n        showNotification('error', err)\r\n        return { err: err, data: null }\r\n        setLoading(false)\r\n      })\r\n  }\r\n  const getEndDay = (startDate) => {\r\n    let timeOpenCalendar = pd.timeOpenCalendar\r\n    let copiedDate = new Date(startDate.getTime())\r\n    let lastDate\r\n    switch (timeOpenCalendar) {\r\n      case '1 month':\r\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 1))\r\n        break\r\n      case '2 month':\r\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 2))\r\n        break\r\n      case '6 month':\r\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 6))\r\n        break\r\n      case '1 year':\r\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 12))\r\n        break\r\n      case 'any time':\r\n        lastDate = new Date(copiedDate.setMonth(copiedDate.getMonth() + 120))\r\n        break\r\n    }\r\n    return lastDate\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Header isReg />\r\n      <Wrapper p={17} pt={35}>\r\n        {offer.id ? (\r\n          <>\r\n            <ContainerDesktop isOffer>\r\n              <WrapperHeight>\r\n                {step === 1 && <PerfomanceDetails pd={pd} onChange={onChange} />}\r\n                {step === 2 && <Notices pd={pd} onChange={onChange} />}\r\n                {step === 3 && <ChooseHowFar pd={pd} onChange={onChange} />}\r\n              </WrapperHeight>\r\n            </ContainerDesktop>\r\n\r\n            <FooterDesktop>\r\n              <Footer mt={30}>\r\n                <Button onClick={() => handleChangeStep(-1)}>Back</Button>\r\n                <Button blue onClick={() => handleChangeStep(1)} loading={loading}>\r\n                  Next\r\n                </Button>\r\n              </Footer>\r\n            </FooterDesktop>\r\n          </>\r\n        ) : (\r\n          <>Loading...</>\r\n        )}\r\n      </Wrapper>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PD\r\n"]},"metadata":{},"sourceType":"module"}