{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  @media \", \" {\\n    width: 50%;\\n  }\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  @media \", \" {\\n    width: 50%;\\n  }\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  @media \", \" {\\n    display: flex;\\n    justify-content: space-between;\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  @media \", \" {\\n    display: flex;\\n    justify-content: space-between;\\n\\n    button {\\n      width: 48%;\\n      order: 2;\\n    }\\n    button:last-child {\\n      order: 1;\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  @media \", \" {\\n    width: 50%;\\n    margin: 0 auto;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport { Wrapper, WrapperHeight } from '../../../components/StyledComponents/Wrapper';\nimport { Button } from '../../../components/controls/Button/Button';\nimport { TipWrapper, Title } from '../../../components/Layouts/styledLayouts';\nimport Header from '../../../components/Header/Header';\nimport withOfferInfo from '../../../utils/offer';\nimport { apiEditOffer } from '../../../actions/api';\nimport { showNotification } from '../../../utils/notification';\nimport useOffer from '../../../hooks/useOffer';\nimport { MainContext } from '../../../components/contextProviders/MainContext';\nimport { Divider } from '../../../components/StyledComponents/Divider';\nimport { CardItemDescription, CardItemImgWrapperCongrat, CardItemStatus, CardItemTitle, CongratCardWrapper, CongratCardWrapperW } from '../../../components/Offer/cards/styledCard';\nimport { FooterCard } from '../../../components/Offer/cards/styledCard';\nimport { modifySrc } from '../../../utils/modifySrc';\nimport { Text } from '../../../components/StyledComponents/Text';\nimport { ContainerDesktop, FooterDesktop } from '../../../components/StyledComponents/Grid';\nimport styled, { css } from 'styled-components';\nimport { device } from '../../../lib/mediaDevice';\n\nvar Congratulations = function Congratulations() {\n  var router = useRouter();\n  var id = router.query.id;\n  var offer = useOffer(id);\n\n  var _useContext = useContext(MainContext),\n      setOffer = _useContext.setOffer;\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var postOffer = function postOffer() {\n    var data = {\n      status: 'open'\n    };\n    setLoading(true);\n    apiEditOffer(id, data).then(function (res) {\n      showNotification('info', 'Your offer was published');\n      Router.push(\"/offers/\".concat(id)); // setLoading(false)\n    })[\"catch\"](function (e) {\n      showNotification('error', e);\n      setLoading(false);\n    });\n  };\n\n  var finishLater = function finishLater() {\n    Router.push(\"/offers/\".concat(id));\n  };\n\n  var disabled = loading;\n  console.log('offer', offer);\n  return __jsx(React.Fragment, null, __jsx(Header, {\n    isReg: true\n  }), __jsx(Wrapper, {\n    p: 17,\n    pt: 35\n  }, offer.id ? __jsx(React.Fragment, null, __jsx(Box, {\n    isOffer: true\n  }, __jsx(WrapperHeight, null, __jsx(Title, {\n    mb: 25\n  }, \"Congratulations, you've created your offer\"), __jsx(CongratCardWrapper, {\n    mb: 50\n  }, __jsx(CongratCardWrapperW, null, __jsx(BoxDsk, null, __jsx(BoxDskLeft, null, __jsx(CardItemImgWrapperCongrat, {\n    src: modifySrc(offer.avatarUrl, 'offer')\n  })), __jsx(BoxDskRIght, null, __jsx(CardItemStatus, null, offer.subCategory && offer.subCategory.category ? offer.subCategory.category : offer.category.category), __jsx(CardItemTitle, null, offer.name, \" \"), __jsx(CardItemDescription, null, offer.pricePerAct, \" \", offer.currency)))), __jsx(Divider, {\n    grey: true,\n    full: true\n  }), __jsx(FooterCard, {\n    title: 'Settings',\n    onClick: function onClick() {\n      return Router.push(\"/offers/\".concat(offer.id, \"/edit\"));\n    }\n  }))), __jsx(Bottom, null, __jsx(Button, {\n    blue: true,\n    onClick: postOffer,\n    mt: 15,\n    loading: loading,\n    disabled: offer.status === 'open'\n  }, \"Publish offer now\"), offer.status !== 'open' && __jsx(Button, {\n    transparentBlue: true,\n    mt: 15,\n    onClick: finishLater\n  }, \"Finish later\")))) : __jsx(React.Fragment, null, \"Loading...\")));\n};\n\nexport default Congratulations;\nvar Box = styled.div(_templateObject(), device.laptopDesktop);\nvar Bottom = styled.div(_templateObject2(), device.laptopDesktop);\nvar BoxDsk = styled.div(_templateObject3(), device.laptopDesktop);\nvar BoxDskLeft = styled.div(_templateObject4(), device.laptopDesktop);\nvar BoxDskRIght = styled.div(_templateObject5(), device.laptopDesktop);","map":{"version":3,"sources":["D:/4/диплом/webapp/pages/offers/[id]/congratulations.js"],"names":["React","useState","useContext","useEffect","Router","useRouter","Wrapper","WrapperHeight","Button","TipWrapper","Title","Header","withOfferInfo","apiEditOffer","showNotification","useOffer","MainContext","Divider","CardItemDescription","CardItemImgWrapperCongrat","CardItemStatus","CardItemTitle","CongratCardWrapper","CongratCardWrapperW","FooterCard","modifySrc","Text","ContainerDesktop","FooterDesktop","styled","css","device","Congratulations","router","id","query","offer","setOffer","loading","setLoading","postOffer","data","status","then","res","push","e","finishLater","disabled","console","log","avatarUrl","subCategory","category","name","pricePerAct","currency","Box","div","laptopDesktop","Bottom","BoxDsk","BoxDskLeft","BoxDskRIght"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\r\nimport Router, { useRouter } from 'next/router'\r\n\r\nimport { Wrapper, WrapperHeight } from '../../../components/StyledComponents/Wrapper'\r\nimport { Button } from '../../../components/controls/Button/Button'\r\nimport { TipWrapper, Title } from '../../../components/Layouts/styledLayouts'\r\nimport Header from '../../../components/Header/Header'\r\nimport withOfferInfo from '../../../utils/offer'\r\nimport { apiEditOffer } from '../../../actions/api'\r\nimport { showNotification } from '../../../utils/notification'\r\nimport useOffer from '../../../hooks/useOffer'\r\nimport { MainContext } from '../../../components/contextProviders/MainContext'\r\nimport { Divider } from '../../../components/StyledComponents/Divider'\r\nimport {\r\n  CardItemDescription,\r\n  CardItemImgWrapperCongrat,\r\n  CardItemStatus,\r\n  CardItemTitle,\r\n  CongratCardWrapper,\r\n  CongratCardWrapperW,\r\n} from '../../../components/Offer/cards/styledCard'\r\nimport { FooterCard } from '../../../components/Offer/cards/styledCard'\r\nimport { modifySrc } from '../../../utils/modifySrc'\r\nimport { Text } from '../../../components/StyledComponents/Text'\r\nimport { ContainerDesktop, FooterDesktop } from '../../../components/StyledComponents/Grid'\r\nimport styled, { css } from 'styled-components'\r\nimport { device } from '../../../lib/mediaDevice'\r\n\r\nconst Congratulations = () => {\r\n  const router = useRouter()\r\n  const { id } = router.query\r\n  const offer = useOffer(id)\r\n  const { setOffer } = useContext(MainContext)\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const postOffer = () => {\r\n    let data = {\r\n      status: 'open',\r\n    }\r\n    setLoading(true)\r\n    apiEditOffer(id, data)\r\n      .then((res) => {\r\n        showNotification('info', 'Your offer was published')\r\n        Router.push(`/offers/${id}`)\r\n        // setLoading(false)\r\n      })\r\n      .catch((e) => {\r\n        showNotification('error', e)\r\n        setLoading(false)\r\n      })\r\n  }\r\n\r\n  const finishLater = () => {\r\n    Router.push(`/offers/${id}`)\r\n  }\r\n\r\n  const disabled = loading\r\n\r\n  console.log('offer', offer)\r\n\r\n  return (\r\n    <>\r\n      <Header isReg />\r\n      <Wrapper p={17} pt={35}>\r\n        {offer.id ? (\r\n          <>\r\n            <Box isOffer>\r\n              <WrapperHeight>\r\n                <Title mb={25}>Congratulations, you've created your offer</Title>\r\n\r\n                <CongratCardWrapper mb={50}>\r\n                  <CongratCardWrapperW>\r\n                    <BoxDsk>\r\n                      <BoxDskLeft>\r\n                        <CardItemImgWrapperCongrat src={modifySrc(offer.avatarUrl, 'offer')} />\r\n                      </BoxDskLeft>\r\n                      <BoxDskRIght>\r\n                        <CardItemStatus>\r\n                          {offer.subCategory && offer.subCategory.category\r\n                            ? offer.subCategory.category\r\n                            : offer.category.category}\r\n                        </CardItemStatus>\r\n                        <CardItemTitle>{offer.name} </CardItemTitle>\r\n                        <CardItemDescription>\r\n                          {offer.pricePerAct} {offer.currency}\r\n                        </CardItemDescription>\r\n                      </BoxDskRIght>\r\n                    </BoxDsk>\r\n                  </CongratCardWrapperW>\r\n                  <Divider grey full />\r\n                  <FooterCard\r\n                    title={'Settings'}\r\n                    onClick={() => Router.push(`/offers/${offer.id}/edit`)}\r\n                  />\r\n                </CongratCardWrapper>\r\n              </WrapperHeight>\r\n\r\n              <Bottom>\r\n                <Button\r\n                  blue\r\n                  onClick={postOffer}\r\n                  mt={15}\r\n                  loading={loading}\r\n                  disabled={offer.status === 'open'}\r\n                >\r\n                  Publish offer now\r\n                </Button>\r\n                {offer.status !== 'open' && (\r\n                  <Button transparentBlue mt={15} onClick={finishLater}>\r\n                    Finish later\r\n                  </Button>\r\n                )}\r\n              </Bottom>\r\n            </Box>\r\n          </>\r\n        ) : (\r\n          <>Loading...</>\r\n        )}\r\n      </Wrapper>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Congratulations\r\n\r\nconst Box = styled.div`\r\n  @media ${device.laptopDesktop} {\r\n    width: 50%;\r\n    margin: 0 auto;\r\n  }\r\n`\r\nconst Bottom = styled.div`\r\n  @media ${device.laptopDesktop} {\r\n    display: flex;\r\n    justify-content: space-between;\r\n\r\n    button {\r\n      width: 48%;\r\n      order: 2;\r\n    }\r\n    button:last-child {\r\n      order: 1;\r\n    }\r\n  }\r\n`\r\nconst BoxDsk = styled.div`\r\n  @media ${device.laptopDesktop} {\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n`\r\nconst BoxDskLeft = styled.div`\r\n  @media ${device.laptopDesktop} {\r\n    width: 50%;\r\n  }\r\n`\r\nconst BoxDskRIght = styled.div`\r\n  @media ${device.laptopDesktop} {\r\n    width: 50%;\r\n  }\r\n`\r\n"]},"metadata":{},"sourceType":"module"}