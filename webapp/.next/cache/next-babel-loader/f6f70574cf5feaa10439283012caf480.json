{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { useContext } from 'react'; // import Calendar from 'react-calendar-multiday'\n\nimport 'react-dates/initialize';\nimport { DateRangePicker, SingleDatePicker, DayPickerRangeController } from 'react-dates';\nimport moment from 'moment';\nimport './calendar.css';\nimport 'react-dates/lib/css/_datepicker.css';\nimport { MainContext } from \"../../contextProviders/MainContext\";\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onDatesChange\", function (startDate, endDate) {\n      // this.setState({ startDate, endDate })\n      _this.props.onChangeDates({\n        startDate: moment(startDate).toDate(),\n        endDate: moment(endDate).toDate()\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isSameDay\", function (d1, d2) {\n      return d1.getFullYear() === d2.getFullYear() && d1.getMonth() === d2.getMonth() && d1.getDate() === d2.getDate();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isDisabledDay\", function (mDay) {\n      var isDisable = false;\n\n      _this.props.calendar.map(function (item, key) {\n        if (item.status == 'disabled' || item.status == 'reserved' && _this.props.userId != item.clientId) {\n          if (_this.isSameDay(mDay, moment(item.date).toDate())) {\n            isDisable = true;\n          }\n        }\n      });\n\n      return isDisable;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isDayReservedByMe\", function (day) {\n      var mDay = moment(day).toDate();\n      var isReserved = false;\n\n      _this.props.calendar.map(function (item, key) {\n        if (item.status == 'reserved' && _this.props.userId == item.clientId) {\n          if (_this.isSameDay(mDay, moment(item.date).toDate())) {\n            isReserved = true;\n          }\n        }\n      });\n\n      return isReserved;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isOutsideRange\", function (day) {\n      var todayDate = moment().toDate();\n      var mDay = moment(day).toDate();\n      var endDate = moment(_this.props.endDateOffer).toDate();\n\n      if (_this.isSameDay(new Date(todayDate), new Date(mDay))) {\n        return false;\n      }\n\n      if (mDay < todayDate || mDay > endDate) {\n        return true;\n      }\n\n      if (_this.isDisabledDay(mDay)) {\n        return true;\n      }\n\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isDayBlocked\", function (day) {\n      // const todayDate = moment().toDate()\n      // let mDay = moment(day).toDate()\n      // let endDate = moment(this.props.endDate).toDate()\n      //\n      // if(mDay < endDate) {\n      //     return true\n      // }\n      return false;\n    });\n\n    _this.state = {\n      startDate: null,\n      endDate: null,\n      focusedInput: null\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log(this.props.calendar);\n      console.log(this.props.endDateOffer);\n      console.log(this.props.userId);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (!true) return null;\n      var campaignStartDate = '23/10/2019';\n      var campaignEndDate = '29/10/2019';\n      var startDate = this.props.bookingDates.startDate ? moment(this.props.bookingDates.startDate) : null,\n          endDate = this.props.bookingDates.endDate ? moment(this.props.bookingDates.endDate) : null;\n      return __jsx(\"div\", {\n        className: \"z-wrapper-airnb-calendar\"\n      }, __jsx(DateRangePicker, {\n        startDate: startDate // momentPropTypes.momentObj or null,\n        ,\n        endDate: endDate // momentPropTypes.momentObj or null,\n        ,\n        onDatesChange: function onDatesChange(_ref) {\n          var startDate = _ref.startDate,\n              endDate = _ref.endDate;\n          return _this2.onDatesChange(startDate, endDate);\n        },\n        startDateId: \"your_unique_start_date_id\" // PropTypes.string.isRequired,\n        ,\n        endDateId: \"your_unique_end_date_id\" // PropTypes.string.isRequired,\n        ,\n        focusedInput: this.state.focusedInput // PropTypes.oneOf([START_DATE, END_DATE]) or null,\n        ,\n        onFocusChange: function onFocusChange(focusedInput) {\n          return _this2.setState({\n            focusedInput: focusedInput\n          });\n        } // PropTypes.func.isRequired,\n        ,\n        numberOfMonths: 1,\n        minimumNights: 0,\n        isOutsideRange: function isOutsideRange(date) {\n          return _this2.isOutsideRange(date);\n        },\n        isDayBlocked: function isDayBlocked(date) {\n          return _this2.isDayBlocked(date);\n        },\n        isDayHighlighted: function isDayHighlighted(date) {\n          return _this2.isDayReservedByMe(date);\n        },\n        enableOutsideDays: true,\n        displayFormat: function displayFormat() {\n          return \"DD/MM/YYYY\";\n        }\n      }));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport { App as default };","map":{"version":3,"sources":["D:/4/диплом/webapp/components/controls/Calendar/CalendarAirbnb.js"],"names":["React","useContext","DateRangePicker","SingleDatePicker","DayPickerRangeController","moment","MainContext","App","props","startDate","endDate","onChangeDates","toDate","d1","d2","getFullYear","getMonth","getDate","mDay","isDisable","calendar","map","item","key","status","userId","clientId","isSameDay","date","day","isReserved","todayDate","endDateOffer","Date","isDisabledDay","state","focusedInput","console","log","campaignStartDate","campaignEndDate","bookingDates","onDatesChange","setState","isOutsideRange","isDayBlocked","isDayReservedByMe","Component"],"mappings":"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","sourcesContent":["import React, {useContext} from 'react'\r\n// import Calendar from 'react-calendar-multiday'\r\nimport 'react-dates/initialize';\r\nimport { DateRangePicker, SingleDatePicker, DayPickerRangeController } from 'react-dates';\r\nimport moment from 'moment'\r\nimport './calendar.css'\r\nimport 'react-dates/lib/css/_datepicker.css';\r\nimport {MainContext} from \"../../contextProviders/MainContext\";\r\n\r\n\r\nexport default class App extends React.Component {\r\n    constructor (props) {\r\n        super(props)\r\n        this.state = {\r\n            startDate: null,\r\n            endDate: null,\r\n            focusedInput: null\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        console.log(this.props.calendar)\r\n        console.log(this.props.endDateOffer)\r\n        console.log(this.props.userId)\r\n    }\r\n\r\n    onDatesChange = (startDate, endDate) => {\r\n        // this.setState({ startDate, endDate })\r\n        this.props.onChangeDates({\r\n            startDate: moment(startDate).toDate(),\r\n            endDate: moment(endDate).toDate()\r\n        })\r\n    }\r\n\r\n    isSameDay = (d1, d2) => {\r\n        return d1.getFullYear() === d2.getFullYear() &&\r\n            d1.getMonth() === d2.getMonth() &&\r\n            d1.getDate() === d2.getDate();\r\n    }\r\n\r\n    isDisabledDay = (mDay) => {\r\n        let isDisable = false\r\n        this.props.calendar.map((item, key) => {\r\n            if(item.status == 'disabled' ||\r\n                (item.status == 'reserved' && this.props.userId != item.clientId)\r\n            ) {\r\n                if(this.isSameDay(mDay, moment(item.date).toDate())) {\r\n                    isDisable = true\r\n                }\r\n            }\r\n        })\r\n        return isDisable;\r\n    }\r\n\r\n    isDayReservedByMe = day => {\r\n        let mDay = moment(day).toDate()\r\n        let isReserved = false\r\n        this.props.calendar.map((item, key) => {\r\n            if(item.status == 'reserved' && this.props.userId == item.clientId) {\r\n                if(this.isSameDay(mDay, moment(item.date).toDate())) {\r\n                    isReserved = true\r\n                }\r\n            }\r\n        })\r\n        return isReserved;\r\n    }\r\n\r\n    isOutsideRange = day => {\r\n        const todayDate = moment().toDate()\r\n        let mDay = moment(day).toDate()\r\n        let endDate = moment(this.props.endDateOffer).toDate()\r\n        if(this.isSameDay(new Date(todayDate), new Date(mDay))) {\r\n            return false\r\n        }\r\n        if(mDay < todayDate || mDay > endDate) {\r\n            return true\r\n        }\r\n        if(this.isDisabledDay(mDay)){\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n\r\n\r\n    isDayBlocked = day => {\r\n        // const todayDate = moment().toDate()\r\n        // let mDay = moment(day).toDate()\r\n        // let endDate = moment(this.props.endDate).toDate()\r\n        //\r\n        // if(mDay < endDate) {\r\n        //     return true\r\n        // }\r\n        return false\r\n    }\r\n\r\n\r\n\r\n    render () {\r\n        if(!process.browser) return null;\r\n\r\n        let campaignStartDate = '23/10/2019';\r\n        let campaignEndDate= '29/10/2019';\r\n\r\n\r\n        let startDate = this.props.bookingDates.startDate ? moment(this.props.bookingDates.startDate) : null,\r\n            endDate = this.props.bookingDates.endDate ? moment(this.props.bookingDates.endDate) : null\r\n\r\n\r\n\r\n        return (\r\n            <div className='z-wrapper-airnb-calendar'>\r\n                <DateRangePicker\r\n                    startDate={startDate} // momentPropTypes.momentObj or null,\r\n                    endDate={endDate} // momentPropTypes.momentObj or null,\r\n                    onDatesChange={({ startDate, endDate }) => this.onDatesChange(startDate, endDate )}\r\n                    startDateId=\"your_unique_start_date_id\" // PropTypes.string.isRequired,\r\n                    endDateId=\"your_unique_end_date_id\" // PropTypes.string.isRequired,\r\n                    focusedInput={this.state.focusedInput} // PropTypes.oneOf([START_DATE, END_DATE]) or null,\r\n                    onFocusChange={focusedInput => this.setState({ focusedInput })} // PropTypes.func.isRequired,\r\n                    numberOfMonths={1}\r\n                    minimumNights={0}\r\n                    isOutsideRange={(date) => this.isOutsideRange(date)}\r\n                    isDayBlocked={(date) => this.isDayBlocked(date)}\r\n                    isDayHighlighted={date => this.isDayReservedByMe(date)}\r\n                    enableOutsideDays={true}\r\n                    displayFormat={() => \"DD/MM/YYYY\"}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}