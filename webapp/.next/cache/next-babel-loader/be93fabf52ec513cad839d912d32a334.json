{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  @media \", \" {\\n    width: 400px;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useContext, useEffect, useRef, useMemo } from 'react';\nimport { Router } from \"../../../routes\";\nimport { MainContext } from \"../../contextProviders/MainContext\";\nimport { Footer, Label, Label2, TipWrapper, Title, WhoCard } from \"../../Layouts/styledLayouts\";\nimport { Wrapper, WrapperHeight } from \"../../StyledComponents/Wrapper\";\nimport { Button } from \"../../controls/Button/Button\";\nimport { Tab } from \"../../controls/Tabs/Tabs\";\nimport Header from \"../../Header/Header\";\nimport { withAuthSync } from '../../../utils/auth';\nimport { hasError } from '../../../utils/utils';\nimport { Input, TextArea } from \"../../controls/Input/Input\";\nimport { FooterDesktop } from '../../StyledComponents/Grid';\nimport { device } from '../../../lib/mediaDevice';\nimport styled from \"styled-components\";\n\nvar Category = function Category(_ref) {\n  var offer = _ref.offer,\n      onChange = _ref.onChange,\n      listCategories = _ref.listCategories,\n      handleNext = _ref.handleNext;\n\n  var _useContext = useContext(MainContext),\n      me = _useContext.me;\n\n  var _useState = useState({}),\n      errors = _useState[0],\n      setErorrs = _useState[1];\n\n  var _useState2 = useState([]),\n      listSubCategories = _useState2[0],\n      setListSubCategories = _useState2[1];\n\n  var _useState3 = useState({}),\n      category = _useState3[0],\n      setCategory = _useState3[1];\n\n  var _useState4 = useState(null),\n      subCategory = _useState4[0],\n      setSubCategory = _useState4[1];\n\n  var _useState5 = useState(false),\n      loading = _useState5[0],\n      setLoading = _useState5[1];\n\n  var subcatRef = useRef(null);\n  useEffect(function () {// setListSubCategories(offer.category.subCategory)\n  }, []);\n  var listParentCategories = useMemo(function () {\n    return listCategories.filter(function (item) {\n      return !item.parentCategory;\n    });\n  }, [listCategories]);\n  console.log('listCategories', listCategories);\n  console.log('listParentCategories', listParentCategories);\n\n  var setActiveCategory = function setActiveCategory(category) {\n    onChange({\n      target: {\n        name: 'category',\n        value: category\n      }\n    });\n    var listSubc = listCategories.filter(function (item) {\n      return item.parentCategory && item.parentCategory.id === category.id;\n    });\n    setListSubCategories(listSubc);\n    setTimeout(function () {\n      scrollToRef(subcatRef);\n    }, 300);\n  };\n\n  var scrollToRef = function scrollToRef(ref) {\n    window.scrollTo({\n      top: ref.current.offsetTop,\n      behavior: \"smooth\"\n    });\n  };\n\n  var setActiveSubCategory = function setActiveSubCategory(subCategory) {\n    onChange({\n      target: {\n        name: 'subCategory',\n        value: subCategory\n      }\n    });\n  };\n\n  var disabled = !offer.category.id;\n  return __jsx(React.Fragment, null, __jsx(WrapperHeight, null, __jsx(Title, {\n    mb: 25\n  }, \"Hello, programmer \", me.firstName, \" :)\"), __jsx(Label, null, \"What kind of programmer are you?\"), listParentCategories.length ? __jsx(React.Fragment, null, listParentCategories.map(function (item, key) {\n    return __jsx(Tab, {\n      key: key,\n      title: item.category,\n      onClick: function onClick() {\n        return setActiveCategory(item);\n      },\n      active: item.id == offer.category.id\n    });\n  })) : __jsx(React.Fragment, null, __jsx(\"div\", null, \"Loading...\")), __jsx(\"div\", {\n    className: 'sub-cat-ref',\n    ref: subcatRef\n  }, offer.category.id && !!listSubCategories.length && __jsx(React.Fragment, null, __jsx(Label, {\n    mt: 40\n  }, \"Choose the technology/language you use\"), listSubCategories.map(function (item, key) {\n    return __jsx(Tab, {\n      key: key,\n      title: item.category,\n      onClick: function onClick() {\n        return setActiveSubCategory(item);\n      },\n      active: item.id == offer.subCategory.id\n    });\n  }))), __jsx(Label, null, \"Name your offer\"), __jsx(Input, {\n    name: \"name\",\n    value: offer.name,\n    onChange: onChange,\n    minLength: 5,\n    mb: 30,\n    placeholder: \"Ex.: Manual tester\"\n  }), __jsx(Label, null, \"Add a short summary of the offer\"), __jsx(TextArea, {\n    name: \"summary\",\n    value: offer.summary,\n    onChange: onChange,\n    height: 95,\n    minLength: 5,\n    maxLength: 300,\n    placeholder: \"Ex.: Manual tester with huge experience. \"\n  })), __jsx(FooterDesktop, null, __jsx(Button, {\n    blue: true,\n    mt: 25,\n    onClick: handleNext,\n    disabled: disabled,\n    loading: loading\n  }, \"Continue\")));\n};\n\nexport default withAuthSync(Category);\nvar Box = styled.div(_templateObject(), device.laptopDesktop);","map":{"version":3,"sources":["D:/4/диплом/webapp — копия/components/Offer/creation/Category.js"],"names":["React","useState","useContext","useEffect","useRef","useMemo","Router","MainContext","Footer","Label","Label2","TipWrapper","Title","WhoCard","Wrapper","WrapperHeight","Button","Tab","Header","withAuthSync","hasError","Input","TextArea","FooterDesktop","device","styled","Category","offer","onChange","listCategories","handleNext","me","errors","setErorrs","listSubCategories","setListSubCategories","category","setCategory","subCategory","setSubCategory","loading","setLoading","subcatRef","listParentCategories","filter","item","parentCategory","console","log","setActiveCategory","target","name","value","listSubc","id","setTimeout","scrollToRef","ref","window","scrollTo","top","current","offsetTop","behavior","setActiveSubCategory","disabled","firstName","length","map","key","summary","Box","div","laptopDesktop"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect, useRef, useMemo } from 'react';\r\nimport {Router} from \"../../../routes\";\r\nimport {MainContext} from \"../../contextProviders/MainContext\";\r\nimport {Footer, Label, Label2, TipWrapper, Title, WhoCard} from \"../../Layouts/styledLayouts\";\r\nimport {Wrapper, WrapperHeight} from \"../../StyledComponents/Wrapper\";\r\nimport {Button} from \"../../controls/Button/Button\";\r\nimport {Tab} from \"../../controls/Tabs/Tabs\";\r\nimport Header from \"../../Header/Header\"\r\nimport { withAuthSync} from '../../../utils/auth'\r\nimport { hasError } from '../../../utils/utils'\r\n\r\nimport {Input, TextArea} from \"../../controls/Input/Input\";\r\nimport { FooterDesktop } from '../../StyledComponents/Grid'\r\nimport { device } from '../../../lib/mediaDevice'\r\nimport styled from \"styled-components\";\r\n\r\nconst Category = ({offer, onChange, listCategories, handleNext}) => {\r\n    const {me} = useContext(MainContext)\r\n    const [errors, setErorrs] = useState({})\r\n    const [listSubCategories, setListSubCategories] = useState([])\r\n    const [category, setCategory] = useState({})\r\n    const [subCategory, setSubCategory] = useState(null)\r\n    const [loading, setLoading] = useState(false)\r\n    const subcatRef = useRef(null)\r\n\r\n    useEffect(() => {\r\n        // setListSubCategories(offer.category.subCategory)\r\n    }, []);\r\n\r\n\r\n    const listParentCategories = useMemo(() => listCategories.filter(item => !item.parentCategory), [listCategories]);\r\n\r\n    console.log('listCategories', listCategories)\r\n    console.log('listParentCategories', listParentCategories)\r\n\r\n    const setActiveCategory = category => {\r\n        onChange( {target: {name: 'category', value: category}})\r\n        let listSubc = listCategories.filter(item => (item.parentCategory && item.parentCategory.id === category.id))\r\n        setListSubCategories(listSubc)\r\n        setTimeout(() => {\r\n            scrollToRef(subcatRef)\r\n        }, 300)\r\n    }\r\n\r\n    const scrollToRef = (ref) => {\r\n        window.scrollTo({\r\n            top: ref.current.offsetTop,\r\n            behavior: \"smooth\"\r\n        });\r\n    }\r\n\r\n    const setActiveSubCategory = subCategory => {\r\n        onChange( {target: {name: 'subCategory', value: subCategory}})\r\n    }\r\n\r\n    let disabled = !offer.category.id ;\r\n\r\n\r\n    return (\r\n        <>\r\n            <WrapperHeight>\r\n                <Title mb={25} >Hello, programmer {me.firstName} :)</Title>\r\n                <Label >What kind of programmer are you?</Label>\r\n\r\n                {listParentCategories.length ?\r\n                <>\r\n                    {listParentCategories.map((item, key)=> {\r\n                        return (\r\n                            <Tab key={key}\r\n                                 title={item.category}\r\n                                 onClick={() => setActiveCategory(item)}\r\n                                 active={item.id == offer.category.id}\r\n                            />\r\n                        )\r\n                    })}\r\n                </>\r\n                :\r\n                <>\r\n                    <div>Loading...</div>\r\n                </>\r\n                }\r\n\r\n\r\n                <div className={'sub-cat-ref'} ref={subcatRef}>\r\n                    {offer.category.id && !!listSubCategories.length &&\r\n                    <>\r\n                        <Label mt={40} >Choose the technology/language you use</Label>\r\n                        {listSubCategories.map((item, key)=>\r\n                            <Tab key={key}\r\n                                 title={item.category}\r\n                                 onClick={() => setActiveSubCategory(item)}\r\n                                 active={item.id == offer.subCategory.id}\r\n                            />\r\n                        )}\r\n                    </>\r\n                    }\r\n                </div>\r\n\r\n                <Label >Name your offer</Label>\r\n                <Input\r\n                    name='name'\r\n                    value={offer.name}\r\n                    onChange={onChange}\r\n                    minLength={5}\r\n                    mb={30}\r\n                    placeholder=\"Ex.: Manual tester\"\r\n                />\r\n\r\n                <Label >Add a short summary of the offer</Label>\r\n                <TextArea\r\n                    name='summary'\r\n                    value={offer.summary}\r\n                    onChange={onChange}\r\n                    height={95}\r\n                    minLength={5}\r\n                    maxLength={300}\r\n                    placeholder=\"Ex.: Manual tester with huge experience. \"\r\n\r\n                />\r\n\r\n            </WrapperHeight>\r\n\r\n\r\n            <FooterDesktop>\r\n                <Button blue mt={25} onClick={handleNext} disabled={disabled} loading={loading} >Continue</Button>\r\n            </FooterDesktop>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default withAuthSync(Category)\r\n\r\nconst Box = styled.div`\r\n  @media ${device.laptopDesktop} {\r\n    width: 400px;\r\n  }\r\n`"]},"metadata":{},"sourceType":"module"}