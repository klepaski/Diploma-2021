{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  @media \", \" {\\n    width: 400px;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useContext, useEffect, useRef, useMemo } from 'react';\nimport { Router } from \"../../../routes\";\nimport { MainContext } from \"../../contextProviders/MainContext\";\nimport { Footer, Label, Label2, TipWrapper, Title, WhoCard } from \"../../Layouts/styledLayouts\";\nimport { Wrapper, WrapperHeight } from \"../../StyledComponents/Wrapper\";\nimport { Button } from \"../../controls/Button/Button\";\nimport { Tab } from \"../../controls/Tabs/Tabs\";\nimport Header from \"../../Header/Header\";\nimport { withAuthSync } from '../../../utils/auth';\nimport { showNotification } from '../../../utils/notification';\nimport { modifyForReactSealect } from '../../../utils/utils';\nimport { apiCreateProgrammer, apiGetEventTypes, apiGetProgrammerCategories } from '../../../actions/api';\nimport Select from \"../../controls/Select/Select\";\nimport { Text, Tip } from \"../../StyledComponents/Text\"; // import {listCountries} from '../../../utils/countriesLanguages'\n\nimport { FooterDesktop } from '../../StyledComponents/Grid';\nimport { device } from '../../../lib/mediaDevice';\nimport styled from \"styled-components\";\nvar listCountries = [{\n  value: 'United Arab Emirates',\n  label: 'United Arab Emirates'\n}, {\n  value: 'Saudi Arabia',\n  label: 'Saudi Arabia'\n}];\n\nvar Category = function Category(_ref) {\n  var offer = _ref.offer,\n      onChange = _ref.onChange,\n      listCategories = _ref.listCategories,\n      handleNext = _ref.handleNext;\n\n  var _useContext = useContext(MainContext),\n      me = _useContext.me;\n\n  var _useState = useState([]),\n      listSubCategories = _useState[0],\n      setListSubCategories = _useState[1];\n\n  var _useState2 = useState({}),\n      category = _useState2[0],\n      setCategory = _useState2[1];\n\n  var _useState3 = useState(null),\n      subCategory = _useState3[0],\n      setSubCategory = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var subcatRef = useRef(null);\n  useEffect(function () {// setListSubCategories(offer.category.subCategory)\n  }, []);\n  var listParentCategories = useMemo(function () {\n    return listCategories.filter(function (item) {\n      return !item.parentCategory;\n    });\n  }, [listCategories]);\n  console.log('listCategories', listCategories);\n  console.log('listParentCategories', listParentCategories);\n\n  var setActiveCategory = function setActiveCategory(category) {\n    onChange({\n      target: {\n        name: 'category',\n        value: category\n      }\n    });\n    var listSubc = listCategories.filter(function (item) {\n      return item.parentCategory && item.parentCategory.id === category.id;\n    });\n    setListSubCategories(listSubc);\n    setTimeout(function () {\n      scrollToRef(subcatRef);\n    }, 300);\n  };\n\n  var handleChangeCountry = function handleChangeCountry(country) {\n    console.log('country', country);\n    onChange({\n      target: {\n        name: 'country',\n        value: country\n      }\n    });\n  }; // const createProgrammer = async () => {\n  //     setLoading(true);\n  //     let data = {category: category.category, subCategory: subCategory, country: country.value}\n  //     try {\n  //         const res = await apiCreateProgrammer(data)\n  //         debugger\n  //         // TODO: save programmer obj;\n  //\n  //         Router.push('/creating-offer')\n  //     } catch(e) {\n  //         setLoading(false);\n  //         showNotification('error', e)\n  //     }\n  // }\n\n\n  var scrollToRef = function scrollToRef(ref) {\n    window.scrollTo({\n      top: ref.current.offsetTop,\n      behavior: \"smooth\"\n    });\n  };\n\n  var setActiveSubCategory = function setActiveSubCategory(subCategory) {\n    onChange({\n      target: {\n        name: 'subCategory',\n        value: subCategory\n      }\n    });\n  };\n\n  var disabled = !offer.category.id || !offer.country || !offer.country.length;\n  return __jsx(React.Fragment, null, __jsx(WrapperHeight, null, __jsx(Title, {\n    mb: 25\n  }, \"Hello Programmer \", me.firstName, \" :)\"), __jsx(Label, null, \"What kind of programmer are you?\"), listParentCategories.length ? __jsx(React.Fragment, null, listParentCategories.map(function (item, key) {\n    return __jsx(Tab, {\n      key: key,\n      title: item.category,\n      onClick: function onClick() {\n        return setActiveCategory(item);\n      },\n      active: item.id == offer.category.id\n    });\n  })) : __jsx(React.Fragment, null, __jsx(\"div\", null, \"Loading...\")), __jsx(\"div\", {\n    className: 'sub-cat-ref',\n    ref: subcatRef\n  }, offer.category.id && !!listSubCategories.length && __jsx(React.Fragment, null, __jsx(Label, {\n    mt: 40\n  }, \"Choose the technology/language you use\"), listSubCategories.map(function (item, key) {\n    return __jsx(Tab, {\n      key: key,\n      title: item.category,\n      onClick: function onClick() {\n        return setActiveSubCategory(item);\n      },\n      active: item.id == offer.subCategory.id\n    });\n  }))), offer.category.id && __jsx(Box, null, __jsx(Label, {\n    mt: 75\n  }, \"Where could you perfom?\"), __jsx(Select, {\n    options: listCountries,\n    value: offer.country,\n    isMulti: true,\n    onChange: handleChangeCountry\n  }))), __jsx(FooterDesktop, null, __jsx(Button, {\n    blue: true,\n    mt: 25,\n    onClick: handleNext,\n    disabled: disabled,\n    loading: loading\n  }, \"Continue\")));\n};\n\nexport default withAuthSync(Category);\nvar Box = styled.div(_templateObject(), device.laptopDesktop);","map":{"version":3,"sources":["D:/4/диплом/webapp/components/Offer/creation/Category.js"],"names":["React","useState","useContext","useEffect","useRef","useMemo","Router","MainContext","Footer","Label","Label2","TipWrapper","Title","WhoCard","Wrapper","WrapperHeight","Button","Tab","Header","withAuthSync","showNotification","modifyForReactSealect","apiCreateProgrammer","apiGetEventTypes","apiGetProgrammerCategories","Select","Text","Tip","FooterDesktop","device","styled","listCountries","value","label","Category","offer","onChange","listCategories","handleNext","me","listSubCategories","setListSubCategories","category","setCategory","subCategory","setSubCategory","loading","setLoading","subcatRef","listParentCategories","filter","item","parentCategory","console","log","setActiveCategory","target","name","listSubc","id","setTimeout","scrollToRef","handleChangeCountry","country","ref","window","scrollTo","top","current","offsetTop","behavior","setActiveSubCategory","disabled","length","firstName","map","key","Box","div","laptopDesktop"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect, useRef, useMemo } from 'react';\r\nimport {Router} from \"../../../routes\";\r\nimport {MainContext} from \"../../contextProviders/MainContext\";\r\nimport {Footer, Label, Label2, TipWrapper, Title, WhoCard} from \"../../Layouts/styledLayouts\";\r\nimport {Wrapper, WrapperHeight} from \"../../StyledComponents/Wrapper\";\r\nimport {Button} from \"../../controls/Button/Button\";\r\nimport {Tab} from \"../../controls/Tabs/Tabs\";\r\nimport Header from \"../../Header/Header\"\r\nimport { withAuthSync} from '../../../utils/auth'\r\nimport { showNotification} from '../../../utils/notification'\r\nimport { modifyForReactSealect} from '../../../utils/utils'\r\nimport {apiCreateProgrammer, apiGetEventTypes, apiGetProgrammerCategories} from '../../../actions/api'\r\nimport Select from \"../../controls/Select/Select\";\r\nimport {Text, Tip} from \"../../StyledComponents/Text\";\r\n// import {listCountries} from '../../../utils/countriesLanguages'\r\nimport { FooterDesktop } from '../../StyledComponents/Grid'\r\nimport { device } from '../../../lib/mediaDevice'\r\nimport styled from \"styled-components\";\r\n\r\nconst listCountries = [\r\n    {value: 'United Arab Emirates', label: 'United Arab Emirates'},\r\n    {value: 'Saudi Arabia', label: 'Saudi Arabia'}\r\n]\r\n\r\n\r\nconst Category = ({offer, onChange, listCategories, handleNext}) => {\r\n    const {me} = useContext(MainContext)\r\n    const [listSubCategories, setListSubCategories] = useState([])\r\n    const [category, setCategory] = useState({})\r\n    const [subCategory, setSubCategory] = useState(null)\r\n    const [loading, setLoading] = useState(false)\r\n    const subcatRef = useRef(null)\r\n\r\n    useEffect(() => {\r\n        // setListSubCategories(offer.category.subCategory)\r\n    }, []);\r\n\r\n\r\n    const listParentCategories = useMemo(() => listCategories.filter(item => !item.parentCategory), [listCategories]);\r\n\r\n    console.log('listCategories', listCategories)\r\n    console.log('listParentCategories', listParentCategories)\r\n\r\n    const setActiveCategory = category => {\r\n        onChange( {target: {name: 'category', value: category}})\r\n        let listSubc = listCategories.filter(item => (item.parentCategory && item.parentCategory.id === category.id))\r\n        setListSubCategories(listSubc)\r\n        setTimeout(() => {\r\n            scrollToRef(subcatRef)\r\n        }, 300)\r\n    }\r\n\r\n    const handleChangeCountry = country => {\r\n        console.log('country', country)\r\n        onChange( {target: {name: 'country', value: country}})\r\n    };\r\n\r\n\r\n\r\n    // const createProgrammer = async () => {\r\n    //     setLoading(true);\r\n    //     let data = {category: category.category, subCategory: subCategory, country: country.value}\r\n    //     try {\r\n    //         const res = await apiCreateProgrammer(data)\r\n    //         debugger\r\n    //         // TODO: save programmer obj;\r\n    //\r\n    //         Router.push('/creating-offer')\r\n    //     } catch(e) {\r\n    //         setLoading(false);\r\n    //         showNotification('error', e)\r\n    //     }\r\n    // }\r\n\r\n\r\n\r\n    const scrollToRef = (ref) => {\r\n        window.scrollTo({\r\n            top: ref.current.offsetTop,\r\n            behavior: \"smooth\"\r\n        });\r\n    }\r\n\r\n    const setActiveSubCategory = subCategory => {\r\n        onChange( {target: {name: 'subCategory', value: subCategory}})\r\n    }\r\n\r\n    let disabled = !offer.category.id  || !offer.country || !offer.country.length;\r\n\r\n\r\n    return (\r\n        <>\r\n            <WrapperHeight>\r\n                <Title mb={25} >Hello Programmer {me.firstName} :)</Title>\r\n                <Label >What kind of programmer are you?</Label>\r\n\r\n                {listParentCategories.length ?\r\n                <>\r\n                    {listParentCategories.map((item, key)=> {\r\n                        return (\r\n                            <Tab key={key}\r\n                                 title={item.category}\r\n                                 onClick={() => setActiveCategory(item)}\r\n                                 active={item.id == offer.category.id}\r\n                            />\r\n                        )\r\n                    })}\r\n                </>\r\n                :\r\n                <>\r\n                    <div>Loading...</div>\r\n                </>\r\n                }\r\n\r\n\r\n                <div className={'sub-cat-ref'} ref={subcatRef}>\r\n                    {offer.category.id && !!listSubCategories.length &&\r\n                    <>\r\n                        <Label mt={40} >Choose the technology/language you use</Label>\r\n                        {listSubCategories.map((item, key)=>\r\n                            <Tab key={key}\r\n                                 title={item.category}\r\n                                 onClick={() => setActiveSubCategory(item)}\r\n                                 active={item.id == offer.subCategory.id}\r\n                            />\r\n                        )}\r\n                    </>\r\n                    }\r\n                </div>\r\n\r\n\r\n                {offer.category.id &&\r\n                <Box>\r\n                    <Label mt={75} >Where could you perfom?</Label>\r\n                    <Select\r\n                        options={listCountries}\r\n                        value={offer.country}\r\n                        isMulti={true}\r\n                        onChange={handleChangeCountry}\r\n                    />\r\n                </Box>\r\n                }\r\n            </WrapperHeight>\r\n\r\n\r\n            <FooterDesktop>\r\n                <Button blue mt={25} onClick={handleNext} disabled={disabled} loading={loading} >Continue</Button>\r\n            </FooterDesktop>\r\n\r\n\r\n\r\n            {/*{disabled ?*/}\r\n            {/*    <Tip>*/}\r\n            {/*        /!*To continue, please fill in all required fields*!/*/}\r\n            {/*    </Tip>*/}\r\n            {/*    :*/}\r\n            {/*    <TipWrapper mt={15}>*/}\r\n            {/*        <Text fz={20}>We think you could earn </Text>*/}\r\n            {/*        <Text fz={32}>$ --</Text>*/}\r\n            {/*    </TipWrapper>*/}\r\n            {/*}*/}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default withAuthSync(Category)\r\n\r\nconst Box = styled.div`\r\n  @media ${device.laptopDesktop} {\r\n    width: 400px;\r\n  }\r\n`"]},"metadata":{},"sourceType":"module"}