{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nvar _this = this;\n\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  @media \", \" {\\n    width: 400px;\\n    margin: 0 auto;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext, useRef } from 'react';\nimport styled, { css } from 'styled-components';\nimport { MenuSettingsWrapper, MenuSettingsItem } from '../../components/Profile/styledProfileHeader';\nimport { Text } from '../StyledComponents/Text';\nimport { FlexBlock } from '../StyledComponents/FlexBlock';\nimport { Input, TextArea } from '../controls/Input/Input';\nimport Select from '../controls/Select/Select';\nimport DatePicker from '../controls/DateTimePickers/Datepicker';\nimport { Wrapper } from '../StyledComponents/Wrapper';\nimport { listCountries, listLanguages } from '../../utils/countriesLanguages';\nimport { Divider } from '../StyledComponents/Divider';\nimport { Button } from '../controls/Button/Button';\nimport RegAvatar from '../../components/controls/Upload/RegAvatar';\nimport { showNotification } from '../../utils/notification';\nimport { modifySrc } from '../../utils/modifySrc';\nimport { device } from '../../lib/mediaDevice';\n\nvar ProfileAvatar = function ProfileAvatar(props) {\n  var _useState = useState(_objectSpread({}, props.user)),\n      user = _useState[0],\n      setUser = _useState[1];\n\n  var regAvatarEl = useRef(null);\n\n  var test = function test() {\n    console.log('onLoadSuccess function', regAvatarEl);\n  };\n\n  React.useEffect(function () {\n    setUser(props.user);\n  }, [props.user]);\n\n  var onSave = function onSave() {\n    // validate photo\n    try {\n      regAvatarEl.current.editor.getImageScaledToCanvas().toBlob(function (blob) {\n        props.onSavePhoto(blob);\n      }.bind(_this), 'image/png', 1);\n    } catch (e) {\n      showNotification('error', 'Error while loading photo');\n    }\n  };\n\n  return __jsx(Box, null, __jsx(FlexBlock, null, __jsx(Text, {\n    bold: true,\n    fz: 18,\n    mb: 20\n  }, \"Profile Photo\"), user.profilePhotoURL && __jsx(Text, {\n    fz: 14,\n    underline: true,\n    onClick: function onClick() {\n      return props.handleDeleteAvatar();\n    }\n  }, \"Delete\")), __jsx(RegAvatar, {\n    profilePhotoURL: modifySrc(user.profilePhotoURL, 'person'),\n    onLoadSuccess: function onLoadSuccess() {\n      return test();\n    },\n    ref: regAvatarEl\n  }), __jsx(Divider, {\n    grey: true,\n    mt: 28,\n    mb: 25\n  }), __jsx(Button, {\n    blue: true,\n    onClick: onSave,\n    disabled: props.loading\n  }, \"Save\"));\n};\n\nexport default ProfileAvatar;\nvar Box = styled.div(_templateObject(), device.laptopDesktop);","map":{"version":3,"sources":["D:/4/диплом/webapp — копия/components/Profile/ProfileAvatar.js"],"names":["React","useState","useContext","useRef","styled","css","MenuSettingsWrapper","MenuSettingsItem","Text","FlexBlock","Input","TextArea","Select","DatePicker","Wrapper","listCountries","listLanguages","Divider","Button","RegAvatar","showNotification","modifySrc","device","ProfileAvatar","props","user","setUser","regAvatarEl","test","console","log","useEffect","onSave","current","editor","getImageScaledToCanvas","toBlob","blob","onSavePhoto","bind","e","profilePhotoURL","handleDeleteAvatar","loading","Box","div","laptopDesktop"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useRef } from 'react'\r\nimport styled, { css } from 'styled-components'\r\nimport { MenuSettingsWrapper, MenuSettingsItem } from '../../components/Profile/styledProfileHeader'\r\nimport { Text } from '../StyledComponents/Text'\r\nimport { FlexBlock } from '../StyledComponents/FlexBlock'\r\nimport { Input, TextArea } from '../controls/Input/Input'\r\nimport Select from '../controls/Select/Select'\r\nimport DatePicker from '../controls/DateTimePickers/Datepicker'\r\nimport { Wrapper } from '../StyledComponents/Wrapper'\r\nimport { listCountries, listLanguages } from '../../utils/countriesLanguages'\r\nimport { Divider } from '../StyledComponents/Divider'\r\nimport { Button } from '../controls/Button/Button'\r\nimport RegAvatar from '../../components/controls/Upload/RegAvatar'\r\nimport { showNotification } from '../../utils/notification'\r\nimport { modifySrc } from '../../utils/modifySrc'\r\nimport { device } from '../../lib/mediaDevice'\r\n\r\nconst ProfileAvatar = (props) => {\r\n  const [user, setUser] = useState({ ...props.user })\r\n  const regAvatarEl = useRef(null)\r\n\r\n  const test = () => {\r\n    console.log('onLoadSuccess function', regAvatarEl)\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    setUser(props.user)\r\n  }, [props.user])\r\n\r\n  const onSave = () => {\r\n    // validate photo\r\n    try {\r\n      regAvatarEl.current.editor.getImageScaledToCanvas().toBlob(\r\n        function (blob) {\r\n          props.onSavePhoto(blob)\r\n        }.bind(this),\r\n        'image/png',\r\n        1,\r\n      )\r\n    } catch (e) {\r\n      showNotification('error', 'Error while loading photo')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      <FlexBlock>\r\n        <Text bold fz={18} mb={20}>\r\n          Profile Photo\r\n        </Text>\r\n        {user.profilePhotoURL && (\r\n          <Text fz={14} underline onClick={() => props.handleDeleteAvatar()}>\r\n            Delete\r\n          </Text>\r\n        )}\r\n      </FlexBlock>\r\n\r\n      <RegAvatar\r\n        profilePhotoURL={modifySrc(user.profilePhotoURL, 'person')}\r\n        onLoadSuccess={() => test()}\r\n        ref={regAvatarEl}\r\n      />\r\n\r\n      <Divider grey mt={28} mb={25} />\r\n      <Button blue onClick={onSave} disabled={props.loading}>\r\n        Save\r\n      </Button>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default ProfileAvatar\r\n\r\nconst Box = styled.div`\r\n  @media ${device.laptopDesktop} {\r\n    width: 400px;\r\n    margin: 0 auto;\r\n  }\r\n`\r\n"]},"metadata":{},"sourceType":"module"}