{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useContext, useEffect, useRef, useMemo } from 'react';\nimport { Router } from \"../../../routes\";\nimport { MainContext } from \"../../contextProviders/MainContext\";\nimport { Footer, Label, Label2, TipWrapper, Title, WhoCard } from \"../../Layouts/styledLayouts\";\nimport { Wrapper, WrapperHeight } from \"../../StyledComponents/Wrapper\";\nimport { Button } from \"../../controls/Button/Button\";\nimport { Tab } from \"../../controls/Tabs/Tabs\";\nimport Header from \"../../Header/Header\";\nimport { withAuthSync } from '../../../utils/auth';\nimport { hasError } from '../../../utils/utils';\nimport { Input, TextArea } from \"../../controls/Input/Input\";\nimport { FooterDesktop } from '../../StyledComponents/Grid';\nimport { device } from '../../../lib/mediaDevice';\nimport styled from \"styled-components\";\n\nconst Category = ({\n  offer,\n  onChange,\n  listCategories,\n  handleNext\n}) => {\n  const {\n    me\n  } = useContext(MainContext);\n  const {\n    0: errors,\n    1: setErorrs\n  } = useState({});\n  const {\n    0: listSubCategories,\n    1: setListSubCategories\n  } = useState([]);\n  const {\n    0: category,\n    1: setCategory\n  } = useState({});\n  const {\n    0: subCategory,\n    1: setSubCategory\n  } = useState(null);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const subcatRef = useRef(null);\n  useEffect(() => {// setListSubCategories(offer.category.subCategory)\n  }, []);\n  const listParentCategories = useMemo(() => listCategories.filter(item => !item.parentCategory), [listCategories]);\n  console.log('listCategories', listCategories);\n  console.log('listParentCategories', listParentCategories);\n\n  const setActiveCategory = category => {\n    onChange({\n      target: {\n        name: 'category',\n        value: category\n      }\n    });\n    let listSubc = listCategories.filter(item => item.parentCategory && item.parentCategory.id === category.id);\n    setListSubCategories(listSubc);\n    setTimeout(() => {\n      scrollToRef(subcatRef);\n    }, 300);\n  };\n\n  const scrollToRef = ref => {\n    window.scrollTo({\n      top: ref.current.offsetTop,\n      behavior: \"smooth\"\n    });\n  };\n\n  const setActiveSubCategory = subCategory => {\n    onChange({\n      target: {\n        name: 'subCategory',\n        value: subCategory\n      }\n    });\n  };\n\n  let disabled = !offer.category.id || !offer.name.length || !offer.summary.length;\n  return __jsx(React.Fragment, null, __jsx(WrapperHeight, null, __jsx(Title, {\n    mb: 25\n  }, \"Hello, programmer \", me.firstName, \" :)\"), __jsx(Label, null, \"What kind of programmer are you?\"), listParentCategories.length ? __jsx(React.Fragment, null, listParentCategories.map((item, key) => {\n    return __jsx(Tab, {\n      key: key,\n      title: item.category,\n      onClick: () => setActiveCategory(item),\n      active: item.id == offer.category.id\n    });\n  })) : __jsx(React.Fragment, null, __jsx(\"div\", null, \"Loading...\")), __jsx(\"div\", {\n    className: 'sub-cat-ref',\n    ref: subcatRef\n  }, offer.category.id && !!listSubCategories.length && __jsx(React.Fragment, null, __jsx(Label, {\n    mt: 40\n  }, \"Choose the technology/language you use\"), listSubCategories.map((item, key) => __jsx(Tab, {\n    key: key,\n    title: item.category,\n    onClick: () => setActiveSubCategory(item),\n    active: item.id == offer.subCategory.id\n  })))), __jsx(Label, null, \"Name your offer\"), __jsx(Input, {\n    name: \"name\",\n    value: offer.name,\n    onChange: onChange,\n    mb: 30,\n    placeholder: \"Ex.: Manual tester\"\n  }), __jsx(Label, null, \"Add a short summary of the offer\"), __jsx(TextArea, {\n    name: \"summary\",\n    value: offer.summary,\n    onChange: onChange,\n    height: 95,\n    maxLength: 300,\n    placeholder: \"Ex.: Manual tester with huge experience. \"\n  })), __jsx(FooterDesktop, null, __jsx(Button, {\n    blue: true,\n    mt: 25,\n    onClick: handleNext,\n    disabled: disabled,\n    loading: loading\n  }, \"Continue\")));\n};\n\nexport default withAuthSync(Category);\nconst Box = styled.div`\n  @media ${device.laptopDesktop} {\n    width: 400px;\n  }\n`;","map":{"version":3,"sources":["D:/4/диплом/webapp — копия/components/Offer/creation/Category.js"],"names":["React","useState","useContext","useEffect","useRef","useMemo","Router","MainContext","Footer","Label","Label2","TipWrapper","Title","WhoCard","Wrapper","WrapperHeight","Button","Tab","Header","withAuthSync","hasError","Input","TextArea","FooterDesktop","device","styled","Category","offer","onChange","listCategories","handleNext","me","errors","setErorrs","listSubCategories","setListSubCategories","category","setCategory","subCategory","setSubCategory","loading","setLoading","subcatRef","listParentCategories","filter","item","parentCategory","console","log","setActiveCategory","target","name","value","listSubc","id","setTimeout","scrollToRef","ref","window","scrollTo","top","current","offsetTop","behavior","setActiveSubCategory","disabled","length","summary","firstName","map","key","Box","div","laptopDesktop"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect, useRef, useMemo } from 'react';\r\nimport {Router} from \"../../../routes\";\r\nimport {MainContext} from \"../../contextProviders/MainContext\";\r\nimport {Footer, Label, Label2, TipWrapper, Title, WhoCard} from \"../../Layouts/styledLayouts\";\r\nimport {Wrapper, WrapperHeight} from \"../../StyledComponents/Wrapper\";\r\nimport {Button} from \"../../controls/Button/Button\";\r\nimport {Tab} from \"../../controls/Tabs/Tabs\";\r\nimport Header from \"../../Header/Header\"\r\nimport { withAuthSync} from '../../../utils/auth'\r\nimport { hasError } from '../../../utils/utils'\r\n\r\nimport {Input, TextArea} from \"../../controls/Input/Input\";\r\nimport { FooterDesktop } from '../../StyledComponents/Grid'\r\nimport { device } from '../../../lib/mediaDevice'\r\nimport styled from \"styled-components\";\r\n\r\nconst Category = ({offer, onChange, listCategories, handleNext}) => {\r\n    const {me} = useContext(MainContext)\r\n    const [errors, setErorrs] = useState({})\r\n    const [listSubCategories, setListSubCategories] = useState([])\r\n    const [category, setCategory] = useState({})\r\n    const [subCategory, setSubCategory] = useState(null)\r\n    const [loading, setLoading] = useState(false)\r\n    const subcatRef = useRef(null)\r\n\r\n    useEffect(() => {\r\n        // setListSubCategories(offer.category.subCategory)\r\n    }, []);\r\n\r\n\r\n    const listParentCategories = useMemo(() => listCategories.filter(item => !item.parentCategory), [listCategories]);\r\n\r\n    console.log('listCategories', listCategories)\r\n    console.log('listParentCategories', listParentCategories)\r\n\r\n    const setActiveCategory = category => {\r\n        onChange( {target: {name: 'category', value: category}})\r\n        let listSubc = listCategories.filter(item => (item.parentCategory && item.parentCategory.id === category.id))\r\n        setListSubCategories(listSubc)\r\n        setTimeout(() => {\r\n            scrollToRef(subcatRef)\r\n        }, 300)\r\n    }\r\n\r\n    const scrollToRef = (ref) => {\r\n        window.scrollTo({\r\n            top: ref.current.offsetTop,\r\n            behavior: \"smooth\"\r\n        });\r\n    }\r\n\r\n    const setActiveSubCategory = subCategory => {\r\n        onChange( {target: {name: 'subCategory', value: subCategory}})\r\n    }\r\n\r\n    let disabled = !offer.category.id || !offer.name.length || !offer.summary.length;\r\n\r\n\r\n    return (\r\n        <>\r\n            <WrapperHeight>\r\n                <Title mb={25} >Hello, programmer {me.firstName} :)</Title>\r\n                <Label >What kind of programmer are you?</Label>\r\n\r\n                {listParentCategories.length ?\r\n                <>\r\n                    {listParentCategories.map((item, key)=> {\r\n                        return (\r\n                            <Tab key={key}\r\n                                 title={item.category}\r\n                                 onClick={() => setActiveCategory(item)}\r\n                                 active={item.id == offer.category.id}\r\n                            />\r\n                        )\r\n                    })}\r\n                </>\r\n                :\r\n                <>\r\n                    <div>Loading...</div>\r\n                </>\r\n                }\r\n\r\n\r\n                <div className={'sub-cat-ref'} ref={subcatRef}>\r\n                    {offer.category.id && !!listSubCategories.length &&\r\n                    <>\r\n                        <Label mt={40} >Choose the technology/language you use</Label>\r\n                        {listSubCategories.map((item, key)=>\r\n                            <Tab key={key}\r\n                                 title={item.category}\r\n                                 onClick={() => setActiveSubCategory(item)}\r\n                                 active={item.id == offer.subCategory.id}\r\n                            />\r\n                        )}\r\n                    </>\r\n                    }\r\n                </div>\r\n\r\n                <Label >Name your offer</Label>\r\n                <Input\r\n                    name='name'\r\n                    value={offer.name}\r\n                    onChange={onChange}\r\n                    mb={30}\r\n                    placeholder=\"Ex.: Manual tester\"\r\n                />\r\n\r\n                <Label >Add a short summary of the offer</Label>\r\n                <TextArea\r\n                    name='summary'\r\n                    value={offer.summary}\r\n                    onChange={onChange}\r\n                    height={95}\r\n                    maxLength={300}\r\n                    placeholder=\"Ex.: Manual tester with huge experience. \"\r\n\r\n                />\r\n\r\n            </WrapperHeight>\r\n\r\n\r\n            <FooterDesktop>\r\n                <Button blue mt={25} onClick={handleNext} disabled={disabled} loading={loading} >Continue</Button>\r\n            </FooterDesktop>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default withAuthSync(Category)\r\n\r\nconst Box = styled.div`\r\n  @media ${device.laptopDesktop} {\r\n    width: 400px;\r\n  }\r\n`"]},"metadata":{},"sourceType":"module"}